# mlld Scripts

This directory contains various scripts for building, validating, and managing the mlld codebase.

## AST Validation Scripts

### `validate-ast-types.js`

Validates the standard AST type files generated by the AST Explorer. Ensures that:
- All expected base types are present
- All directive kinds have proper union types
- All directive subtypes have proper interfaces

### `validate-enhanced-types.js`

Validates the enhanced type files generated for the consolidated AST Explorer output. Checks:
- Required base type and union files exist
- Proper directory structure exists
- Files export all necessary types

### `validate-enhanced-ast-explorer.js`

Validates that the enhanced AST Explorer is generating the correct type structure:
- Checks for all expected base types
- Ensures all directive kinds have union files
- Verifies all directive subtypes have properly structured interfaces
- Checks that discriminated unions include all subtypes
- Validates that types have proper discriminator fields
- Ensures index.ts exports all necessary types

## Running the Validation Scripts

```bash
# Validate standard AST types
npm run ast:validate

# Validate enhanced AST types
npm run ast:validate:enhanced

# Validate enhanced AST Explorer output
npm run ast:validate:explorer

# Run the full AST workflow (generate and validate)
npm run ast:enhanced:workflow
```

## CI Integration

The AST validation is integrated with CI through the GitHub Actions workflow in `.github/workflows/validate-ast.yml`. This workflow runs automatically when:

1. Changes are pushed to the main branch or grammar/* branches
2. Pull requests are created against the main branch
3. The workflow is manually triggered

The workflow validates that any changes to the AST Explorer or grammar continue to produce the expected type structure.