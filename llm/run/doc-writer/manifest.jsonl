{"atom": "control-flow/for-context.md", "action": "create", "changelog": "**`@mx.for` iteration context**: Access loop state inside `for` blocks\n  - `@mx.for.index` - Current 0-based index\n  - `@mx.for.total` - Total items in collection\n  - `@mx.for.key` - Key for objects, index string for arrays\n  - `@mx.for.parallel` - Whether loop is parallel\n  - Works in both sequential and `parallel()` for loops\n\n**Array `for` binding metadata `@item.mx.index`**: Loop-bound variables in array iteration expose a zero-based `mx.index` value.\n  - Works in expressions, `when` filters, templates, directive bodies, and nested loops.\n  - Preserves original array position in `for parallel(...)` iterations.\n  - Object iteration keeps `@item.mx.key` and does not set `@item.mx.index`.", "hints": ["mx.for", "forContext", "ForContext", "mx.for.index", "mx.for.total", "mx.for.key", "mx.for.parallel", "item.mx.index", "item.mx.key"]}
{"atom": "control-flow/bail.md", "action": "create", "changelog": "**`bail` directive**: `bail <message>` (and `/bail <message>` in markdown mode) terminates the entire script with exit code `1`, including from nested `if`/`when`/`for` blocks and imported modules.", "hints": ["bail", "BailError", "BailSignal", "script termination", "exit code"]}
{"atom": "control-flow/script-return.md", "action": "create", "changelog": "**Top-level script returns (`=>`)**: strict scripts accept bare `=>` and markdown scripts use `/=>` as an explicit script return.\n  - `=> @value` terminates script execution immediately.\n  - Top-level `if` and `when` branches can return through the script context.\n  - Imported `.mld` modules expose script return values through `default`.\n  - Scripts without `=>` do not emit implicit final return output.", "hints": ["scriptReturn", "ScriptReturn", "TopLevelReturn", "script return", "=> @value", "default export"]}
{"atom": "modules/importing-node.md", "action": "create", "changelog": "**Node module imports**: `import { @x } from node @package` auto-wraps exports, supports `new` constructor expressions, and streams async iterables", "hints": ["node import", "from node", "NodeImport", "NodePackage", "node @package", "async iterable", "constructor expression"]}
{"atom": "configuration/live-stdio.md", "action": "create", "changelog": "**`mlld live --stdio`**: persistent NDJSON RPC transport for long-running SDK calls\n  - Accepts `process`, `execute`, `analyze`, `cancel`, and `state:update` methods over stdio\n  - Streams SDK events as NDJSON while requests execute\n  - Returns structured completion payloads per request id\n  - Aborts active requests on `cancel`, stdin EOF, SIGINT, or SIGTERM\n\nChanged: Go/Python/Rust/Ruby SDK wrappers use persistent `mlld live --stdio` transport instead of per-call CLI shellouts.\n  - Go, Python, Rust, and Ruby expose async handle APIs for `process` and `execute` with `wait/result`, `cancel`, and `update_state`.\n  - `process` accepts payload/state/dynamic module injection options across wrappers.\n  - `execute` merges `stateWrites` from final results and streamed `state:write` events.\n  - SDK integration tests cover state injection, dynamic module injection, state write capture, persisted state replay, and loop-stop signaling via in-flight `state:update`.\n  - SDK integration tests assert `update_state` after completion fails with `REQUEST_NOT_FOUND` across Go/Python/Rust/Ruby.", "hints": ["live", "stdio", "NDJSON", "LiveTransport", "liveCommand", "persistent transport", "RPC"]}
{"atom": "configuration/mcp-dev.md", "action": "create", "changelog": "**`mlld mcp-dev`**: MCP server for language introspection tools\n  - `mlld_validate` - Syntax validation with errors/warnings\n  - `mlld_analyze` - Module analysis (exports, executables, imports, guards)\n  - `mlld_ast` - Raw AST output\n  - Separate from `mlld mcp` which serves user-defined tools", "hints": ["mcp-dev", "mcpDev", "mcp_dev", "mlld_validate", "mlld_analyze", "mlld_ast", "introspection"]}
{"atom": "configuration/validate-features.md", "action": "create", "changelog": "**`mlld validate` undefined variable detection**: Warns about undefined variable references before runtime\n  - Detects common mistakes like `@mx.now` with hint suggesting `@now`\n  - Tracks declarations from `var`, `let`, imports, for loops, and exe blocks\n  - Recognizes builtins: `@now`, `@base`, `@parse`, `@json` (deprecated alias), `@local`, `@cache`, `@env`, `@p`, `@mx`\n  - `--error-on-warnings` flag exits with code 1 when warnings are found\n\n**`mlld validate` variable redefinition detection**: Catches attempts to redefine outer-scope variables\n  - Detects `var @x = ...` inside when/for blocks when `@x` is already defined\n  - Educational error explains mlld's immutability model\n  - Suggests alternatives: `let` for block-scoped values, new names, or augmented assignment\n\n**`mlld validate` exe parameter shadowing warning**: Warns when executable parameters use generic names that commonly collide with caller variables (for example `result`)\n  - Suggests more specific names (for example `status`)\n  - Supports intentional suppression with `validate.suppressWarnings` in `mlld-config.json`\n\nChanged: `mlld validate` reports builtin-name shadowing as informational output while reserved-name collisions remain validation errors.\nChanged: `mlld validate` reports informational deprecation warnings for `@json*` alias usage and suggests `@parse*`, unless a user-defined `@json` shadows the builtin.", "hints": ["validate", "validateCommand", "undefined variable", "redefinition", "shadowing", "error-on-warnings", "suppressWarnings", "undefinedVariable", "variableRedefinition"]}
{"atom": "control-flow/no-early-exit.md", "action": "update", "changelog": "UPDATE CONTEXT: Top-level script returns (`=>`) were added in rc82. This atom previously stated there is no top-level return. It now needs to be reconciled: the no-early-exit rule applies to exe blocks and for blocks (you cannot break out of them early), but scripts DO support `=> @value` for top-level return. Reference the new script-return.md atom for the script-level feature.", "hints": ["scriptReturn", "ScriptReturn", "no-early-exit", "top-level return", "=> @value"]}
{"atom": "control-flow/when-inline.md", "action": "update", "changelog": "**Bare match form**: `when @expr [patterns]` works without the colon â€” `when @mode [\"active\" => x; * => y]` is now valid alongside the colon form `when @mode: [...]`\n  - The `=> [block]` form disambiguates imperative blocks, so the colon is no longer needed for parsing\n  - Colon form still works (backward compatible) but is no longer shown in docs", "hints": ["bare match", "colon optional", "when @expr", "without the colon", "WhenMatch"]}
{"atom": "syntax/file-loading-basics.md", "action": "update", "changelog": "**Optional load syntax:** `<file.md>?` and `<**/*.md>?` returns null or empty array if file or glob results don't exist", "hints": ["optional load", "optional file", "file.md>?", "OptionalLoad", "optionalLoad", "null if missing"]}
