{
  "name": "exec-reference",
  "input": "@exec echo (text) = @run [echo \"@text\"]\n@exec greet (name) = @run @echo[\"Hello, @name!\"]\n@run @greet(\"World\")",
  "expected": "Hello, World!",
  "directives": [
    "@exec echo (text) = @run [echo \"@text\"]",
    "@exec greet (name) = @run @echo[\"Hello, @name!\"]",
    "@run @greet(\"World\")"
  ],
  "ast": [
    {
      "type": "Directive",
      "nodeId": "6aeee257-d276-48a5-8ccf-414dd613b99a",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 39,
          "line": 1,
          "column": 40
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "4ca66273-1a35-4b84-afbc-2e27aeafc68a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 39,
                "line": 1,
                "column": 40
              }
            },
            "content": "echo"
          }
        ],
        "params": [
          {
            "type": "VariableReference",
            "nodeId": "fc48bb31-e1bb-4b8f-a954-3e3df17ccfbe",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "variable",
            "isVariableReference": true,
            "identifier": "text"
          }
        ],
        "command": [
          {
            "type": "Text",
            "nodeId": "d0e569e0-bee1-4e8b-b588-e313f1772d9f",
            "location": {
              "start": {
                "offset": 26,
                "line": 1,
                "column": 27
              },
              "end": {
                "offset": 32,
                "line": 1,
                "column": 33
              }
            },
            "content": "echo \""
          },
          {
            "type": "VariableReference",
            "nodeId": "cc8ab7c6-66ab-4263-9038-94421ae5ad8a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "isVariableReference": true,
            "identifier": "text"
          },
          {
            "type": "Text",
            "nodeId": "ae8710db-3d15-4dce-9ce6-6ebf7f2e148f",
            "location": {
              "start": {
                "offset": 37,
                "line": 1,
                "column": 38
              },
              "end": {
                "offset": 38,
                "line": 1,
                "column": 39
              }
            },
            "content": "\""
          }
        ]
      },
      "raw": {
        "identifier": "echo",
        "params": [
          "text"
        ],
        "command": "echo \"@text\""
      },
      "meta": {
        "hasVariables": true,
        "parameterCount": 1
      }
    },
    {
      "type": "Directive",
      "nodeId": "287a86fd-3e2a-4c2b-a467-3fe3db5223f5",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 31,
          "line": 1,
          "column": 32
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "reference",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "6927c9bd-f285-4cd2-b18d-3ba76f92b2be",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 31,
                "line": 1,
                "column": 32
              }
            },
            "content": "greet"
          }
        ],
        "params": [
          {
            "type": "VariableReference",
            "nodeId": "c4e78aa1-4353-4b6e-a852-9a572848a7f5",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "variable",
            "isVariableReference": true,
            "identifier": "name"
          }
        ],
        "commandRef": [
          {
            "type": "Text",
            "nodeId": "973ad41d-e649-46dd-b706-1e30e83dc0af",
            "location": {
              "start": {
                "offset": 27,
                "line": 1,
                "column": 28
              },
              "end": {
                "offset": 31,
                "line": 1,
                "column": 32
              }
            },
            "content": "echo"
          }
        ],
        "args": []
      },
      "raw": {
        "identifier": "greet",
        "params": [
          "name"
        ],
        "commandRef": "echo",
        "args": []
      },
      "meta": {
        "parameterCount": 1,
        "argumentCount": 0,
        "isCommandRef": true
      }
    },
    {
      "type": "Text",
      "nodeId": "20febd02-bbc8-4502-ad3b-effee1a7965d",
      "location": {
        "start": {
          "offset": 31,
          "line": 1,
          "column": 32
        },
        "end": {
          "offset": 48,
          "line": 1,
          "column": 49
        }
      },
      "content": "[\"Hello, @name!\"]"
    },
    {
      "type": "Directive",
      "nodeId": "368f539b-0ad5-4bb7-9567-c0c76119c0f4",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 20,
          "line": 1,
          "column": 21
        }
      },
      "kind": "run",
      "subtype": "runExec",
      "source": "exec",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "776f9b31-dca8-466e-932f-053f39e05bad",
            "location": {
              "start": {
                "offset": 6,
                "line": 1,
                "column": 7
              },
              "end": {
                "offset": 20,
                "line": 1,
                "column": 21
              }
            },
            "content": "greet"
          }
        ],
        "args": [
          {
            "type": "Text",
            "nodeId": "310ee4fd-7c61-4c7e-9a61-c4df9086a6c7",
            "location": {
              "start": {
                "offset": 12,
                "line": 1,
                "column": 13
              },
              "end": {
                "offset": 19,
                "line": 1,
                "column": 20
              }
            },
            "content": "World"
          }
        ]
      },
      "raw": {
        "identifier": "greet",
        "args": [
          "World"
        ]
      },
      "meta": {
        "argumentCount": 1
      }
    }
  ],
  "metadata": {
    "kind": "exec",
    "subtype": "reference"
  }
}