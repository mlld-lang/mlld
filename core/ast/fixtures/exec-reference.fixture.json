{
  "name": "exec-reference",
  "input": "@exec echo (text) = @run [echo \"@text\"]\n@exec greet (name) = @run @echo[\"Hello, @name!\"]\n@run @greet(\"World\")",
  "expected": "Hello, World!",
  "directives": [
    "@exec echo (text) = @run [echo \"@text\"]",
    "@exec greet (name) = @run @echo[\"Hello, @name!\"]",
    "@run @greet(\"World\")"
  ],
  "ast": [
    {
      "type": "Directive",
      "nodeId": "3a880eaa-949c-4a7b-8726-617ad0da9798",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 39,
          "line": 1,
          "column": 40
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "8ee16052-d8cd-412b-8228-bba100b5f6ee",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 39,
                "line": 1,
                "column": 40
              }
            },
            "content": "echo"
          }
        ],
        "params": [
          {
            "type": "VariableReference",
            "nodeId": "19ea8f22-f4c5-43a7-b189-bd58356bb84a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "variable",
            "isVariableReference": true,
            "identifier": "text"
          }
        ],
        "command": [
          {
            "type": "Text",
            "nodeId": "4c99c2cf-61bf-420a-9914-72ce568cd436",
            "location": {
              "start": {
                "offset": 26,
                "line": 1,
                "column": 27
              },
              "end": {
                "offset": 32,
                "line": 1,
                "column": 33
              }
            },
            "content": "echo \""
          },
          {
            "type": "VariableReference",
            "nodeId": "4350c428-3f21-4aef-9242-b286c9df0b4c",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "isVariableReference": true,
            "identifier": "text"
          },
          {
            "type": "Text",
            "nodeId": "98ae1b19-7466-4b48-aefc-ca9846931f59",
            "location": {
              "start": {
                "offset": 37,
                "line": 1,
                "column": 38
              },
              "end": {
                "offset": 38,
                "line": 1,
                "column": 39
              }
            },
            "content": "\""
          }
        ]
      },
      "raw": {
        "identifier": "echo",
        "params": [
          "text"
        ],
        "command": "echo \"@text\""
      },
      "meta": {
        "hasVariables": true,
        "parameterCount": 1
      }
    },
    {
      "type": "Directive",
      "nodeId": "99264459-6896-4673-83a3-b74d4b8f4732",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 31,
          "line": 1,
          "column": 32
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "reference",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "0ad61048-a492-414e-bc76-78ed79ac000b",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 31,
                "line": 1,
                "column": 32
              }
            },
            "content": "greet"
          }
        ],
        "params": [
          {
            "type": "VariableReference",
            "nodeId": "2312714c-b0b3-41d2-b419-1984542a6b2e",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "variable",
            "isVariableReference": true,
            "identifier": "name"
          }
        ],
        "commandRef": [
          {
            "type": "Text",
            "nodeId": "430f518e-cbe8-4bd6-945b-2858c2ab93a1",
            "location": {
              "start": {
                "offset": 27,
                "line": 1,
                "column": 28
              },
              "end": {
                "offset": 31,
                "line": 1,
                "column": 32
              }
            },
            "content": "echo"
          }
        ],
        "args": []
      },
      "raw": {
        "identifier": "greet",
        "params": [
          "name"
        ],
        "commandRef": "echo",
        "args": []
      },
      "meta": {
        "parameterCount": 1,
        "argumentCount": 0,
        "isCommandRef": true
      }
    },
    {
      "type": "Text",
      "nodeId": "21fdd1f6-c6cf-4497-8687-d4d263824a49",
      "location": {
        "start": {
          "offset": 31,
          "line": 1,
          "column": 32
        },
        "end": {
          "offset": 48,
          "line": 1,
          "column": 49
        }
      },
      "content": "[\"Hello, @name!\"]"
    },
    {
      "type": "Directive",
      "nodeId": "99dff2ec-6fe1-4fb5-8a50-4f90060c89bc",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 20,
          "line": 1,
          "column": 21
        }
      },
      "kind": "run",
      "subtype": "runExec",
      "source": "exec",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "56a9168a-29ac-4389-821f-da24fd5ed22d",
            "location": {
              "start": {
                "offset": 6,
                "line": 1,
                "column": 7
              },
              "end": {
                "offset": 20,
                "line": 1,
                "column": 21
              }
            },
            "content": "greet"
          }
        ],
        "args": [
          {
            "type": "Text",
            "nodeId": "7b6e0769-cc31-41ae-a79b-a2e956e355fd",
            "location": {
              "start": {
                "offset": 12,
                "line": 1,
                "column": 13
              },
              "end": {
                "offset": 19,
                "line": 1,
                "column": 20
              }
            },
            "content": "World"
          }
        ]
      },
      "raw": {
        "identifier": "greet",
        "args": [
          "World"
        ]
      },
      "meta": {
        "argumentCount": 1
      }
    }
  ],
  "metadata": {
    "kind": "exec",
    "subtype": "reference"
  }
}