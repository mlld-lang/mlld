{
  "name": "exec-reference",
  "input": "@exec echo (text) = @run [echo \"@text\"]\n@exec greet (name) = @run @echo[\"Hello, @name!\"]\n@run @greet(\"World\")",
  "expected": "Hello, World!",
  "directives": [
    "@exec echo (text) = @run [echo \"@text\"]",
    "@exec greet (name) = @run @echo[\"Hello, @name!\"]",
    "@run @greet(\"World\")"
  ],
  "ast": [
    {
      "type": "Directive",
      "nodeId": "93efbcab-9978-4f26-8686-2e037e8ddc6b",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 39,
          "line": 1,
          "column": 40
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "ae80d3fb-48d0-4a12-b19d-681313802f8c",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 39,
                "line": 1,
                "column": 40
              }
            },
            "content": "echo"
          }
        ],
        "params": [
          "text"
        ],
        "command": [
          {
            "type": "Text",
            "nodeId": "5682a8f6-5fc0-4b23-b63b-11f211459e17",
            "location": {
              "start": {
                "offset": 26,
                "line": 1,
                "column": 27
              },
              "end": {
                "offset": 32,
                "line": 1,
                "column": 33
              }
            },
            "content": "echo \""
          },
          {
            "type": "VariableReference",
            "nodeId": "84993b61-f80d-49ee-9bff-5cb75e69a288",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "isVariableReference": true,
            "identifier": "text"
          },
          {
            "type": "Text",
            "nodeId": "d7b5a154-7919-422a-afd1-f41f0e815ec8",
            "location": {
              "start": {
                "offset": 37,
                "line": 1,
                "column": 38
              },
              "end": {
                "offset": 38,
                "line": 1,
                "column": 39
              }
            },
            "content": "\""
          }
        ]
      },
      "raw": {
        "identifier": "echo",
        "params": [
          "text"
        ],
        "command": "echo \"@text\""
      },
      "meta": {
        "hasVariables": true,
        "parameterCount": 1
      }
    },
    {
      "type": "Directive",
      "nodeId": "61c91a96-588a-414d-a03c-20168ab81343",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 31,
          "line": 1,
          "column": 32
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "reference",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "b274dcb1-4a60-48c6-9c64-1426945507dd",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 31,
                "line": 1,
                "column": 32
              }
            },
            "content": "greet"
          }
        ],
        "params": [
          "name"
        ],
        "commandRef": [
          {
            "type": "Text",
            "nodeId": "8f829e0d-ff73-4347-83b3-3739ee57afe9",
            "location": {
              "start": {
                "offset": 27,
                "line": 1,
                "column": 28
              },
              "end": {
                "offset": 31,
                "line": 1,
                "column": 32
              }
            },
            "content": "echo"
          }
        ],
        "args": []
      },
      "raw": {
        "identifier": "greet",
        "params": [
          "name"
        ],
        "commandRef": "echo",
        "args": []
      },
      "meta": {
        "parameterCount": 1,
        "argumentCount": 0,
        "isCommandRef": true
      }
    },
    {
      "type": "Text",
      "nodeId": "306a6fb8-af23-4de3-a02f-cd731be04a5e",
      "location": {
        "start": {
          "offset": 31,
          "line": 1,
          "column": 32
        },
        "end": {
          "offset": 48,
          "line": 1,
          "column": 49
        }
      },
      "content": "[\"Hello, @name!\"]"
    },
    {
      "type": "Directive",
      "nodeId": "3e470de5-d539-4f96-9b16-d7797cdebc78",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 20,
          "line": 1,
          "column": 21
        }
      },
      "kind": "run",
      "subtype": "runExec",
      "source": "exec",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "97163447-2a33-430d-b7e4-0ed634ebc47c",
            "location": {
              "start": {
                "offset": 6,
                "line": 1,
                "column": 7
              },
              "end": {
                "offset": 20,
                "line": 1,
                "column": 21
              }
            },
            "content": "greet"
          }
        ],
        "args": [
          {
            "type": "Text",
            "nodeId": "a2883c7c-510f-4e15-a8c8-e232448b0ddf",
            "location": {
              "start": {
                "offset": 12,
                "line": 1,
                "column": 13
              },
              "end": {
                "offset": 19,
                "line": 1,
                "column": 20
              }
            },
            "content": "World"
          }
        ]
      },
      "raw": {
        "identifier": "greet",
        "args": [
          "World"
        ]
      },
      "meta": {
        "argumentCount": 1
      }
    }
  ],
  "metadata": {
    "kind": "exec",
    "subtype": "reference"
  }
}