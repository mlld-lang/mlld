{
  "name": "data-grammar-fixes",
  "description": "Test fixture for data/grammar-fixes",
  "category": "data",
  "subcategory": "grammar-fixes",
  "input": "@text messageTemplate(user, action) = @add [[{{user}} {{action}} successfully!]]\n@exec getVersion = @run [echo \"v1.2.3\"]\n\n@data testAllFixes = {\n  message: @add @messageTemplate(\"Alice\", \"logged in\"),\n  version: @run @getVersion,\n  nullable: null,\n  complex: {\n    greeting: @add @messageTemplate(\"Bob\", \"signed up\"),\n    build: @run @getVersion,\n    empty: null,\n    flag: true\n  }\n}",
  "expected": "",
  "ast": [
    {
      "type": "Directive",
      "nodeId": "c2add9fe-4206-4eb7-8642-fe4af11a261f",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 80,
          "line": 1,
          "column": 81
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "47e98935-bb78-4627-bbfe-0ef5b0102e69",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "messageTemplate"
          }
        ],
        "params": [
          "user",
          "action"
        ],
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "e106937b-f236-4c15-b7b3-7d2fe424418c",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "user"
          },
          {
            "type": "Text",
            "nodeId": "4eb8a34a-e2f7-40f3-b51f-db85e55a76c2",
            "location": {
              "start": {
                "offset": 53,
                "line": 1,
                "column": 54
              },
              "end": {
                "offset": 54,
                "line": 1,
                "column": 55
              }
            },
            "content": " "
          },
          {
            "type": "VariableReference",
            "nodeId": "bfcce3a6-9b6a-465e-97a6-74f05c4f3845",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "action"
          },
          {
            "type": "Text",
            "nodeId": "038750cb-4dc3-41ff-8bdd-e0a75a860d1d",
            "location": {
              "start": {
                "offset": 64,
                "line": 1,
                "column": 65
              },
              "end": {
                "offset": 78,
                "line": 1,
                "column": 79
              }
            },
            "content": " successfully!"
          }
        ]
      },
      "raw": {
        "identifier": "messageTemplate",
        "params": [
          "user",
          "action"
        ],
        "content": "{{user}} {{action}} successfully!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Newline",
      "nodeId": "4bc75e32-b7ab-4bc3-bc0f-6192e4574591",
      "location": {
        "start": {
          "offset": 80,
          "line": 1,
          "column": 81
        },
        "end": {
          "offset": 81,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "39bb0abe-8c36-44fa-be64-74ff3fa52db6",
      "location": {
        "start": {
          "offset": 81,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 120,
          "line": 2,
          "column": 40
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "700995e3-9c0f-4453-a936-5eb65dd1db0c",
            "location": {
              "start": {
                "offset": 81,
                "line": 2,
                "column": 1
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 40
              }
            },
            "content": "getVersion"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "47c1379f-5f19-471e-93c4-06514be90ffe",
            "location": {
              "start": {
                "offset": 106,
                "line": 2,
                "column": 26
              },
              "end": {
                "offset": 119,
                "line": 2,
                "column": 39
              }
            },
            "content": "echo \"v1.2.3\""
          }
        ],
        "commandBases": [
          {
            "nodeId": "c37bf049-b6a4-40ef-8eee-e00212c2772e",
            "location": {
              "start": {
                "offset": 105,
                "line": 2,
                "column": 25
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 40
              }
            },
            "command": "echo"
          }
        ]
      },
      "raw": {
        "identifier": "getVersion",
        "params": [],
        "command": "echo \"v1.2.3\"",
        "commandBases": [
          "echo"
        ]
      },
      "meta": {
        "hasVariables": false,
        "commandCount": 1,
        "hasScriptRunner": false,
        "parameterCount": 0
      }
    },
    {
      "type": "Text",
      "nodeId": "a9c3009b-1b3b-4a25-b1f2-28c592240b96",
      "location": {
        "start": {
          "offset": 120,
          "line": 2,
          "column": 40
        },
        "end": {
          "offset": 122,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "f03f986f-4b6a-433c-99e5-4b28011efa0c",
      "location": {
        "start": {
          "offset": 122,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 384,
          "line": 14,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "9ab20464-af34-42ff-b62e-736fed310517",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "testAllFixes"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "message": {
              "type": "Directive",
              "nodeId": "3635ecf0-974f-4285-b3e2-1f2e1edbff95",
              "location": {
                "start": {
                  "offset": 156,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 199,
                  "line": 5,
                  "column": 55
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "6bb380c1-0c9f-4112-ba50-7de154ff091e",
                    "location": {
                      "start": {
                        "offset": 161,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 199,
                        "line": 5,
                        "column": 55
                      }
                    },
                    "content": "messageTemplate"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  },
                  {
                    "type": "string",
                    "value": "logged in"
                  }
                ]
              },
              "raw": {
                "templateName": "messageTemplate",
                "arguments": [
                  "\"Alice\"",
                  "\"logged in\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "version": {
              "type": "Directive",
              "nodeId": "07ad142a-6f1a-48d2-9421-3576dc91223a",
              "location": {
                "start": {
                  "offset": 212,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 228,
                  "line": 6,
                  "column": 28
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "5243f434-74c8-4c9b-a1b7-1be8c7919252",
                    "location": {
                      "start": {
                        "offset": 218,
                        "line": 6,
                        "column": 18
                      },
                      "end": {
                        "offset": 228,
                        "line": 6,
                        "column": 28
                      }
                    },
                    "content": "getVersion"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getVersion",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "nullable": {
              "type": "Null",
              "nodeId": "e7034380-4c2e-40c5-b034-8e90d85b22a4",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "value": null
            },
            "complex": {
              "type": "object",
              "properties": {
                "greeting": {
                  "type": "Directive",
                  "nodeId": "330b24c8-a0b8-4042-8702-5e91e9165b36",
                  "location": {
                    "start": {
                      "offset": 275,
                      "line": 9,
                      "column": 15
                    },
                    "end": {
                      "offset": 316,
                      "line": 9,
                      "column": 56
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "05d80872-9c8d-45ad-a959-4e4a5140d379",
                        "location": {
                          "start": {
                            "offset": 280,
                            "line": 9,
                            "column": 20
                          },
                          "end": {
                            "offset": 316,
                            "line": 9,
                            "column": 56
                          }
                        },
                        "content": "messageTemplate"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Bob"
                      },
                      {
                        "type": "string",
                        "value": "signed up"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "messageTemplate",
                    "arguments": [
                      "\"Bob\"",
                      "\"signed up\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                },
                "build": {
                  "type": "Directive",
                  "nodeId": "80976486-0049-4561-b387-433c90b6c9ed",
                  "location": {
                    "start": {
                      "offset": 329,
                      "line": 10,
                      "column": 12
                    },
                    "end": {
                      "offset": 345,
                      "line": 10,
                      "column": 28
                    }
                  },
                  "kind": "run",
                  "subtype": "runExec",
                  "source": "exec",
                  "values": {
                    "identifier": [
                      {
                        "type": "Text",
                        "nodeId": "db93429b-0e6a-40f2-94a5-cc723c1e3c72",
                        "location": {
                          "start": {
                            "offset": 335,
                            "line": 10,
                            "column": 18
                          },
                          "end": {
                            "offset": 345,
                            "line": 10,
                            "column": 28
                          }
                        },
                        "content": "getVersion"
                      }
                    ],
                    "args": []
                  },
                  "raw": {
                    "identifier": "getVersion",
                    "args": []
                  },
                  "meta": {
                    "argumentCount": 0,
                    "isDataValue": true
                  }
                },
                "empty": {
                  "type": "Null",
                  "nodeId": "6b52aab2-4a7a-497d-9287-adb0f8276efa",
                  "location": {
                    "start": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    },
                    "end": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    }
                  },
                  "value": null
                },
                "flag": true
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "testAllFixes",
        "value": "{\n  \"message\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"3635ecf0-974f-4285-b3e2-1f2e1edbff95\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 156,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 199,\n        \"line\": 5,\n        \"column\": 55\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"6bb380c1-0c9f-4112-ba50-7de154ff091e\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 161,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 199,\n              \"line\": 5,\n              \"column\": 55\n            }\n          },\n          \"content\": \"messageTemplate\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"logged in\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"messageTemplate\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\",\n        \"\\\"logged in\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"version\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"07ad142a-6f1a-48d2-9421-3576dc91223a\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 212,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 228,\n        \"line\": 6,\n        \"column\": 28\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"5243f434-74c8-4c9b-a1b7-1be8c7919252\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 218,\n              \"line\": 6,\n              \"column\": 18\n            },\n            \"end\": {\n              \"offset\": 228,\n              \"line\": 6,\n              \"column\": 28\n            }\n          },\n          \"content\": \"getVersion\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getVersion\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"nullable\": {\n    \"type\": \"Null\",\n    \"nodeId\": \"e7034380-4c2e-40c5-b034-8e90d85b22a4\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"value\": null\n  },\n  \"complex\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"greeting\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"330b24c8-a0b8-4042-8702-5e91e9165b36\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 275,\n            \"line\": 9,\n            \"column\": 15\n          },\n          \"end\": {\n            \"offset\": 316,\n            \"line\": 9,\n            \"column\": 56\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"05d80872-9c8d-45ad-a959-4e4a5140d379\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 280,\n                  \"line\": 9,\n                  \"column\": 20\n                },\n                \"end\": {\n                  \"offset\": 316,\n                  \"line\": 9,\n                  \"column\": 56\n                }\n              },\n              \"content\": \"messageTemplate\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Bob\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"signed up\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"messageTemplate\",\n          \"arguments\": [\n            \"\\\"Bob\\\"\",\n            \"\\\"signed up\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      },\n      \"build\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"80976486-0049-4561-b387-433c90b6c9ed\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 329,\n            \"line\": 10,\n            \"column\": 12\n          },\n          \"end\": {\n            \"offset\": 345,\n            \"line\": 10,\n            \"column\": 28\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runExec\",\n        \"source\": \"exec\",\n        \"values\": {\n          \"identifier\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"db93429b-0e6a-40f2-94a5-cc723c1e3c72\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 335,\n                  \"line\": 10,\n                  \"column\": 18\n                },\n                \"end\": {\n                  \"offset\": 345,\n                  \"line\": 10,\n                  \"column\": 28\n                }\n              },\n              \"content\": \"getVersion\"\n            }\n          ],\n          \"args\": []\n        },\n        \"raw\": {\n          \"identifier\": \"getVersion\",\n          \"args\": []\n        },\n        \"meta\": {\n          \"argumentCount\": 0,\n          \"isDataValue\": true\n        }\n      },\n      \"empty\": {\n        \"type\": \"Null\",\n        \"nodeId\": \"6b52aab2-4a7a-497d-9287-adb0f8276efa\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          },\n          \"end\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          }\n        },\n        \"value\": null\n      },\n      \"flag\": true\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 4
        }
      }
    }
  ]
}