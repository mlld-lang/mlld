{
  "name": "data-nested-directives",
  "description": "Test fixture for valid/data-nested-directives",
  "category": "valid",
  "subcategory": "data-nested-directives",
  "input": "@data config = {\n  server: {\n    host: \"localhost\",\n    port: 8080,\n    version: @run [echo \"v1.2.3\"],\n    env: {\n      status: @run [echo \"ready\"],\n      mode: @run [echo \"production\"]\n    }\n  },\n  debug: true\n}\n@add [[Server running on {{config.server.host}}:{{config.server.port}}]]",
  "expected": "Server running on localhost:8080",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "4be6c7c0-b02a-4b6f-be28-cee150712f2f",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 212,
          "line": 12,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "2d16bd7b-a9a2-45a5-bba3-9274655f6dc3",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "config"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "server": {
              "type": "object",
              "properties": {
                "host": [
                  {
                    "type": "Text",
                    "nodeId": "07b155d3-9b27-4a77-a47a-380de00dae47",
                    "location": {
                      "start": {
                        "offset": 39,
                        "line": 3,
                        "column": 11
                      },
                      "end": {
                        "offset": 50,
                        "line": 3,
                        "column": 22
                      }
                    },
                    "content": "localhost"
                  }
                ],
                "port": 8080,
                "version": {
                  "type": "Directive",
                  "nodeId": "adf83483-b53a-49c3-89d0-2b6acc92ba6a",
                  "location": {
                    "start": {
                      "offset": 81,
                      "line": 5,
                      "column": 14
                    },
                    "end": {
                      "offset": 101,
                      "line": 5,
                      "column": 34
                    }
                  },
                  "kind": "run",
                  "subtype": "runCommand",
                  "source": null,
                  "values": {
                    "command": [
                      {
                        "type": "Text",
                        "nodeId": "cf1e6a68-5a9a-412c-9e60-51c305a8621c",
                        "location": {
                          "start": {
                            "offset": 87,
                            "line": 5,
                            "column": 20
                          },
                          "end": {
                            "offset": 100,
                            "line": 5,
                            "column": 33
                          }
                        },
                        "content": "echo \"v1.2.3\""
                      }
                    ],
                    "commandBases": [
                      {
                        "nodeId": "ef623413-fa10-4a77-b60c-d4a44d97991e",
                        "location": {
                          "start": {
                            "offset": 86,
                            "line": 5,
                            "column": 19
                          },
                          "end": {
                            "offset": 101,
                            "line": 5,
                            "column": 34
                          }
                        },
                        "command": "echo"
                      }
                    ]
                  },
                  "raw": {
                    "command": "echo \"v1.2.3\"",
                    "commandBases": [
                      "echo"
                    ]
                  },
                  "meta": {
                    "hasVariables": false,
                    "commandCount": 1,
                    "hasScriptRunner": false,
                    "isDataValue": true,
                    "isMultiLine": false
                  }
                },
                "env": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "Directive",
                      "nodeId": "c8bbad2f-120f-4890-9771-fa20c8c53e95",
                      "location": {
                        "start": {
                          "offset": 128,
                          "line": 7,
                          "column": 15
                        },
                        "end": {
                          "offset": 147,
                          "line": 7,
                          "column": 34
                        }
                      },
                      "kind": "run",
                      "subtype": "runCommand",
                      "source": null,
                      "values": {
                        "command": [
                          {
                            "type": "Text",
                            "nodeId": "b685db6c-ca94-4a25-b63a-98d8370ca4c5",
                            "location": {
                              "start": {
                                "offset": 134,
                                "line": 7,
                                "column": 21
                              },
                              "end": {
                                "offset": 146,
                                "line": 7,
                                "column": 33
                              }
                            },
                            "content": "echo \"ready\""
                          }
                        ],
                        "commandBases": [
                          {
                            "nodeId": "9dd4d1d6-ac87-4fa5-b813-6b98fa74b3dd",
                            "location": {
                              "start": {
                                "offset": 133,
                                "line": 7,
                                "column": 20
                              },
                              "end": {
                                "offset": 147,
                                "line": 7,
                                "column": 34
                              }
                            },
                            "command": "echo"
                          }
                        ]
                      },
                      "raw": {
                        "command": "echo \"ready\"",
                        "commandBases": [
                          "echo"
                        ]
                      },
                      "meta": {
                        "hasVariables": false,
                        "commandCount": 1,
                        "hasScriptRunner": false,
                        "isDataValue": true,
                        "isMultiLine": false
                      }
                    },
                    "mode": {
                      "type": "Directive",
                      "nodeId": "e23e35a7-393e-4f00-9130-0b04de5ba4a8",
                      "location": {
                        "start": {
                          "offset": 161,
                          "line": 8,
                          "column": 13
                        },
                        "end": {
                          "offset": 185,
                          "line": 8,
                          "column": 37
                        }
                      },
                      "kind": "run",
                      "subtype": "runCommand",
                      "source": null,
                      "values": {
                        "command": [
                          {
                            "type": "Text",
                            "nodeId": "0f9b1328-097d-484d-b3b7-02b81602469b",
                            "location": {
                              "start": {
                                "offset": 167,
                                "line": 8,
                                "column": 19
                              },
                              "end": {
                                "offset": 184,
                                "line": 8,
                                "column": 36
                              }
                            },
                            "content": "echo \"production\""
                          }
                        ],
                        "commandBases": [
                          {
                            "nodeId": "1fb79680-04b1-408a-9117-c4bb8d6ac4d2",
                            "location": {
                              "start": {
                                "offset": 166,
                                "line": 8,
                                "column": 18
                              },
                              "end": {
                                "offset": 185,
                                "line": 8,
                                "column": 37
                              }
                            },
                            "command": "echo"
                          }
                        ]
                      },
                      "raw": {
                        "command": "echo \"production\"",
                        "commandBases": [
                          "echo"
                        ]
                      },
                      "meta": {
                        "hasVariables": false,
                        "commandCount": 1,
                        "hasScriptRunner": false,
                        "isDataValue": true,
                        "isMultiLine": false
                      }
                    }
                  }
                }
              }
            },
            "debug": true
          }
        }
      },
      "raw": {
        "identifier": "config",
        "value": "{\n  \"server\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"host\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"07b155d3-9b27-4a77-a47a-380de00dae47\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 39,\n              \"line\": 3,\n              \"column\": 11\n            },\n            \"end\": {\n              \"offset\": 50,\n              \"line\": 3,\n              \"column\": 22\n            }\n          },\n          \"content\": \"localhost\"\n        }\n      ],\n      \"port\": 8080,\n      \"version\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"adf83483-b53a-49c3-89d0-2b6acc92ba6a\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 81,\n            \"line\": 5,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 101,\n            \"line\": 5,\n            \"column\": 34\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runCommand\",\n        \"source\": null,\n        \"values\": {\n          \"command\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"cf1e6a68-5a9a-412c-9e60-51c305a8621c\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 87,\n                  \"line\": 5,\n                  \"column\": 20\n                },\n                \"end\": {\n                  \"offset\": 100,\n                  \"line\": 5,\n                  \"column\": 33\n                }\n              },\n              \"content\": \"echo \\\"v1.2.3\\\"\"\n            }\n          ],\n          \"commandBases\": [\n            {\n              \"nodeId\": \"ef623413-fa10-4a77-b60c-d4a44d97991e\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 86,\n                  \"line\": 5,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 101,\n                  \"line\": 5,\n                  \"column\": 34\n                }\n              },\n              \"command\": \"echo\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"command\": \"echo \\\"v1.2.3\\\"\",\n          \"commandBases\": [\n            \"echo\"\n          ]\n        },\n        \"meta\": {\n          \"hasVariables\": false,\n          \"commandCount\": 1,\n          \"hasScriptRunner\": false,\n          \"isDataValue\": true,\n          \"isMultiLine\": false\n        }\n      },\n      \"env\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"status\": {\n            \"type\": \"Directive\",\n            \"nodeId\": \"c8bbad2f-120f-4890-9771-fa20c8c53e95\",\n            \"location\": {\n              \"start\": {\n                \"offset\": 128,\n                \"line\": 7,\n                \"column\": 15\n              },\n              \"end\": {\n                \"offset\": 147,\n                \"line\": 7,\n                \"column\": 34\n              }\n            },\n            \"kind\": \"run\",\n            \"subtype\": \"runCommand\",\n            \"source\": null,\n            \"values\": {\n              \"command\": [\n                {\n                  \"type\": \"Text\",\n                  \"nodeId\": \"b685db6c-ca94-4a25-b63a-98d8370ca4c5\",\n                  \"location\": {\n                    \"start\": {\n                      \"offset\": 134,\n                      \"line\": 7,\n                      \"column\": 21\n                    },\n                    \"end\": {\n                      \"offset\": 146,\n                      \"line\": 7,\n                      \"column\": 33\n                    }\n                  },\n                  \"content\": \"echo \\\"ready\\\"\"\n                }\n              ],\n              \"commandBases\": [\n                {\n                  \"nodeId\": \"9dd4d1d6-ac87-4fa5-b813-6b98fa74b3dd\",\n                  \"location\": {\n                    \"start\": {\n                      \"offset\": 133,\n                      \"line\": 7,\n                      \"column\": 20\n                    },\n                    \"end\": {\n                      \"offset\": 147,\n                      \"line\": 7,\n                      \"column\": 34\n                    }\n                  },\n                  \"command\": \"echo\"\n                }\n              ]\n            },\n            \"raw\": {\n              \"command\": \"echo \\\"ready\\\"\",\n              \"commandBases\": [\n                \"echo\"\n              ]\n            },\n            \"meta\": {\n              \"hasVariables\": false,\n              \"commandCount\": 1,\n              \"hasScriptRunner\": false,\n              \"isDataValue\": true,\n              \"isMultiLine\": false\n            }\n          },\n          \"mode\": {\n            \"type\": \"Directive\",\n            \"nodeId\": \"e23e35a7-393e-4f00-9130-0b04de5ba4a8\",\n            \"location\": {\n              \"start\": {\n                \"offset\": 161,\n                \"line\": 8,\n                \"column\": 13\n              },\n              \"end\": {\n                \"offset\": 185,\n                \"line\": 8,\n                \"column\": 37\n              }\n            },\n            \"kind\": \"run\",\n            \"subtype\": \"runCommand\",\n            \"source\": null,\n            \"values\": {\n              \"command\": [\n                {\n                  \"type\": \"Text\",\n                  \"nodeId\": \"0f9b1328-097d-484d-b3b7-02b81602469b\",\n                  \"location\": {\n                    \"start\": {\n                      \"offset\": 167,\n                      \"line\": 8,\n                      \"column\": 19\n                    },\n                    \"end\": {\n                      \"offset\": 184,\n                      \"line\": 8,\n                      \"column\": 36\n                    }\n                  },\n                  \"content\": \"echo \\\"production\\\"\"\n                }\n              ],\n              \"commandBases\": [\n                {\n                  \"nodeId\": \"1fb79680-04b1-408a-9117-c4bb8d6ac4d2\",\n                  \"location\": {\n                    \"start\": {\n                      \"offset\": 166,\n                      \"line\": 8,\n                      \"column\": 18\n                    },\n                    \"end\": {\n                      \"offset\": 185,\n                      \"line\": 8,\n                      \"column\": 37\n                    }\n                  },\n                  \"command\": \"echo\"\n                }\n              ]\n            },\n            \"raw\": {\n              \"command\": \"echo \\\"production\\\"\",\n              \"commandBases\": [\n                \"echo\"\n              ]\n            },\n            \"meta\": {\n              \"hasVariables\": false,\n              \"commandCount\": 1,\n              \"hasScriptRunner\": false,\n              \"isDataValue\": true,\n              \"isMultiLine\": false\n            }\n          }\n        }\n      }\n    }\n  },\n  \"debug\": true\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 2
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "1961b019-7100-44f2-aaa7-7a64125673ca",
      "location": {
        "start": {
          "offset": 212,
          "line": 12,
          "column": 2
        },
        "end": {
          "offset": 213,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "b0c1ec89-f899-4edf-b92b-42721763b674",
      "location": {
        "start": {
          "offset": 213,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 285,
          "line": 13,
          "column": 73
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "Text",
            "nodeId": "cae9e648-d5c0-4331-bb6a-7e466d519bb3",
            "location": {
              "start": {
                "offset": 220,
                "line": 13,
                "column": 8
              },
              "end": {
                "offset": 238,
                "line": 13,
                "column": 26
              }
            },
            "content": "Server running on "
          },
          {
            "type": "VariableReference",
            "nodeId": "f54ce7f1-fb56-4c80-a0e5-4da0f9d54edb",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "config",
            "fields": [
              {
                "type": "field",
                "name": "server"
              },
              {
                "type": "field",
                "name": "host"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "a06bd3f1-1c88-4d23-b72d-0173eb811537",
            "location": {
              "start": {
                "offset": 260,
                "line": 13,
                "column": 48
              },
              "end": {
                "offset": 261,
                "line": 13,
                "column": 49
              }
            },
            "content": ":"
          },
          {
            "type": "VariableReference",
            "nodeId": "fa0832fc-ed78-46d2-bf0d-9c853c1ebee7",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "config",
            "fields": [
              {
                "type": "field",
                "name": "server"
              },
              {
                "type": "field",
                "name": "port"
              }
            ]
          }
        ]
      },
      "raw": {
        "content": "Server running on {{config}}:{{config}}"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ],
  "parseError": null
}