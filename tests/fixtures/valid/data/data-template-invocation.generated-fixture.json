{
  "name": "data-template-invocation",
  "description": "Test fixture for valid/data-template-invocation",
  "category": "valid",
  "subcategory": "data-template-invocation",
  "input": "@text greeting(name) = @add [[Hello, {{name}}!]]\n@text farewell(name, time) = @add [[Goodbye {{name}}, see you {{time}}!]]\n\n@data messages = {\n  welcome: @add @greeting(\"Alice\"),\n  goodbye: @add @farewell(\"Bob\", \"tomorrow\"),\n  nested: {\n    morning: @add @greeting(\"Charlie\"),\n    evening: @add @farewell(\"David\", \"next week\")\n  }\n}\n\n@add [[{{messages.welcome}}\n{{messages.goodbye}}\n{{messages.nested.morning}}\n{{messages.nested.evening}}]]",
  "expected": "Hello, Alice!\nGoodbye Bob, see you tomorrow!\nHello, Charlie!\nGoodbye David, see you next week!",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "e3945870-5a31-448e-bb6b-f69591ba1c5d",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 48,
          "line": 1,
          "column": 49
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "889be07f-d92e-480c-b477-e0fb8f00e7de",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "greeting"
          }
        ],
        "params": [
          "name"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "fdf67cc4-fe55-4214-b8b3-d9adf7cfb6e9",
            "location": {
              "start": {
                "offset": 30,
                "line": 1,
                "column": 31
              },
              "end": {
                "offset": 37,
                "line": 1,
                "column": 38
              }
            },
            "content": "Hello, "
          },
          {
            "type": "VariableReference",
            "nodeId": "876a3b09-bf99-461c-ac37-8de47c3c5ce6",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "f8f0d141-8653-4fd6-8683-e87f18a45671",
            "location": {
              "start": {
                "offset": 45,
                "line": 1,
                "column": 46
              },
              "end": {
                "offset": 46,
                "line": 1,
                "column": 47
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "greeting",
        "params": [
          "name"
        ],
        "content": "Hello, {{name}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 1
      }
    },
    {
      "type": "Newline",
      "nodeId": "ec951abd-db8c-449a-beb5-6e299d6c8f2f",
      "location": {
        "start": {
          "offset": 48,
          "line": 1,
          "column": 49
        },
        "end": {
          "offset": 49,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "33155a30-40fb-4145-8393-db8af3fc048d",
      "location": {
        "start": {
          "offset": 49,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 122,
          "line": 2,
          "column": 74
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "28151f5c-9dce-4c9a-ae0b-c9466973c5e2",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "farewell"
          }
        ],
        "params": [
          "name",
          "time"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "153476e0-3090-46a5-a171-c6bddcf8eb53",
            "location": {
              "start": {
                "offset": 85,
                "line": 2,
                "column": 37
              },
              "end": {
                "offset": 93,
                "line": 2,
                "column": 45
              }
            },
            "content": "Goodbye "
          },
          {
            "type": "VariableReference",
            "nodeId": "7d8448c1-572b-41a8-88fc-1d602385ae35",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "48151b65-8acd-4b45-a29c-b421859c5c43",
            "location": {
              "start": {
                "offset": 101,
                "line": 2,
                "column": 53
              },
              "end": {
                "offset": 111,
                "line": 2,
                "column": 63
              }
            },
            "content": ", see you "
          },
          {
            "type": "VariableReference",
            "nodeId": "ef0cd79d-183c-40c3-826a-bde7ecf4c83c",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "time"
          },
          {
            "type": "Text",
            "nodeId": "6ff891fc-a3b5-43ce-b904-46552b33e37b",
            "location": {
              "start": {
                "offset": 119,
                "line": 2,
                "column": 71
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 72
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "farewell",
        "params": [
          "name",
          "time"
        ],
        "content": "Goodbye {{name}}, see you {{time}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Text",
      "nodeId": "0864f27f-842d-4160-9ee0-2f116cd36fa0",
      "location": {
        "start": {
          "offset": 122,
          "line": 2,
          "column": 74
        },
        "end": {
          "offset": 124,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "f3f143c0-6015-4fa9-9436-fb98b13dabb3",
      "location": {
        "start": {
          "offset": 124,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 332,
          "line": 11,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "ec6e9fff-f3de-4262-be97-06ca264d7fdc",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "messages"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "welcome": {
              "type": "Directive",
              "nodeId": "b37d02f4-8dc8-4c37-880a-17bdf1c4d9e3",
              "location": {
                "start": {
                  "offset": 154,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 177,
                  "line": 5,
                  "column": 35
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "ca2fab44-abc0-4d35-8872-c8164f7785cd",
                    "location": {
                      "start": {
                        "offset": 159,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 177,
                        "line": 5,
                        "column": 35
                      }
                    },
                    "content": "greeting"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  }
                ]
              },
              "raw": {
                "templateName": "greeting",
                "arguments": [
                  "\"Alice\""
                ]
              },
              "meta": {
                "argumentCount": 1,
                "isDataValue": true
              }
            },
            "goodbye": {
              "type": "Directive",
              "nodeId": "ab79b17a-d190-4ec9-b82e-5b2294af2ebf",
              "location": {
                "start": {
                  "offset": 190,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 223,
                  "line": 6,
                  "column": 45
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "437a793e-2d96-45ad-b290-9c1328451beb",
                    "location": {
                      "start": {
                        "offset": 195,
                        "line": 6,
                        "column": 17
                      },
                      "end": {
                        "offset": 223,
                        "line": 6,
                        "column": 45
                      }
                    },
                    "content": "farewell"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Bob"
                  },
                  {
                    "type": "string",
                    "value": "tomorrow"
                  }
                ]
              },
              "raw": {
                "templateName": "farewell",
                "arguments": [
                  "\"Bob\"",
                  "\"tomorrow\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "nested": {
              "type": "object",
              "properties": {
                "morning": {
                  "type": "Directive",
                  "nodeId": "052f23ed-c5ee-4f5c-ab17-23a49b0578c3",
                  "location": {
                    "start": {
                      "offset": 250,
                      "line": 8,
                      "column": 14
                    },
                    "end": {
                      "offset": 275,
                      "line": 8,
                      "column": 39
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "cc8cf71a-7717-47b2-8981-013613d5400c",
                        "location": {
                          "start": {
                            "offset": 255,
                            "line": 8,
                            "column": 19
                          },
                          "end": {
                            "offset": 275,
                            "line": 8,
                            "column": 39
                          }
                        },
                        "content": "greeting"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Charlie"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "greeting",
                    "arguments": [
                      "\"Charlie\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 1,
                    "isDataValue": true
                  }
                },
                "evening": {
                  "type": "Directive",
                  "nodeId": "d3c6b6c6-84ec-4765-9652-c785cb5b6fbf",
                  "location": {
                    "start": {
                      "offset": 290,
                      "line": 9,
                      "column": 14
                    },
                    "end": {
                      "offset": 326,
                      "line": 9,
                      "column": 50
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "cce41861-0371-4c01-bf8f-a3f0336546c7",
                        "location": {
                          "start": {
                            "offset": 295,
                            "line": 9,
                            "column": 19
                          },
                          "end": {
                            "offset": 326,
                            "line": 9,
                            "column": 50
                          }
                        },
                        "content": "farewell"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "David"
                      },
                      {
                        "type": "string",
                        "value": "next week"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "farewell",
                    "arguments": [
                      "\"David\"",
                      "\"next week\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                }
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "messages",
        "value": "{\n  \"welcome\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"b37d02f4-8dc8-4c37-880a-17bdf1c4d9e3\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 154,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 177,\n        \"line\": 5,\n        \"column\": 35\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"ca2fab44-abc0-4d35-8872-c8164f7785cd\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 159,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 177,\n              \"line\": 5,\n              \"column\": 35\n            }\n          },\n          \"content\": \"greeting\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"greeting\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 1,\n      \"isDataValue\": true\n    }\n  },\n  \"goodbye\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"ab79b17a-d190-4ec9-b82e-5b2294af2ebf\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 190,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 223,\n        \"line\": 6,\n        \"column\": 45\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"437a793e-2d96-45ad-b290-9c1328451beb\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 195,\n              \"line\": 6,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 223,\n              \"line\": 6,\n              \"column\": 45\n            }\n          },\n          \"content\": \"farewell\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Bob\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"tomorrow\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"farewell\",\n      \"arguments\": [\n        \"\\\"Bob\\\"\",\n        \"\\\"tomorrow\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"nested\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"morning\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"052f23ed-c5ee-4f5c-ab17-23a49b0578c3\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 250,\n            \"line\": 8,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 275,\n            \"line\": 8,\n            \"column\": 39\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"cc8cf71a-7717-47b2-8981-013613d5400c\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 255,\n                  \"line\": 8,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 275,\n                  \"line\": 8,\n                  \"column\": 39\n                }\n              },\n              \"content\": \"greeting\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Charlie\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"greeting\",\n          \"arguments\": [\n            \"\\\"Charlie\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 1,\n          \"isDataValue\": true\n        }\n      },\n      \"evening\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"d3c6b6c6-84ec-4765-9652-c785cb5b6fbf\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 290,\n            \"line\": 9,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 326,\n            \"line\": 9,\n            \"column\": 50\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"cce41861-0371-4c01-bf8f-a3f0336546c7\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 295,\n                  \"line\": 9,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 326,\n                  \"line\": 9,\n                  \"column\": 50\n                }\n              },\n              \"content\": \"farewell\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"David\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"next week\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"farewell\",\n          \"arguments\": [\n            \"\\\"David\\\"\",\n            \"\\\"next week\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      }\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 3
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "3b3ad8da-d421-4cef-953b-8fe9502cdae3",
      "location": {
        "start": {
          "offset": 332,
          "line": 11,
          "column": 2
        },
        "end": {
          "offset": 334,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "136dcc8d-d977-46ea-acb9-b1ad57aaeced",
      "location": {
        "start": {
          "offset": 334,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 440,
          "line": 16,
          "column": 30
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "2945c9ce-934a-4761-8df4-0dfbfc794a28",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "welcome"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "986d1f05-9e43-45e4-98be-1745d764545d",
            "location": {
              "start": {
                "offset": 361,
                "line": 13,
                "column": 28
              },
              "end": {
                "offset": 362,
                "line": 14,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "24be9b75-9817-40b1-8941-4eaeed290b4e",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "goodbye"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "cd4f431b-f556-4c35-bd6f-6b5ebb7caa73",
            "location": {
              "start": {
                "offset": 382,
                "line": 14,
                "column": 21
              },
              "end": {
                "offset": 383,
                "line": 15,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "a30d047c-cd3c-4218-af62-3df2b9b53229",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "morning"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "9ccfb3ca-775c-4203-9a6d-7e2d940a4db2",
            "location": {
              "start": {
                "offset": 410,
                "line": 15,
                "column": 28
              },
              "end": {
                "offset": 411,
                "line": 16,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "2cb59975-e964-497d-a6ba-29e9d38661b6",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "evening"
              }
            ]
          }
        ]
      },
      "raw": {
        "content": "{{messages}}\n{{messages}}\n{{messages}}\n{{messages}}"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ],
  "parseError": null
}