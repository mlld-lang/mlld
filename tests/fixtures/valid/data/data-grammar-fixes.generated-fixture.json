{
  "name": "data-grammar-fixes",
  "description": "Test fixture for valid/data-grammar-fixes",
  "category": "valid",
  "subcategory": "data-grammar-fixes",
  "input": "@text messageTemplate(user, action) = @add [[{{user}} {{action}} successfully!]]\n@exec getVersion = @run [echo \"v1.2.3\"]\n\n@data testAllFixes = {\n  message: @add @messageTemplate(\"Alice\", \"logged in\"),\n  version: @run @getVersion,\n  nullable: null,\n  complex: {\n    greeting: @add @messageTemplate(\"Bob\", \"signed up\"),\n    build: @run @getVersion,\n    empty: null,\n    flag: true\n  }\n}",
  "expected": "",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "a8c3e91c-bcea-4228-942f-88ced4af1ba0",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 80,
          "line": 1,
          "column": 81
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "46227950-aa9e-4715-8c80-cb2be884f825",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "messageTemplate"
          }
        ],
        "params": [
          "user",
          "action"
        ],
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "bed751cb-495b-4ba0-b6c7-05ad056f26d4",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "user"
          },
          {
            "type": "Text",
            "nodeId": "8e9de34d-5ebb-4253-af7f-df86849c9695",
            "location": {
              "start": {
                "offset": 53,
                "line": 1,
                "column": 54
              },
              "end": {
                "offset": 54,
                "line": 1,
                "column": 55
              }
            },
            "content": " "
          },
          {
            "type": "VariableReference",
            "nodeId": "65dfe0a5-3d61-4237-a065-572c3192b21b",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "action"
          },
          {
            "type": "Text",
            "nodeId": "26233a96-03af-4bf8-bfb4-c9b1602df6a9",
            "location": {
              "start": {
                "offset": 64,
                "line": 1,
                "column": 65
              },
              "end": {
                "offset": 78,
                "line": 1,
                "column": 79
              }
            },
            "content": " successfully!"
          }
        ]
      },
      "raw": {
        "identifier": "messageTemplate",
        "params": [
          "user",
          "action"
        ],
        "content": "{{user}} {{action}} successfully!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Newline",
      "nodeId": "40e843a0-a1e3-45c7-80d4-9ce4c754d899",
      "location": {
        "start": {
          "offset": 80,
          "line": 1,
          "column": 81
        },
        "end": {
          "offset": 81,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "d2addd47-17ca-4b03-8c71-3e17e775c98c",
      "location": {
        "start": {
          "offset": 81,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 120,
          "line": 2,
          "column": 40
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "19a43ff4-40a9-480b-89d5-78392c39f6e0",
            "location": {
              "start": {
                "offset": 81,
                "line": 2,
                "column": 1
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 40
              }
            },
            "content": "getVersion"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "3ce7bf76-89f0-405f-9223-7f758ca393cc",
            "location": {
              "start": {
                "offset": 106,
                "line": 2,
                "column": 26
              },
              "end": {
                "offset": 119,
                "line": 2,
                "column": 39
              }
            },
            "content": "echo \"v1.2.3\""
          }
        ],
        "commandBases": [
          {
            "nodeId": "8a37443c-8874-41ca-8a95-2f48da2d4177",
            "location": {
              "start": {
                "offset": 105,
                "line": 2,
                "column": 25
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 40
              }
            },
            "command": "echo"
          }
        ]
      },
      "raw": {
        "identifier": "getVersion",
        "params": [],
        "command": "echo \"v1.2.3\"",
        "commandBases": [
          "echo"
        ]
      },
      "meta": {
        "hasVariables": false,
        "commandCount": 1,
        "hasScriptRunner": false,
        "parameterCount": 0
      }
    },
    {
      "type": "Text",
      "nodeId": "ca164e5d-1a4c-491c-9519-66c3cbd616ae",
      "location": {
        "start": {
          "offset": 120,
          "line": 2,
          "column": 40
        },
        "end": {
          "offset": 122,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "9a87735e-0dbe-4311-9c16-aa4078bdc468",
      "location": {
        "start": {
          "offset": 122,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 384,
          "line": 14,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "79a372f0-e229-4b86-95ae-f24df79e9511",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "testAllFixes"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "message": {
              "type": "Directive",
              "nodeId": "5216ab4a-d228-4dc9-aaf6-f05dc174fd92",
              "location": {
                "start": {
                  "offset": 156,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 199,
                  "line": 5,
                  "column": 55
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "ae231db8-ab07-45b9-90b6-aae6f66498d5",
                    "location": {
                      "start": {
                        "offset": 161,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 199,
                        "line": 5,
                        "column": 55
                      }
                    },
                    "content": "messageTemplate"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  },
                  {
                    "type": "string",
                    "value": "logged in"
                  }
                ]
              },
              "raw": {
                "templateName": "messageTemplate",
                "arguments": [
                  "\"Alice\"",
                  "\"logged in\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "version": {
              "type": "Directive",
              "nodeId": "f1805bfd-3658-4594-86a9-86828f03538e",
              "location": {
                "start": {
                  "offset": 212,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 228,
                  "line": 6,
                  "column": 28
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "7384892d-82e6-45fb-bd77-0ac1cbe90cba",
                    "location": {
                      "start": {
                        "offset": 218,
                        "line": 6,
                        "column": 18
                      },
                      "end": {
                        "offset": 228,
                        "line": 6,
                        "column": 28
                      }
                    },
                    "content": "getVersion"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getVersion",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "nullable": {
              "type": "Null",
              "nodeId": "633c0061-e001-44e4-ba9b-5727e1c60875",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "value": null
            },
            "complex": {
              "type": "object",
              "properties": {
                "greeting": {
                  "type": "Directive",
                  "nodeId": "75341119-750f-429e-ac6e-57973c67c477",
                  "location": {
                    "start": {
                      "offset": 275,
                      "line": 9,
                      "column": 15
                    },
                    "end": {
                      "offset": 316,
                      "line": 9,
                      "column": 56
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "e5c08941-0385-4e21-9091-70653d7ba580",
                        "location": {
                          "start": {
                            "offset": 280,
                            "line": 9,
                            "column": 20
                          },
                          "end": {
                            "offset": 316,
                            "line": 9,
                            "column": 56
                          }
                        },
                        "content": "messageTemplate"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Bob"
                      },
                      {
                        "type": "string",
                        "value": "signed up"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "messageTemplate",
                    "arguments": [
                      "\"Bob\"",
                      "\"signed up\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                },
                "build": {
                  "type": "Directive",
                  "nodeId": "9d21b9c8-7a95-4441-916f-b836873ee79b",
                  "location": {
                    "start": {
                      "offset": 329,
                      "line": 10,
                      "column": 12
                    },
                    "end": {
                      "offset": 345,
                      "line": 10,
                      "column": 28
                    }
                  },
                  "kind": "run",
                  "subtype": "runExec",
                  "source": "exec",
                  "values": {
                    "identifier": [
                      {
                        "type": "Text",
                        "nodeId": "3378e934-1bb6-4e81-bf9c-8343a7d9b95c",
                        "location": {
                          "start": {
                            "offset": 335,
                            "line": 10,
                            "column": 18
                          },
                          "end": {
                            "offset": 345,
                            "line": 10,
                            "column": 28
                          }
                        },
                        "content": "getVersion"
                      }
                    ],
                    "args": []
                  },
                  "raw": {
                    "identifier": "getVersion",
                    "args": []
                  },
                  "meta": {
                    "argumentCount": 0,
                    "isDataValue": true
                  }
                },
                "empty": {
                  "type": "Null",
                  "nodeId": "0e2e7199-3d26-4b08-b31b-c82008b63a73",
                  "location": {
                    "start": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    },
                    "end": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    }
                  },
                  "value": null
                },
                "flag": true
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "testAllFixes",
        "value": "{\n  \"message\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"5216ab4a-d228-4dc9-aaf6-f05dc174fd92\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 156,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 199,\n        \"line\": 5,\n        \"column\": 55\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"ae231db8-ab07-45b9-90b6-aae6f66498d5\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 161,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 199,\n              \"line\": 5,\n              \"column\": 55\n            }\n          },\n          \"content\": \"messageTemplate\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"logged in\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"messageTemplate\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\",\n        \"\\\"logged in\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"version\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"f1805bfd-3658-4594-86a9-86828f03538e\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 212,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 228,\n        \"line\": 6,\n        \"column\": 28\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"7384892d-82e6-45fb-bd77-0ac1cbe90cba\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 218,\n              \"line\": 6,\n              \"column\": 18\n            },\n            \"end\": {\n              \"offset\": 228,\n              \"line\": 6,\n              \"column\": 28\n            }\n          },\n          \"content\": \"getVersion\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getVersion\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"nullable\": {\n    \"type\": \"Null\",\n    \"nodeId\": \"633c0061-e001-44e4-ba9b-5727e1c60875\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"value\": null\n  },\n  \"complex\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"greeting\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"75341119-750f-429e-ac6e-57973c67c477\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 275,\n            \"line\": 9,\n            \"column\": 15\n          },\n          \"end\": {\n            \"offset\": 316,\n            \"line\": 9,\n            \"column\": 56\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"e5c08941-0385-4e21-9091-70653d7ba580\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 280,\n                  \"line\": 9,\n                  \"column\": 20\n                },\n                \"end\": {\n                  \"offset\": 316,\n                  \"line\": 9,\n                  \"column\": 56\n                }\n              },\n              \"content\": \"messageTemplate\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Bob\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"signed up\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"messageTemplate\",\n          \"arguments\": [\n            \"\\\"Bob\\\"\",\n            \"\\\"signed up\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      },\n      \"build\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"9d21b9c8-7a95-4441-916f-b836873ee79b\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 329,\n            \"line\": 10,\n            \"column\": 12\n          },\n          \"end\": {\n            \"offset\": 345,\n            \"line\": 10,\n            \"column\": 28\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runExec\",\n        \"source\": \"exec\",\n        \"values\": {\n          \"identifier\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"3378e934-1bb6-4e81-bf9c-8343a7d9b95c\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 335,\n                  \"line\": 10,\n                  \"column\": 18\n                },\n                \"end\": {\n                  \"offset\": 345,\n                  \"line\": 10,\n                  \"column\": 28\n                }\n              },\n              \"content\": \"getVersion\"\n            }\n          ],\n          \"args\": []\n        },\n        \"raw\": {\n          \"identifier\": \"getVersion\",\n          \"args\": []\n        },\n        \"meta\": {\n          \"argumentCount\": 0,\n          \"isDataValue\": true\n        }\n      },\n      \"empty\": {\n        \"type\": \"Null\",\n        \"nodeId\": \"0e2e7199-3d26-4b08-b31b-c82008b63a73\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          },\n          \"end\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          }\n        },\n        \"value\": null\n      },\n      \"flag\": true\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 4
        }
      }
    }
  ],
  "parseError": null
}