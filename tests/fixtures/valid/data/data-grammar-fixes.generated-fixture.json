{
  "name": "data-grammar-fixes",
  "description": "Test fixture for valid/data-grammar-fixes",
  "category": "valid",
  "subcategory": "data-grammar-fixes",
  "input": "@text messageTemplate(user, action) = @add [[{{user}} {{action}} successfully!]]\n@exec getVersion = @run [echo \"v1.2.3\"]\n\n@data testAllFixes = {\n  message: @add @messageTemplate(\"Alice\", \"logged in\"),\n  version: @run @getVersion,\n  nullable: null,\n  complex: {\n    greeting: @add @messageTemplate(\"Bob\", \"signed up\"),\n    build: @run @getVersion,\n    empty: null,\n    flag: true\n  }\n}",
  "expected": "",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "7c7ed8bf-63c8-4fbc-97ac-ea4b0a6f79cd",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 80,
          "line": 1,
          "column": 81
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "fa892fc8-fdde-475a-840c-b8fc6a4f9918",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "messageTemplate"
          }
        ],
        "params": [
          "user",
          "action"
        ],
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "98289a6c-5868-4ec1-8151-c6194cab2c42",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "user"
          },
          {
            "type": "Text",
            "nodeId": "8215fd9d-f341-45bd-908e-eef15e6e1ca6",
            "location": {
              "start": {
                "offset": 53,
                "line": 1,
                "column": 54
              },
              "end": {
                "offset": 54,
                "line": 1,
                "column": 55
              }
            },
            "content": " "
          },
          {
            "type": "VariableReference",
            "nodeId": "10869923-054b-47f5-ba22-df9f2b19af63",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "action"
          },
          {
            "type": "Text",
            "nodeId": "ae80987a-ef57-49ac-abbd-f9e3929cfba9",
            "location": {
              "start": {
                "offset": 64,
                "line": 1,
                "column": 65
              },
              "end": {
                "offset": 78,
                "line": 1,
                "column": 79
              }
            },
            "content": " successfully!"
          }
        ]
      },
      "raw": {
        "identifier": "messageTemplate",
        "params": [
          "user",
          "action"
        ],
        "content": "{{user}} {{action}} successfully!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Newline",
      "nodeId": "908b6a70-9546-4fa1-a14f-3fe9a12efd5f",
      "location": {
        "start": {
          "offset": 80,
          "line": 1,
          "column": 81
        },
        "end": {
          "offset": 81,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "b1abb48b-785e-4c2f-b8a1-a9d6b4dbf3b5",
      "location": {
        "start": {
          "offset": 81,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 120,
          "line": 2,
          "column": 40
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "395249e5-c71d-4e7f-9a78-52cb64957672",
            "location": {
              "start": {
                "offset": 81,
                "line": 2,
                "column": 1
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 40
              }
            },
            "content": "getVersion"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "65f13929-33c1-4def-bdba-1c9c360b3dde",
            "location": {
              "start": {
                "offset": 106,
                "line": 2,
                "column": 26
              },
              "end": {
                "offset": 119,
                "line": 2,
                "column": 39
              }
            },
            "content": "echo \"v1.2.3\""
          }
        ]
      },
      "raw": {
        "identifier": "getVersion",
        "params": [],
        "command": "echo \"v1.2.3\""
      },
      "meta": {
        "parameterCount": 0,
        "commandType": "command"
      }
    },
    {
      "type": "Text",
      "nodeId": "66a5cc9c-4e9f-467c-92e5-74c2ebcc9d96",
      "location": {
        "start": {
          "offset": 120,
          "line": 2,
          "column": 40
        },
        "end": {
          "offset": 122,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "b671eef3-3e16-40eb-b783-8e8e111346db",
      "location": {
        "start": {
          "offset": 122,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 384,
          "line": 14,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "44344857-6bc9-4d13-9e58-914c068b541e",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "testAllFixes"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "message": {
              "type": "Directive",
              "nodeId": "c1882b95-00a9-4393-8957-86fd3599a818",
              "location": {
                "start": {
                  "offset": 156,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 199,
                  "line": 5,
                  "column": 55
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "496ecf43-753f-4441-822e-4a5cb73040df",
                    "location": {
                      "start": {
                        "offset": 161,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 199,
                        "line": 5,
                        "column": 55
                      }
                    },
                    "content": "messageTemplate"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  },
                  {
                    "type": "string",
                    "value": "logged in"
                  }
                ]
              },
              "raw": {
                "templateName": "messageTemplate",
                "arguments": [
                  "\"Alice\"",
                  "\"logged in\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "version": {
              "type": "Directive",
              "nodeId": "7f11f60b-8d86-4461-b78e-0c12dce53bbb",
              "location": {
                "start": {
                  "offset": 212,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 228,
                  "line": 6,
                  "column": 28
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "34170137-4986-4c1b-9197-5a4aeedaa4b0",
                    "location": {
                      "start": {
                        "offset": 218,
                        "line": 6,
                        "column": 18
                      },
                      "end": {
                        "offset": 228,
                        "line": 6,
                        "column": 28
                      }
                    },
                    "content": "getVersion"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getVersion",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "nullable": {
              "type": "Null",
              "nodeId": "da5d8024-2736-4222-b270-8017dfbb10bb",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "value": null
            },
            "complex": {
              "type": "object",
              "properties": {
                "greeting": {
                  "type": "Directive",
                  "nodeId": "1d8c66e1-6af0-4429-8fba-13a1e8926813",
                  "location": {
                    "start": {
                      "offset": 275,
                      "line": 9,
                      "column": 15
                    },
                    "end": {
                      "offset": 316,
                      "line": 9,
                      "column": 56
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "0e9002ee-7a85-4ece-a4cc-4a586f5a5878",
                        "location": {
                          "start": {
                            "offset": 280,
                            "line": 9,
                            "column": 20
                          },
                          "end": {
                            "offset": 316,
                            "line": 9,
                            "column": 56
                          }
                        },
                        "content": "messageTemplate"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Bob"
                      },
                      {
                        "type": "string",
                        "value": "signed up"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "messageTemplate",
                    "arguments": [
                      "\"Bob\"",
                      "\"signed up\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                },
                "build": {
                  "type": "Directive",
                  "nodeId": "1564154a-193b-4adc-b45b-69d19099dcea",
                  "location": {
                    "start": {
                      "offset": 329,
                      "line": 10,
                      "column": 12
                    },
                    "end": {
                      "offset": 345,
                      "line": 10,
                      "column": 28
                    }
                  },
                  "kind": "run",
                  "subtype": "runExec",
                  "source": "exec",
                  "values": {
                    "identifier": [
                      {
                        "type": "Text",
                        "nodeId": "0fd68c0b-3d39-427c-9450-d24e8c89686e",
                        "location": {
                          "start": {
                            "offset": 335,
                            "line": 10,
                            "column": 18
                          },
                          "end": {
                            "offset": 345,
                            "line": 10,
                            "column": 28
                          }
                        },
                        "content": "getVersion"
                      }
                    ],
                    "args": []
                  },
                  "raw": {
                    "identifier": "getVersion",
                    "args": []
                  },
                  "meta": {
                    "argumentCount": 0,
                    "isDataValue": true
                  }
                },
                "empty": {
                  "type": "Null",
                  "nodeId": "ce5ea01e-fe65-4f94-bdb4-ad712d930574",
                  "location": {
                    "start": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    },
                    "end": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    }
                  },
                  "value": null
                },
                "flag": true
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "testAllFixes",
        "value": "{\n  \"message\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"c1882b95-00a9-4393-8957-86fd3599a818\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 156,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 199,\n        \"line\": 5,\n        \"column\": 55\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"496ecf43-753f-4441-822e-4a5cb73040df\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 161,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 199,\n              \"line\": 5,\n              \"column\": 55\n            }\n          },\n          \"content\": \"messageTemplate\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"logged in\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"messageTemplate\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\",\n        \"\\\"logged in\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"version\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"7f11f60b-8d86-4461-b78e-0c12dce53bbb\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 212,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 228,\n        \"line\": 6,\n        \"column\": 28\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"34170137-4986-4c1b-9197-5a4aeedaa4b0\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 218,\n              \"line\": 6,\n              \"column\": 18\n            },\n            \"end\": {\n              \"offset\": 228,\n              \"line\": 6,\n              \"column\": 28\n            }\n          },\n          \"content\": \"getVersion\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getVersion\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"nullable\": {\n    \"type\": \"Null\",\n    \"nodeId\": \"da5d8024-2736-4222-b270-8017dfbb10bb\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"value\": null\n  },\n  \"complex\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"greeting\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"1d8c66e1-6af0-4429-8fba-13a1e8926813\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 275,\n            \"line\": 9,\n            \"column\": 15\n          },\n          \"end\": {\n            \"offset\": 316,\n            \"line\": 9,\n            \"column\": 56\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"0e9002ee-7a85-4ece-a4cc-4a586f5a5878\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 280,\n                  \"line\": 9,\n                  \"column\": 20\n                },\n                \"end\": {\n                  \"offset\": 316,\n                  \"line\": 9,\n                  \"column\": 56\n                }\n              },\n              \"content\": \"messageTemplate\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Bob\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"signed up\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"messageTemplate\",\n          \"arguments\": [\n            \"\\\"Bob\\\"\",\n            \"\\\"signed up\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      },\n      \"build\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"1564154a-193b-4adc-b45b-69d19099dcea\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 329,\n            \"line\": 10,\n            \"column\": 12\n          },\n          \"end\": {\n            \"offset\": 345,\n            \"line\": 10,\n            \"column\": 28\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runExec\",\n        \"source\": \"exec\",\n        \"values\": {\n          \"identifier\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"0fd68c0b-3d39-427c-9450-d24e8c89686e\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 335,\n                  \"line\": 10,\n                  \"column\": 18\n                },\n                \"end\": {\n                  \"offset\": 345,\n                  \"line\": 10,\n                  \"column\": 28\n                }\n              },\n              \"content\": \"getVersion\"\n            }\n          ],\n          \"args\": []\n        },\n        \"raw\": {\n          \"identifier\": \"getVersion\",\n          \"args\": []\n        },\n        \"meta\": {\n          \"argumentCount\": 0,\n          \"isDataValue\": true\n        }\n      },\n      \"empty\": {\n        \"type\": \"Null\",\n        \"nodeId\": \"ce5ea01e-fe65-4f94-bdb4-ad712d930574\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          },\n          \"end\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          }\n        },\n        \"value\": null\n      },\n      \"flag\": true\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 4
        }
      }
    }
  ],
  "parseError": null
}