{
  "name": "data-grammar-fixes",
  "description": "Test fixture for valid/data-grammar-fixes",
  "category": "valid",
  "subcategory": "data-grammar-fixes",
  "input": "@text messageTemplate(user, action) = @add [[{{user}} {{action}} successfully!]]\n@exec getVersion = @run [echo \"v1.2.3\"]\n\n@data testAllFixes = {\n  message: @add @messageTemplate(\"Alice\", \"logged in\"),\n  version: @run @getVersion,\n  nullable: null,\n  complex: {\n    greeting: @add @messageTemplate(\"Bob\", \"signed up\"),\n    build: @run @getVersion,\n    empty: null,\n    flag: true\n  }\n}",
  "expected": "",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "eabf155d-46a4-4f27-adb4-d04c3401c1eb",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 80,
          "line": 1,
          "column": 81
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "c18c939e-1cdb-4b56-b5fe-eb9bcc243e9e",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "messageTemplate"
          }
        ],
        "params": [
          "user",
          "action"
        ],
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "0fd2d735-6825-4830-94be-078b611c47c4",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "user"
          },
          {
            "type": "Text",
            "nodeId": "7f57599d-3361-49c9-8403-ebe0d791b429",
            "location": {
              "start": {
                "offset": 53,
                "line": 1,
                "column": 54
              },
              "end": {
                "offset": 54,
                "line": 1,
                "column": 55
              }
            },
            "content": " "
          },
          {
            "type": "VariableReference",
            "nodeId": "ee2dee61-256d-4714-b48d-06b83f91fb96",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "action"
          },
          {
            "type": "Text",
            "nodeId": "453d5e82-02b6-41e7-903c-fb9922ad1b3f",
            "location": {
              "start": {
                "offset": 64,
                "line": 1,
                "column": 65
              },
              "end": {
                "offset": 78,
                "line": 1,
                "column": 79
              }
            },
            "content": " successfully!"
          }
        ]
      },
      "raw": {
        "identifier": "messageTemplate",
        "params": [
          "user",
          "action"
        ],
        "content": "{{user}} {{action}} successfully!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Newline",
      "nodeId": "7cdde09f-7d38-40d8-b9a6-19b2906d4fef",
      "location": {
        "start": {
          "offset": 80,
          "line": 1,
          "column": 81
        },
        "end": {
          "offset": 81,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "addf8a3b-fc2c-4e12-9a8d-5acef95eb3c7",
      "location": {
        "start": {
          "offset": 81,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 120,
          "line": 2,
          "column": 40
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "9ceddeb4-696b-4b4c-bd2b-4dc0485bd1b4",
            "location": {
              "start": {
                "offset": 81,
                "line": 2,
                "column": 1
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 40
              }
            },
            "content": "getVersion"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "49938eee-4470-486e-b96b-cc0d53661fb6",
            "location": {
              "start": {
                "offset": 106,
                "line": 2,
                "column": 26
              },
              "end": {
                "offset": 119,
                "line": 2,
                "column": 39
              }
            },
            "content": "echo \"v1.2.3\""
          }
        ],
        "commandBases": [
          {
            "nodeId": "45c752a2-e60d-418e-8e69-5b89f88ad7e8",
            "location": {
              "start": {
                "offset": 105,
                "line": 2,
                "column": 25
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 40
              }
            },
            "command": "echo"
          }
        ]
      },
      "raw": {
        "identifier": "getVersion",
        "params": [],
        "command": "echo \"v1.2.3\"",
        "commandBases": [
          "echo"
        ]
      },
      "meta": {
        "hasVariables": false,
        "commandCount": 1,
        "hasScriptRunner": false,
        "parameterCount": 0
      }
    },
    {
      "type": "Text",
      "nodeId": "c128209e-fcef-4250-85da-8e6c992bb9f3",
      "location": {
        "start": {
          "offset": 120,
          "line": 2,
          "column": 40
        },
        "end": {
          "offset": 122,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "e3c38e74-a411-40ae-ad98-26a762e6a62a",
      "location": {
        "start": {
          "offset": 122,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 384,
          "line": 14,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "1ad14be7-04d5-42d5-8331-19a6d9e029af",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "testAllFixes"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "message": {
              "type": "Directive",
              "nodeId": "bad3394b-e76e-42cd-9a66-9de168862f7a",
              "location": {
                "start": {
                  "offset": 156,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 199,
                  "line": 5,
                  "column": 55
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "5395950f-b42b-4da2-8580-548613cf3c8a",
                    "location": {
                      "start": {
                        "offset": 161,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 199,
                        "line": 5,
                        "column": 55
                      }
                    },
                    "content": "messageTemplate"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  },
                  {
                    "type": "string",
                    "value": "logged in"
                  }
                ]
              },
              "raw": {
                "templateName": "messageTemplate",
                "arguments": [
                  "\"Alice\"",
                  "\"logged in\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "version": {
              "type": "Directive",
              "nodeId": "e6a18e84-a448-49e8-9a98-0df13678715d",
              "location": {
                "start": {
                  "offset": 212,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 228,
                  "line": 6,
                  "column": 28
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "bb85898c-f254-4820-850a-fdd464bf97de",
                    "location": {
                      "start": {
                        "offset": 218,
                        "line": 6,
                        "column": 18
                      },
                      "end": {
                        "offset": 228,
                        "line": 6,
                        "column": 28
                      }
                    },
                    "content": "getVersion"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getVersion",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "nullable": {
              "type": "Null",
              "nodeId": "30fc0039-9bc0-4d8a-bce8-939ad1f315db",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "value": null
            },
            "complex": {
              "type": "object",
              "properties": {
                "greeting": {
                  "type": "Directive",
                  "nodeId": "b8d5d4a9-18b5-42eb-b97b-1bd7521038dc",
                  "location": {
                    "start": {
                      "offset": 275,
                      "line": 9,
                      "column": 15
                    },
                    "end": {
                      "offset": 316,
                      "line": 9,
                      "column": 56
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "bc786402-fbf6-41b2-83fc-759491f82b74",
                        "location": {
                          "start": {
                            "offset": 280,
                            "line": 9,
                            "column": 20
                          },
                          "end": {
                            "offset": 316,
                            "line": 9,
                            "column": 56
                          }
                        },
                        "content": "messageTemplate"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Bob"
                      },
                      {
                        "type": "string",
                        "value": "signed up"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "messageTemplate",
                    "arguments": [
                      "\"Bob\"",
                      "\"signed up\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                },
                "build": {
                  "type": "Directive",
                  "nodeId": "1e87b44c-3308-4f2a-81e2-40a89934bdaa",
                  "location": {
                    "start": {
                      "offset": 329,
                      "line": 10,
                      "column": 12
                    },
                    "end": {
                      "offset": 345,
                      "line": 10,
                      "column": 28
                    }
                  },
                  "kind": "run",
                  "subtype": "runExec",
                  "source": "exec",
                  "values": {
                    "identifier": [
                      {
                        "type": "Text",
                        "nodeId": "203c950d-08ad-41b0-80dc-7ee3c25ebefe",
                        "location": {
                          "start": {
                            "offset": 335,
                            "line": 10,
                            "column": 18
                          },
                          "end": {
                            "offset": 345,
                            "line": 10,
                            "column": 28
                          }
                        },
                        "content": "getVersion"
                      }
                    ],
                    "args": []
                  },
                  "raw": {
                    "identifier": "getVersion",
                    "args": []
                  },
                  "meta": {
                    "argumentCount": 0,
                    "isDataValue": true
                  }
                },
                "empty": {
                  "type": "Null",
                  "nodeId": "c887bb84-4994-4195-9806-69872417047c",
                  "location": {
                    "start": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    },
                    "end": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    }
                  },
                  "value": null
                },
                "flag": true
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "testAllFixes",
        "value": "{\n  \"message\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"bad3394b-e76e-42cd-9a66-9de168862f7a\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 156,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 199,\n        \"line\": 5,\n        \"column\": 55\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"5395950f-b42b-4da2-8580-548613cf3c8a\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 161,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 199,\n              \"line\": 5,\n              \"column\": 55\n            }\n          },\n          \"content\": \"messageTemplate\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"logged in\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"messageTemplate\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\",\n        \"\\\"logged in\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"version\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"e6a18e84-a448-49e8-9a98-0df13678715d\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 212,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 228,\n        \"line\": 6,\n        \"column\": 28\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"bb85898c-f254-4820-850a-fdd464bf97de\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 218,\n              \"line\": 6,\n              \"column\": 18\n            },\n            \"end\": {\n              \"offset\": 228,\n              \"line\": 6,\n              \"column\": 28\n            }\n          },\n          \"content\": \"getVersion\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getVersion\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"nullable\": {\n    \"type\": \"Null\",\n    \"nodeId\": \"30fc0039-9bc0-4d8a-bce8-939ad1f315db\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"value\": null\n  },\n  \"complex\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"greeting\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"b8d5d4a9-18b5-42eb-b97b-1bd7521038dc\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 275,\n            \"line\": 9,\n            \"column\": 15\n          },\n          \"end\": {\n            \"offset\": 316,\n            \"line\": 9,\n            \"column\": 56\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"bc786402-fbf6-41b2-83fc-759491f82b74\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 280,\n                  \"line\": 9,\n                  \"column\": 20\n                },\n                \"end\": {\n                  \"offset\": 316,\n                  \"line\": 9,\n                  \"column\": 56\n                }\n              },\n              \"content\": \"messageTemplate\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Bob\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"signed up\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"messageTemplate\",\n          \"arguments\": [\n            \"\\\"Bob\\\"\",\n            \"\\\"signed up\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      },\n      \"build\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"1e87b44c-3308-4f2a-81e2-40a89934bdaa\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 329,\n            \"line\": 10,\n            \"column\": 12\n          },\n          \"end\": {\n            \"offset\": 345,\n            \"line\": 10,\n            \"column\": 28\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runExec\",\n        \"source\": \"exec\",\n        \"values\": {\n          \"identifier\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"203c950d-08ad-41b0-80dc-7ee3c25ebefe\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 335,\n                  \"line\": 10,\n                  \"column\": 18\n                },\n                \"end\": {\n                  \"offset\": 345,\n                  \"line\": 10,\n                  \"column\": 28\n                }\n              },\n              \"content\": \"getVersion\"\n            }\n          ],\n          \"args\": []\n        },\n        \"raw\": {\n          \"identifier\": \"getVersion\",\n          \"args\": []\n        },\n        \"meta\": {\n          \"argumentCount\": 0,\n          \"isDataValue\": true\n        }\n      },\n      \"empty\": {\n        \"type\": \"Null\",\n        \"nodeId\": \"c887bb84-4994-4195-9806-69872417047c\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          },\n          \"end\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          }\n        },\n        \"value\": null\n      },\n      \"flag\": true\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 4
        }
      }
    }
  ],
  "parseError": null
}