{
  "name": "data-grammar-fixes",
  "description": "Test fixture for valid/data-grammar-fixes",
  "category": "valid",
  "subcategory": "data-grammar-fixes",
  "input": "@text messageTemplate(user, action) = @add [[{{user}} {{action}} successfully!]]\n@exec getVersion = @run [echo \"v1.2.3\"]\n\n@data testAllFixes = {\n  message: @add @messageTemplate(\"Alice\", \"logged in\"),\n  version: @run @getVersion,\n  nullable: null,\n  complex: {\n    greeting: @add @messageTemplate(\"Bob\", \"signed up\"),\n    build: @run @getVersion,\n    empty: null,\n    flag: true\n  }\n}",
  "expected": "",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "d7c8ba85-aee4-40ee-ac81-efcf6fbc9027",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 80,
          "line": 1,
          "column": 81
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "3b94f93a-f8af-4618-8548-56021a8429ff",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "messageTemplate"
          }
        ],
        "params": [
          "user",
          "action"
        ],
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "7e1120c0-9ef0-421f-9bd0-563cc8c4e420",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "user"
          },
          {
            "type": "Text",
            "nodeId": "24ea0d01-abe2-4c98-b2c7-9b4b274b8a7e",
            "location": {
              "start": {
                "offset": 53,
                "line": 1,
                "column": 54
              },
              "end": {
                "offset": 54,
                "line": 1,
                "column": 55
              }
            },
            "content": " "
          },
          {
            "type": "VariableReference",
            "nodeId": "dee28c22-c22c-4cb2-ba58-5c92121ef636",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "action"
          },
          {
            "type": "Text",
            "nodeId": "0e50cfaa-3a7b-4b1e-95bd-4e55c20bf7ec",
            "location": {
              "start": {
                "offset": 64,
                "line": 1,
                "column": 65
              },
              "end": {
                "offset": 78,
                "line": 1,
                "column": 79
              }
            },
            "content": " successfully!"
          }
        ]
      },
      "raw": {
        "identifier": "messageTemplate",
        "params": [
          "user",
          "action"
        ],
        "content": "{{user}} {{action}} successfully!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Newline",
      "nodeId": "e22ea1b6-b379-4e16-b7b1-cd1111a19c62",
      "location": {
        "start": {
          "offset": 80,
          "line": 1,
          "column": 81
        },
        "end": {
          "offset": 81,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "e4b8b075-45f5-4f62-b58c-699cc7bf7076",
      "location": {
        "start": {
          "offset": 81,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 120,
          "line": 2,
          "column": 40
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "53315523-60cf-4ed7-abd9-5efb687aba90",
            "location": {
              "start": {
                "offset": 81,
                "line": 2,
                "column": 1
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 40
              }
            },
            "content": "getVersion"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "c4860d21-c747-4acb-be46-3d9113109fd5",
            "location": {
              "start": {
                "offset": 106,
                "line": 2,
                "column": 26
              },
              "end": {
                "offset": 119,
                "line": 2,
                "column": 39
              }
            },
            "content": "echo \"v1.2.3\""
          }
        ]
      },
      "raw": {
        "identifier": "getVersion",
        "params": [],
        "command": "echo \"v1.2.3\""
      },
      "meta": {
        "parameterCount": 0,
        "commandType": "command"
      }
    },
    {
      "type": "Text",
      "nodeId": "d65b5465-6e22-4f18-aeea-6aee72691624",
      "location": {
        "start": {
          "offset": 120,
          "line": 2,
          "column": 40
        },
        "end": {
          "offset": 122,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "9ff77e7c-7795-4bba-bc8c-9994c2655c7b",
      "location": {
        "start": {
          "offset": 122,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 384,
          "line": 14,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "07dd3d40-0f79-416a-9876-496fb5dbfdc0",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "testAllFixes"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "message": {
              "type": "Directive",
              "nodeId": "2a36704f-b957-45a5-9012-0c94cc96960e",
              "location": {
                "start": {
                  "offset": 156,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 199,
                  "line": 5,
                  "column": 55
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "a884593b-cb0a-4c05-8a39-43cbbc621653",
                    "location": {
                      "start": {
                        "offset": 161,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 199,
                        "line": 5,
                        "column": 55
                      }
                    },
                    "content": "messageTemplate"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  },
                  {
                    "type": "string",
                    "value": "logged in"
                  }
                ]
              },
              "raw": {
                "templateName": "messageTemplate",
                "arguments": [
                  "\"Alice\"",
                  "\"logged in\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "version": {
              "type": "Directive",
              "nodeId": "8100cd8d-f640-4ca2-aeaf-959946970e76",
              "location": {
                "start": {
                  "offset": 212,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 228,
                  "line": 6,
                  "column": 28
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "cccadced-f737-473f-b693-3807a5cc76ec",
                    "location": {
                      "start": {
                        "offset": 218,
                        "line": 6,
                        "column": 18
                      },
                      "end": {
                        "offset": 228,
                        "line": 6,
                        "column": 28
                      }
                    },
                    "content": "getVersion"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getVersion",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "nullable": {
              "type": "Null",
              "nodeId": "e057c682-419b-4d40-8d08-1acbf76b1ac2",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "value": null
            },
            "complex": {
              "type": "object",
              "properties": {
                "greeting": {
                  "type": "Directive",
                  "nodeId": "bc6c60b9-ef28-43bb-8db5-32c9f0445656",
                  "location": {
                    "start": {
                      "offset": 275,
                      "line": 9,
                      "column": 15
                    },
                    "end": {
                      "offset": 316,
                      "line": 9,
                      "column": 56
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "51939842-164f-4dae-b605-a821abebaccd",
                        "location": {
                          "start": {
                            "offset": 280,
                            "line": 9,
                            "column": 20
                          },
                          "end": {
                            "offset": 316,
                            "line": 9,
                            "column": 56
                          }
                        },
                        "content": "messageTemplate"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Bob"
                      },
                      {
                        "type": "string",
                        "value": "signed up"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "messageTemplate",
                    "arguments": [
                      "\"Bob\"",
                      "\"signed up\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                },
                "build": {
                  "type": "Directive",
                  "nodeId": "4251c897-4c71-4ea4-9a28-c74ddfa4b00a",
                  "location": {
                    "start": {
                      "offset": 329,
                      "line": 10,
                      "column": 12
                    },
                    "end": {
                      "offset": 345,
                      "line": 10,
                      "column": 28
                    }
                  },
                  "kind": "run",
                  "subtype": "runExec",
                  "source": "exec",
                  "values": {
                    "identifier": [
                      {
                        "type": "Text",
                        "nodeId": "ad707b37-38e7-40b1-93b2-9563f79f6547",
                        "location": {
                          "start": {
                            "offset": 335,
                            "line": 10,
                            "column": 18
                          },
                          "end": {
                            "offset": 345,
                            "line": 10,
                            "column": 28
                          }
                        },
                        "content": "getVersion"
                      }
                    ],
                    "args": []
                  },
                  "raw": {
                    "identifier": "getVersion",
                    "args": []
                  },
                  "meta": {
                    "argumentCount": 0,
                    "isDataValue": true
                  }
                },
                "empty": {
                  "type": "Null",
                  "nodeId": "b3ba915b-6edb-4cd3-8c4d-392cee28bb62",
                  "location": {
                    "start": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    },
                    "end": {
                      "offset": 0,
                      "line": 1,
                      "column": 1
                    }
                  },
                  "value": null
                },
                "flag": true
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "testAllFixes",
        "value": "{\n  \"message\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"2a36704f-b957-45a5-9012-0c94cc96960e\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 156,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 199,\n        \"line\": 5,\n        \"column\": 55\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"a884593b-cb0a-4c05-8a39-43cbbc621653\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 161,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 199,\n              \"line\": 5,\n              \"column\": 55\n            }\n          },\n          \"content\": \"messageTemplate\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"logged in\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"messageTemplate\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\",\n        \"\\\"logged in\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"version\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"8100cd8d-f640-4ca2-aeaf-959946970e76\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 212,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 228,\n        \"line\": 6,\n        \"column\": 28\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"cccadced-f737-473f-b693-3807a5cc76ec\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 218,\n              \"line\": 6,\n              \"column\": 18\n            },\n            \"end\": {\n              \"offset\": 228,\n              \"line\": 6,\n              \"column\": 28\n            }\n          },\n          \"content\": \"getVersion\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getVersion\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"nullable\": {\n    \"type\": \"Null\",\n    \"nodeId\": \"e057c682-419b-4d40-8d08-1acbf76b1ac2\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"value\": null\n  },\n  \"complex\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"greeting\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"bc6c60b9-ef28-43bb-8db5-32c9f0445656\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 275,\n            \"line\": 9,\n            \"column\": 15\n          },\n          \"end\": {\n            \"offset\": 316,\n            \"line\": 9,\n            \"column\": 56\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"51939842-164f-4dae-b605-a821abebaccd\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 280,\n                  \"line\": 9,\n                  \"column\": 20\n                },\n                \"end\": {\n                  \"offset\": 316,\n                  \"line\": 9,\n                  \"column\": 56\n                }\n              },\n              \"content\": \"messageTemplate\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Bob\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"signed up\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"messageTemplate\",\n          \"arguments\": [\n            \"\\\"Bob\\\"\",\n            \"\\\"signed up\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      },\n      \"build\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"4251c897-4c71-4ea4-9a28-c74ddfa4b00a\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 329,\n            \"line\": 10,\n            \"column\": 12\n          },\n          \"end\": {\n            \"offset\": 345,\n            \"line\": 10,\n            \"column\": 28\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runExec\",\n        \"source\": \"exec\",\n        \"values\": {\n          \"identifier\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"ad707b37-38e7-40b1-93b2-9563f79f6547\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 335,\n                  \"line\": 10,\n                  \"column\": 18\n                },\n                \"end\": {\n                  \"offset\": 345,\n                  \"line\": 10,\n                  \"column\": 28\n                }\n              },\n              \"content\": \"getVersion\"\n            }\n          ],\n          \"args\": []\n        },\n        \"raw\": {\n          \"identifier\": \"getVersion\",\n          \"args\": []\n        },\n        \"meta\": {\n          \"argumentCount\": 0,\n          \"isDataValue\": true\n        }\n      },\n      \"empty\": {\n        \"type\": \"Null\",\n        \"nodeId\": \"b3ba915b-6edb-4cd3-8c4d-392cee28bb62\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          },\n          \"end\": {\n            \"offset\": 0,\n            \"line\": 1,\n            \"column\": 1\n          }\n        },\n        \"value\": null\n      },\n      \"flag\": true\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 4
        }
      }
    }
  ],
  "parseError": null
}