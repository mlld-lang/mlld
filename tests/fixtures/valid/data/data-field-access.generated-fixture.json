{
  "name": "data-field-access",
  "description": "Test fixture for valid/data-field-access",
  "category": "valid",
  "subcategory": "data-field-access",
  "input": "@data users = [\n  {name: \"Alice\", role: {title: \"Admin\", level: 5}},\n  {name: \"Bob\", role: {title: \"User\", level: 1}}\n]\n@data permissions = {\n  adminName: @users[0].name,\n  adminLevel: @users[0].role.level,\n  userCount: 2\n}\n@add [[{{permissions.adminName}} has level {{permissions.adminLevel}} access]]",
  "expected": "Alice has level 5 access",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "a13fed6e-4039-426f-934c-7552b05bb4e5",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 119,
          "line": 4,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "array",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "98cf87b9-f23b-4d8f-b9ea-a52f357b7658",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "users"
          }
        ],
        "value": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "name": [
                  {
                    "type": "Text",
                    "nodeId": "5cc4bc7d-6838-4564-8a23-c481014fccea",
                    "location": {
                      "start": {
                        "offset": 25,
                        "line": 2,
                        "column": 10
                      },
                      "end": {
                        "offset": 32,
                        "line": 2,
                        "column": 17
                      }
                    },
                    "content": "Alice"
                  }
                ],
                "role": {
                  "type": "object",
                  "properties": {
                    "title": [
                      {
                        "type": "Text",
                        "nodeId": "971270ab-7e2a-41d6-a611-a24772c56948",
                        "location": {
                          "start": {
                            "offset": 48,
                            "line": 2,
                            "column": 33
                          },
                          "end": {
                            "offset": 55,
                            "line": 2,
                            "column": 40
                          }
                        },
                        "content": "Admin"
                      }
                    ],
                    "level": 5
                  }
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "name": [
                  {
                    "type": "Text",
                    "nodeId": "41af624e-5464-4ed3-938e-5dfbdbc38fbb",
                    "location": {
                      "start": {
                        "offset": 78,
                        "line": 3,
                        "column": 10
                      },
                      "end": {
                        "offset": 83,
                        "line": 3,
                        "column": 15
                      }
                    },
                    "content": "Bob"
                  }
                ],
                "role": {
                  "type": "object",
                  "properties": {
                    "title": [
                      {
                        "type": "Text",
                        "nodeId": "6dd1f507-b0b6-4da7-829f-b9091d37be39",
                        "location": {
                          "start": {
                            "offset": 99,
                            "line": 3,
                            "column": 31
                          },
                          "end": {
                            "offset": 105,
                            "line": 3,
                            "column": 37
                          }
                        },
                        "content": "User"
                      }
                    ],
                    "level": 1
                  }
                }
              }
            }
          ]
        }
      },
      "raw": {
        "identifier": "users",
        "value": "[\n  {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"5cc4bc7d-6838-4564-8a23-c481014fccea\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 25,\n              \"line\": 2,\n              \"column\": 10\n            },\n            \"end\": {\n              \"offset\": 32,\n              \"line\": 2,\n              \"column\": 17\n            }\n          },\n          \"content\": \"Alice\"\n        }\n      ],\n      \"role\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"title\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"971270ab-7e2a-41d6-a611-a24772c56948\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 48,\n                  \"line\": 2,\n                  \"column\": 33\n                },\n                \"end\": {\n                  \"offset\": 55,\n                  \"line\": 2,\n                  \"column\": 40\n                }\n              },\n              \"content\": \"Admin\"\n            }\n          ],\n          \"level\": 5\n        }\n      }\n    }\n  },\n  {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"41af624e-5464-4ed3-938e-5dfbdbc38fbb\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 78,\n              \"line\": 3,\n              \"column\": 10\n            },\n            \"end\": {\n              \"offset\": 83,\n              \"line\": 3,\n              \"column\": 15\n            }\n          },\n          \"content\": \"Bob\"\n        }\n      ],\n      \"role\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"title\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"6dd1f507-b0b6-4da7-829f-b9091d37be39\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 99,\n                  \"line\": 3,\n                  \"column\": 31\n                },\n                \"end\": {\n                  \"offset\": 105,\n                  \"line\": 3,\n                  \"column\": 37\n                }\n              },\n              \"content\": \"User\"\n            }\n          ],\n          \"level\": 1\n        }\n      }\n    }\n  }\n]"
      },
      "meta": {
        "arrayData": {
          "itemCount": 2
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "49f5c935-ba4c-4897-ba97-f601bba5db61",
      "location": {
        "start": {
          "offset": 119,
          "line": 4,
          "column": 2
        },
        "end": {
          "offset": 120,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "8e051e23-c743-4293-a211-a6ec978258fc",
      "location": {
        "start": {
          "offset": 120,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 223,
          "line": 9,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "234f5307-5a4e-432a-a552-d805f8abfbee",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "permissions"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "adminName": {
              "type": "VariableReference",
              "nodeId": "4df81171-8a04-4aa2-a84f-3992af8cdfb3",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "valueType": "varIdentifier",
              "identifier": "users",
              "fields": [
                {
                  "type": "arrayIndex",
                  "index": 0
                },
                {
                  "type": "field",
                  "name": "name"
                }
              ]
            },
            "adminLevel": {
              "type": "VariableReference",
              "nodeId": "ae650ff8-b286-4416-b3e8-3dcd042d2aef",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "valueType": "varIdentifier",
              "identifier": "users",
              "fields": [
                {
                  "type": "arrayIndex",
                  "index": 0
                },
                {
                  "type": "field",
                  "name": "role"
                },
                {
                  "type": "field",
                  "name": "level"
                }
              ]
            },
            "userCount": 2
          }
        }
      },
      "raw": {
        "identifier": "permissions",
        "value": "{\n  \"adminName\": {\n    \"type\": \"VariableReference\",\n    \"nodeId\": \"4df81171-8a04-4aa2-a84f-3992af8cdfb3\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"valueType\": \"varIdentifier\",\n    \"identifier\": \"users\",\n    \"fields\": [\n      {\n        \"type\": \"arrayIndex\",\n        \"index\": 0\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"name\"\n      }\n    ]\n  },\n  \"adminLevel\": {\n    \"type\": \"VariableReference\",\n    \"nodeId\": \"ae650ff8-b286-4416-b3e8-3dcd042d2aef\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"valueType\": \"varIdentifier\",\n    \"identifier\": \"users\",\n    \"fields\": [\n      {\n        \"type\": \"arrayIndex\",\n        \"index\": 0\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"role\"\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"level\"\n      }\n    ]\n  },\n  \"userCount\": 2\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 3
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "027e5418-e7da-4a88-a438-235d2f71e986",
      "location": {
        "start": {
          "offset": 223,
          "line": 9,
          "column": 2
        },
        "end": {
          "offset": 224,
          "line": 10,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "2606563f-50ab-48ab-98ca-55139360a1fc",
      "location": {
        "start": {
          "offset": 224,
          "line": 10,
          "column": 1
        },
        "end": {
          "offset": 302,
          "line": 10,
          "column": 79
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "7d62f765-2c8b-402c-966d-7d54908208e4",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "permissions",
            "fields": [
              {
                "type": "field",
                "name": "adminName"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "44e216e1-9c40-44fd-a20a-df75a9a2980f",
            "location": {
              "start": {
                "offset": 256,
                "line": 10,
                "column": 33
              },
              "end": {
                "offset": 267,
                "line": 10,
                "column": 44
              }
            },
            "content": " has level "
          },
          {
            "type": "VariableReference",
            "nodeId": "e870ceb9-7c25-46f4-ae92-dcc5007501cf",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "permissions",
            "fields": [
              {
                "type": "field",
                "name": "adminLevel"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "cd67689b-6cd3-4a38-a038-efa0d8c3460f",
            "location": {
              "start": {
                "offset": 293,
                "line": 10,
                "column": 70
              },
              "end": {
                "offset": 300,
                "line": 10,
                "column": 77
              }
            },
            "content": " access"
          }
        ]
      },
      "raw": {
        "content": "{{permissions}} has level {{permissions}} access"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ],
  "parseError": null
}