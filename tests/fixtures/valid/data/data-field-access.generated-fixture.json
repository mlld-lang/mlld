{
  "name": "data-field-access",
  "description": "Test fixture for valid/data-field-access",
  "category": "valid",
  "subcategory": "data-field-access",
  "input": "@data users = [\n  {name: \"Alice\", role: {title: \"Admin\", level: 5}},\n  {name: \"Bob\", role: {title: \"User\", level: 1}}\n]\n@data permissions = {\n  adminName: @users[0].name,\n  adminLevel: @users[0].role.level,\n  userCount: 2\n}\n@add [[{{permissions.adminName}} has level {{permissions.adminLevel}} access]]",
  "expected": "Alice has level 5 access",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "a3c86ae5-d0d3-4b27-a8a9-c4c092ec4d66",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 119,
          "line": 4,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "array",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "5fd1ad2b-1818-49c0-989f-6ce28fa30de6",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "users"
          }
        ],
        "value": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "name": [
                  {
                    "type": "Text",
                    "nodeId": "cbc45862-e7a4-445d-a126-849c0c5b23d0",
                    "location": {
                      "start": {
                        "offset": 25,
                        "line": 2,
                        "column": 10
                      },
                      "end": {
                        "offset": 32,
                        "line": 2,
                        "column": 17
                      }
                    },
                    "content": "Alice"
                  }
                ],
                "role": {
                  "type": "object",
                  "properties": {
                    "title": [
                      {
                        "type": "Text",
                        "nodeId": "f5580cd5-d000-4e55-b986-d77824158cff",
                        "location": {
                          "start": {
                            "offset": 48,
                            "line": 2,
                            "column": 33
                          },
                          "end": {
                            "offset": 55,
                            "line": 2,
                            "column": 40
                          }
                        },
                        "content": "Admin"
                      }
                    ],
                    "level": 5
                  }
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "name": [
                  {
                    "type": "Text",
                    "nodeId": "96517d2c-3fcc-43b9-ad00-ed3b6675f8e7",
                    "location": {
                      "start": {
                        "offset": 78,
                        "line": 3,
                        "column": 10
                      },
                      "end": {
                        "offset": 83,
                        "line": 3,
                        "column": 15
                      }
                    },
                    "content": "Bob"
                  }
                ],
                "role": {
                  "type": "object",
                  "properties": {
                    "title": [
                      {
                        "type": "Text",
                        "nodeId": "1d94e001-1df5-445f-b54f-e71f7b5e84c2",
                        "location": {
                          "start": {
                            "offset": 99,
                            "line": 3,
                            "column": 31
                          },
                          "end": {
                            "offset": 105,
                            "line": 3,
                            "column": 37
                          }
                        },
                        "content": "User"
                      }
                    ],
                    "level": 1
                  }
                }
              }
            }
          ]
        }
      },
      "raw": {
        "identifier": "users",
        "value": "[\n  {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"cbc45862-e7a4-445d-a126-849c0c5b23d0\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 25,\n              \"line\": 2,\n              \"column\": 10\n            },\n            \"end\": {\n              \"offset\": 32,\n              \"line\": 2,\n              \"column\": 17\n            }\n          },\n          \"content\": \"Alice\"\n        }\n      ],\n      \"role\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"title\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"f5580cd5-d000-4e55-b986-d77824158cff\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 48,\n                  \"line\": 2,\n                  \"column\": 33\n                },\n                \"end\": {\n                  \"offset\": 55,\n                  \"line\": 2,\n                  \"column\": 40\n                }\n              },\n              \"content\": \"Admin\"\n            }\n          ],\n          \"level\": 5\n        }\n      }\n    }\n  },\n  {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"96517d2c-3fcc-43b9-ad00-ed3b6675f8e7\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 78,\n              \"line\": 3,\n              \"column\": 10\n            },\n            \"end\": {\n              \"offset\": 83,\n              \"line\": 3,\n              \"column\": 15\n            }\n          },\n          \"content\": \"Bob\"\n        }\n      ],\n      \"role\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"title\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"1d94e001-1df5-445f-b54f-e71f7b5e84c2\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 99,\n                  \"line\": 3,\n                  \"column\": 31\n                },\n                \"end\": {\n                  \"offset\": 105,\n                  \"line\": 3,\n                  \"column\": 37\n                }\n              },\n              \"content\": \"User\"\n            }\n          ],\n          \"level\": 1\n        }\n      }\n    }\n  }\n]"
      },
      "meta": {
        "arrayData": {
          "itemCount": 2
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "4938284b-3148-4129-b80e-9c6ff830f61f",
      "location": {
        "start": {
          "offset": 119,
          "line": 4,
          "column": 2
        },
        "end": {
          "offset": 120,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "a9aca80d-026e-49d2-a178-c52a171178cb",
      "location": {
        "start": {
          "offset": 120,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 223,
          "line": 9,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "090f188f-9b37-4847-9f50-c6575de6cfe1",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "permissions"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "adminName": {
              "type": "VariableReference",
              "nodeId": "7467214b-ed7d-40b5-a104-896b5afae552",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "valueType": "varIdentifier",
              "identifier": "users",
              "fields": [
                {
                  "type": "arrayIndex",
                  "index": 0
                },
                {
                  "type": "field",
                  "name": "name"
                }
              ]
            },
            "adminLevel": {
              "type": "VariableReference",
              "nodeId": "95df8709-3167-41ae-84ce-1f10a3553a87",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "valueType": "varIdentifier",
              "identifier": "users",
              "fields": [
                {
                  "type": "arrayIndex",
                  "index": 0
                },
                {
                  "type": "field",
                  "name": "role"
                },
                {
                  "type": "field",
                  "name": "level"
                }
              ]
            },
            "userCount": 2
          }
        }
      },
      "raw": {
        "identifier": "permissions",
        "value": "{\n  \"adminName\": {\n    \"type\": \"VariableReference\",\n    \"nodeId\": \"7467214b-ed7d-40b5-a104-896b5afae552\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"valueType\": \"varIdentifier\",\n    \"identifier\": \"users\",\n    \"fields\": [\n      {\n        \"type\": \"arrayIndex\",\n        \"index\": 0\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"name\"\n      }\n    ]\n  },\n  \"adminLevel\": {\n    \"type\": \"VariableReference\",\n    \"nodeId\": \"95df8709-3167-41ae-84ce-1f10a3553a87\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"valueType\": \"varIdentifier\",\n    \"identifier\": \"users\",\n    \"fields\": [\n      {\n        \"type\": \"arrayIndex\",\n        \"index\": 0\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"role\"\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"level\"\n      }\n    ]\n  },\n  \"userCount\": 2\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 3
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "7078f6f4-dc82-4536-8650-e266e47e1592",
      "location": {
        "start": {
          "offset": 223,
          "line": 9,
          "column": 2
        },
        "end": {
          "offset": 224,
          "line": 10,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "cc5ef525-82bc-40c2-99a4-8a603d382f14",
      "location": {
        "start": {
          "offset": 224,
          "line": 10,
          "column": 1
        },
        "end": {
          "offset": 302,
          "line": 10,
          "column": 79
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "15abb2c0-b9c9-4a70-8148-09ab8bda30e1",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "permissions",
            "fields": [
              {
                "type": "field",
                "name": "adminName"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "79bfd3ab-88ac-40a8-af49-973839179f0d",
            "location": {
              "start": {
                "offset": 256,
                "line": 10,
                "column": 33
              },
              "end": {
                "offset": 267,
                "line": 10,
                "column": 44
              }
            },
            "content": " has level "
          },
          {
            "type": "VariableReference",
            "nodeId": "48ce111c-2c1f-4d62-976a-53c77531087f",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "permissions",
            "fields": [
              {
                "type": "field",
                "name": "adminLevel"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "46b5b465-62c5-465f-a168-035de0bbb711",
            "location": {
              "start": {
                "offset": 293,
                "line": 10,
                "column": 70
              },
              "end": {
                "offset": 300,
                "line": 10,
                "column": 77
              }
            },
            "content": " access"
          }
        ]
      },
      "raw": {
        "content": "{{permissions}} has level {{permissions}} access"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ],
  "parseError": null
}