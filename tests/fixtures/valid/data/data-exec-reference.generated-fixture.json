{
  "name": "data-exec-reference",
  "description": "Test fixture for valid/data-exec-reference",
  "category": "valid",
  "subcategory": "data-exec-reference",
  "input": "@exec getDate = @run [echo \"2024-01-15\"]\n@exec getUser = @run [echo \"admin\"]\n@exec getStatus = @run [echo \"active\"]\n\n@data systemInfo = {\n  date: @run @getDate,\n  user: @run @getUser,\n  status: @run @getStatus,\n  nested: {\n    backup_date: @run @getDate,\n    backup_user: @run @getUser\n  }\n}\n\n@add [[System Information:\nDate: {{systemInfo.date}}\nUser: {{systemInfo.user}}\nStatus: {{systemInfo.status}}\n\nBackup Info:\nDate: {{systemInfo.nested.backup_date}}\nUser: {{systemInfo.nested.backup_user}}]]",
  "expected": "System Information:\nDate: 2024-01-15\nUser: admin\nStatus: active\n\nBackup Info:\nDate: 2024-01-15\nUser: admin",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "4c1fbd33-5392-4708-aaac-f931ebb61d58",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 40,
          "line": 1,
          "column": 41
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "7645a90f-1008-4977-b1e0-9169865a16ae",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 40,
                "line": 1,
                "column": 41
              }
            },
            "content": "getDate"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "6741a21f-203b-4d0e-be8a-ee1107122576",
            "location": {
              "start": {
                "offset": 22,
                "line": 1,
                "column": 23
              },
              "end": {
                "offset": 39,
                "line": 1,
                "column": 40
              }
            },
            "content": "echo \"2024-01-15\""
          }
        ]
      },
      "raw": {
        "identifier": "getDate",
        "params": [],
        "command": "echo \"2024-01-15\""
      },
      "meta": {
        "parameterCount": 0,
        "commandType": "command"
      }
    },
    {
      "type": "Newline",
      "nodeId": "ccf3cebf-bd4c-4774-aca3-a9a30a9ac005",
      "location": {
        "start": {
          "offset": 40,
          "line": 1,
          "column": 41
        },
        "end": {
          "offset": 41,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "f40060e4-e860-4565-931b-ede4b7d72031",
      "location": {
        "start": {
          "offset": 41,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 76,
          "line": 2,
          "column": 36
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "58b8c3d5-23cb-4341-b205-553c7bcba6b4",
            "location": {
              "start": {
                "offset": 41,
                "line": 2,
                "column": 1
              },
              "end": {
                "offset": 76,
                "line": 2,
                "column": 36
              }
            },
            "content": "getUser"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "60bac9d1-92f0-487e-8fb3-2e5e2e1e4abd",
            "location": {
              "start": {
                "offset": 63,
                "line": 2,
                "column": 23
              },
              "end": {
                "offset": 75,
                "line": 2,
                "column": 35
              }
            },
            "content": "echo \"admin\""
          }
        ]
      },
      "raw": {
        "identifier": "getUser",
        "params": [],
        "command": "echo \"admin\""
      },
      "meta": {
        "parameterCount": 0,
        "commandType": "command"
      }
    },
    {
      "type": "Newline",
      "nodeId": "8a5cda42-0bbc-47c2-9af9-e5a5c504471f",
      "location": {
        "start": {
          "offset": 76,
          "line": 2,
          "column": 36
        },
        "end": {
          "offset": 77,
          "line": 3,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "19574c78-94d5-4136-bc2a-a9f92e312d35",
      "location": {
        "start": {
          "offset": 77,
          "line": 3,
          "column": 1
        },
        "end": {
          "offset": 115,
          "line": 3,
          "column": 39
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "ea078387-ace6-4673-914a-b07caf418b47",
            "location": {
              "start": {
                "offset": 77,
                "line": 3,
                "column": 1
              },
              "end": {
                "offset": 115,
                "line": 3,
                "column": 39
              }
            },
            "content": "getStatus"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "c5299473-75de-4350-ae79-008334a7b12d",
            "location": {
              "start": {
                "offset": 101,
                "line": 3,
                "column": 25
              },
              "end": {
                "offset": 114,
                "line": 3,
                "column": 38
              }
            },
            "content": "echo \"active\""
          }
        ]
      },
      "raw": {
        "identifier": "getStatus",
        "params": [],
        "command": "echo \"active\""
      },
      "meta": {
        "parameterCount": 0,
        "commandType": "command"
      }
    },
    {
      "type": "Text",
      "nodeId": "468ff150-9f70-468e-a56c-1830722459ff",
      "location": {
        "start": {
          "offset": 115,
          "line": 3,
          "column": 39
        },
        "end": {
          "offset": 117,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "700fce50-b162-4695-8c86-39ac750e309e",
      "location": {
        "start": {
          "offset": 117,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 291,
          "line": 13,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "1856d8d1-9bd4-42c3-9387-e1e051bd2d54",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "systemInfo"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "date": {
              "type": "Directive",
              "nodeId": "93263cc5-2ebc-4c65-ad44-ccc0567a0930",
              "location": {
                "start": {
                  "offset": 146,
                  "line": 6,
                  "column": 9
                },
                "end": {
                  "offset": 159,
                  "line": 6,
                  "column": 22
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "241aaddb-4cd3-497f-a33a-8e5e86e4eb64",
                    "location": {
                      "start": {
                        "offset": 152,
                        "line": 6,
                        "column": 15
                      },
                      "end": {
                        "offset": 159,
                        "line": 6,
                        "column": 22
                      }
                    },
                    "content": "getDate"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getDate",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "user": {
              "type": "Directive",
              "nodeId": "0d5cc964-24f4-431b-b8f4-4c0aab872c2c",
              "location": {
                "start": {
                  "offset": 169,
                  "line": 7,
                  "column": 9
                },
                "end": {
                  "offset": 182,
                  "line": 7,
                  "column": 22
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "9705bd14-5758-4ae4-b895-56ba284b8559",
                    "location": {
                      "start": {
                        "offset": 175,
                        "line": 7,
                        "column": 15
                      },
                      "end": {
                        "offset": 182,
                        "line": 7,
                        "column": 22
                      }
                    },
                    "content": "getUser"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getUser",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "status": {
              "type": "Directive",
              "nodeId": "28d59768-7da2-49ab-af41-cec6fe529b80",
              "location": {
                "start": {
                  "offset": 194,
                  "line": 8,
                  "column": 11
                },
                "end": {
                  "offset": 209,
                  "line": 8,
                  "column": 26
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "f6424dec-6ea9-4602-b190-d890d1513da8",
                    "location": {
                      "start": {
                        "offset": 200,
                        "line": 8,
                        "column": 17
                      },
                      "end": {
                        "offset": 209,
                        "line": 8,
                        "column": 26
                      }
                    },
                    "content": "getStatus"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getStatus",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "nested": {
              "type": "object",
              "properties": {
                "backup_date": {
                  "type": "Directive",
                  "nodeId": "cb3859f6-b46c-48c4-bb2c-01a1f9da93a3",
                  "location": {
                    "start": {
                      "offset": 240,
                      "line": 10,
                      "column": 18
                    },
                    "end": {
                      "offset": 253,
                      "line": 10,
                      "column": 31
                    }
                  },
                  "kind": "run",
                  "subtype": "runExec",
                  "source": "exec",
                  "values": {
                    "identifier": [
                      {
                        "type": "Text",
                        "nodeId": "b605c4f5-c78b-4b99-a717-e4d0a7f062a7",
                        "location": {
                          "start": {
                            "offset": 246,
                            "line": 10,
                            "column": 24
                          },
                          "end": {
                            "offset": 253,
                            "line": 10,
                            "column": 31
                          }
                        },
                        "content": "getDate"
                      }
                    ],
                    "args": []
                  },
                  "raw": {
                    "identifier": "getDate",
                    "args": []
                  },
                  "meta": {
                    "argumentCount": 0,
                    "isDataValue": true
                  }
                },
                "backup_user": {
                  "type": "Directive",
                  "nodeId": "11c70c36-39fc-4a22-a786-11b15d1666a0",
                  "location": {
                    "start": {
                      "offset": 272,
                      "line": 11,
                      "column": 18
                    },
                    "end": {
                      "offset": 288,
                      "line": 12,
                      "column": 3
                    }
                  },
                  "kind": "run",
                  "subtype": "runExec",
                  "source": "exec",
                  "values": {
                    "identifier": [
                      {
                        "type": "Text",
                        "nodeId": "2845ac3c-cf94-43b3-a8f6-cd2e1f93304a",
                        "location": {
                          "start": {
                            "offset": 278,
                            "line": 11,
                            "column": 24
                          },
                          "end": {
                            "offset": 288,
                            "line": 12,
                            "column": 3
                          }
                        },
                        "content": "getUser"
                      }
                    ],
                    "args": []
                  },
                  "raw": {
                    "identifier": "getUser",
                    "args": []
                  },
                  "meta": {
                    "argumentCount": 0,
                    "isDataValue": true
                  }
                }
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "systemInfo",
        "value": "{\n  \"date\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"93263cc5-2ebc-4c65-ad44-ccc0567a0930\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 146,\n        \"line\": 6,\n        \"column\": 9\n      },\n      \"end\": {\n        \"offset\": 159,\n        \"line\": 6,\n        \"column\": 22\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"241aaddb-4cd3-497f-a33a-8e5e86e4eb64\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 152,\n              \"line\": 6,\n              \"column\": 15\n            },\n            \"end\": {\n              \"offset\": 159,\n              \"line\": 6,\n              \"column\": 22\n            }\n          },\n          \"content\": \"getDate\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getDate\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"user\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"0d5cc964-24f4-431b-b8f4-4c0aab872c2c\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 169,\n        \"line\": 7,\n        \"column\": 9\n      },\n      \"end\": {\n        \"offset\": 182,\n        \"line\": 7,\n        \"column\": 22\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"9705bd14-5758-4ae4-b895-56ba284b8559\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 175,\n              \"line\": 7,\n              \"column\": 15\n            },\n            \"end\": {\n              \"offset\": 182,\n              \"line\": 7,\n              \"column\": 22\n            }\n          },\n          \"content\": \"getUser\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getUser\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"status\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"28d59768-7da2-49ab-af41-cec6fe529b80\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 194,\n        \"line\": 8,\n        \"column\": 11\n      },\n      \"end\": {\n        \"offset\": 209,\n        \"line\": 8,\n        \"column\": 26\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"f6424dec-6ea9-4602-b190-d890d1513da8\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 200,\n              \"line\": 8,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 209,\n              \"line\": 8,\n              \"column\": 26\n            }\n          },\n          \"content\": \"getStatus\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getStatus\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"nested\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"backup_date\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"cb3859f6-b46c-48c4-bb2c-01a1f9da93a3\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 240,\n            \"line\": 10,\n            \"column\": 18\n          },\n          \"end\": {\n            \"offset\": 253,\n            \"line\": 10,\n            \"column\": 31\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runExec\",\n        \"source\": \"exec\",\n        \"values\": {\n          \"identifier\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"b605c4f5-c78b-4b99-a717-e4d0a7f062a7\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 246,\n                  \"line\": 10,\n                  \"column\": 24\n                },\n                \"end\": {\n                  \"offset\": 253,\n                  \"line\": 10,\n                  \"column\": 31\n                }\n              },\n              \"content\": \"getDate\"\n            }\n          ],\n          \"args\": []\n        },\n        \"raw\": {\n          \"identifier\": \"getDate\",\n          \"args\": []\n        },\n        \"meta\": {\n          \"argumentCount\": 0,\n          \"isDataValue\": true\n        }\n      },\n      \"backup_user\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"11c70c36-39fc-4a22-a786-11b15d1666a0\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 272,\n            \"line\": 11,\n            \"column\": 18\n          },\n          \"end\": {\n            \"offset\": 288,\n            \"line\": 12,\n            \"column\": 3\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runExec\",\n        \"source\": \"exec\",\n        \"values\": {\n          \"identifier\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"2845ac3c-cf94-43b3-a8f6-cd2e1f93304a\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 278,\n                  \"line\": 11,\n                  \"column\": 24\n                },\n                \"end\": {\n                  \"offset\": 288,\n                  \"line\": 12,\n                  \"column\": 3\n                }\n              },\n              \"content\": \"getUser\"\n            }\n          ],\n          \"args\": []\n        },\n        \"raw\": {\n          \"identifier\": \"getUser\",\n          \"args\": []\n        },\n        \"meta\": {\n          \"argumentCount\": 0,\n          \"isDataValue\": true\n        }\n      }\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 4
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "2f66495f-8b76-4757-ae8c-64d4524260a9",
      "location": {
        "start": {
          "offset": 291,
          "line": 13,
          "column": 2
        },
        "end": {
          "offset": 293,
          "line": 15,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "38ab9311-1e50-4909-9b91-c4b80dddd247",
      "location": {
        "start": {
          "offset": 293,
          "line": 15,
          "column": 1
        },
        "end": {
          "offset": 497,
          "line": 22,
          "column": 42
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "Text",
            "nodeId": "811803af-f45c-4113-aea3-e19d39ed37a0",
            "location": {
              "start": {
                "offset": 300,
                "line": 15,
                "column": 8
              },
              "end": {
                "offset": 326,
                "line": 16,
                "column": 7
              }
            },
            "content": "System Information:\nDate: "
          },
          {
            "type": "VariableReference",
            "nodeId": "ec502f7a-de27-4dbf-bd82-bf2d25a92c02",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "date"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "9c0f8d83-e299-4d7e-9577-3248aa5f51c8",
            "location": {
              "start": {
                "offset": 345,
                "line": 16,
                "column": 26
              },
              "end": {
                "offset": 352,
                "line": 17,
                "column": 7
              }
            },
            "content": "\nUser: "
          },
          {
            "type": "VariableReference",
            "nodeId": "187709b8-12aa-49f5-a6a2-615cf2cb3fb4",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "user"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "907c705c-170c-4ac2-89b6-f046ecf1ffdb",
            "location": {
              "start": {
                "offset": 371,
                "line": 17,
                "column": 26
              },
              "end": {
                "offset": 380,
                "line": 18,
                "column": 9
              }
            },
            "content": "\nStatus: "
          },
          {
            "type": "VariableReference",
            "nodeId": "63d87dc7-1c2e-477d-a649-f04563ff101e",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "status"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "795ffa2e-66eb-4fcf-a3d5-b71d0018a879",
            "location": {
              "start": {
                "offset": 401,
                "line": 18,
                "column": 30
              },
              "end": {
                "offset": 422,
                "line": 21,
                "column": 7
              }
            },
            "content": "\n\nBackup Info:\nDate: "
          },
          {
            "type": "VariableReference",
            "nodeId": "667cfe24-7f1a-4712-b6c5-3bd29dbbe6ff",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "backup_date"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "ea448013-c3ec-4435-8629-db65cbfd32e1",
            "location": {
              "start": {
                "offset": 455,
                "line": 21,
                "column": 40
              },
              "end": {
                "offset": 462,
                "line": 22,
                "column": 7
              }
            },
            "content": "\nUser: "
          },
          {
            "type": "VariableReference",
            "nodeId": "b43279ba-aeca-4b2e-b5a7-94a38e34e1eb",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "backup_user"
              }
            ]
          }
        ]
      },
      "raw": {
        "content": "System Information:\nDate: {{systemInfo}}\nUser: {{systemInfo}}\nStatus: {{systemInfo}}\n\nBackup Info:\nDate: {{systemInfo}}\nUser: {{systemInfo}}"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ],
  "parseError": null
}