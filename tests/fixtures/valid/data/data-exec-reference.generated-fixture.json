{
  "name": "data-exec-reference",
  "description": "Test fixture for valid/data-exec-reference",
  "category": "valid",
  "subcategory": "data-exec-reference",
  "input": "@exec getDate = @run [echo \"2024-01-15\"]\n@exec getUser = @run [echo \"admin\"]\n@exec getStatus = @run [echo \"active\"]\n\n@data systemInfo = {\n  date: @run @getDate,\n  user: @run @getUser,\n  status: @run @getStatus,\n  nested: {\n    backup_date: @run @getDate,\n    backup_user: @run @getUser\n  }\n}\n\n@add [[System Information:\nDate: {{systemInfo.date}}\nUser: {{systemInfo.user}}\nStatus: {{systemInfo.status}}\n\nBackup Info:\nDate: {{systemInfo.nested.backup_date}}\nUser: {{systemInfo.nested.backup_user}}]]",
  "expected": "System Information:\nDate: 2024-01-15\nUser: admin\nStatus: active\n\nBackup Info:\nDate: 2024-01-15\nUser: admin",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "159a6338-40d6-4a70-a070-cbe29122509b",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 40,
          "line": 1,
          "column": 41
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "9adc9b8e-f441-47a1-bfd6-337ff11fceb0",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 40,
                "line": 1,
                "column": 41
              }
            },
            "content": "getDate"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "dffbed16-e08b-46c6-9f38-3f9fd6a08bd2",
            "location": {
              "start": {
                "offset": 22,
                "line": 1,
                "column": 23
              },
              "end": {
                "offset": 39,
                "line": 1,
                "column": 40
              }
            },
            "content": "echo \"2024-01-15\""
          }
        ]
      },
      "raw": {
        "identifier": "getDate",
        "params": [],
        "command": "echo \"2024-01-15\""
      },
      "meta": {
        "parameterCount": 0,
        "commandType": "command"
      }
    },
    {
      "type": "Newline",
      "nodeId": "217d1133-0c83-4161-8849-bca88842a844",
      "location": {
        "start": {
          "offset": 40,
          "line": 1,
          "column": 41
        },
        "end": {
          "offset": 41,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "17639e2b-6bcc-41f7-8a25-fe951e4ed5ef",
      "location": {
        "start": {
          "offset": 41,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 76,
          "line": 2,
          "column": 36
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "b814bfbb-71bd-4671-b60f-7832dabc32a1",
            "location": {
              "start": {
                "offset": 41,
                "line": 2,
                "column": 1
              },
              "end": {
                "offset": 76,
                "line": 2,
                "column": 36
              }
            },
            "content": "getUser"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "0e2bcfa6-7b1d-475b-8325-c628a5b265aa",
            "location": {
              "start": {
                "offset": 63,
                "line": 2,
                "column": 23
              },
              "end": {
                "offset": 75,
                "line": 2,
                "column": 35
              }
            },
            "content": "echo \"admin\""
          }
        ]
      },
      "raw": {
        "identifier": "getUser",
        "params": [],
        "command": "echo \"admin\""
      },
      "meta": {
        "parameterCount": 0,
        "commandType": "command"
      }
    },
    {
      "type": "Newline",
      "nodeId": "98025334-1009-4f6a-a86d-30d2509bd7a4",
      "location": {
        "start": {
          "offset": 76,
          "line": 2,
          "column": 36
        },
        "end": {
          "offset": 77,
          "line": 3,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "cd21cc6e-2fce-41e2-ab02-cd627454536c",
      "location": {
        "start": {
          "offset": 77,
          "line": 3,
          "column": 1
        },
        "end": {
          "offset": 115,
          "line": 3,
          "column": 39
        }
      },
      "kind": "exec",
      "subtype": "execCommand",
      "source": "command",
      "values": {
        "identifier": [
          {
            "type": "Text",
            "nodeId": "67578df1-a053-43d3-bcbd-ddd40e54c14d",
            "location": {
              "start": {
                "offset": 77,
                "line": 3,
                "column": 1
              },
              "end": {
                "offset": 115,
                "line": 3,
                "column": 39
              }
            },
            "content": "getStatus"
          }
        ],
        "params": [],
        "command": [
          {
            "type": "Text",
            "nodeId": "179b16e2-b710-4abc-8321-e000c37985ae",
            "location": {
              "start": {
                "offset": 101,
                "line": 3,
                "column": 25
              },
              "end": {
                "offset": 114,
                "line": 3,
                "column": 38
              }
            },
            "content": "echo \"active\""
          }
        ]
      },
      "raw": {
        "identifier": "getStatus",
        "params": [],
        "command": "echo \"active\""
      },
      "meta": {
        "parameterCount": 0,
        "commandType": "command"
      }
    },
    {
      "type": "Text",
      "nodeId": "0279acd5-2c7e-4bcd-a380-755bae37e1be",
      "location": {
        "start": {
          "offset": 115,
          "line": 3,
          "column": 39
        },
        "end": {
          "offset": 117,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "a54b58ed-b8b1-465c-ae7e-84943691da7e",
      "location": {
        "start": {
          "offset": 117,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 291,
          "line": 13,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "17f3c51a-16b7-42fa-8e65-b88a1ae644c9",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "systemInfo"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "date": {
              "type": "Directive",
              "nodeId": "959e27a1-4610-4d99-b044-5cf272e83dc4",
              "location": {
                "start": {
                  "offset": 146,
                  "line": 6,
                  "column": 9
                },
                "end": {
                  "offset": 159,
                  "line": 6,
                  "column": 22
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "8486340f-c6dd-40ad-bbe8-34b2a998e703",
                    "location": {
                      "start": {
                        "offset": 152,
                        "line": 6,
                        "column": 15
                      },
                      "end": {
                        "offset": 159,
                        "line": 6,
                        "column": 22
                      }
                    },
                    "content": "getDate"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getDate",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "user": {
              "type": "Directive",
              "nodeId": "47a6c78d-1b59-49f4-baae-9ce6f01c8d98",
              "location": {
                "start": {
                  "offset": 169,
                  "line": 7,
                  "column": 9
                },
                "end": {
                  "offset": 182,
                  "line": 7,
                  "column": 22
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "498b5f8c-8052-40ad-844b-65365b7dae79",
                    "location": {
                      "start": {
                        "offset": 175,
                        "line": 7,
                        "column": 15
                      },
                      "end": {
                        "offset": 182,
                        "line": 7,
                        "column": 22
                      }
                    },
                    "content": "getUser"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getUser",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "status": {
              "type": "Directive",
              "nodeId": "20819291-66c0-420d-abd0-3463bbf11aaa",
              "location": {
                "start": {
                  "offset": 194,
                  "line": 8,
                  "column": 11
                },
                "end": {
                  "offset": 209,
                  "line": 8,
                  "column": 26
                }
              },
              "kind": "run",
              "subtype": "runExec",
              "source": "exec",
              "values": {
                "identifier": [
                  {
                    "type": "Text",
                    "nodeId": "b3a3f1f2-ec29-4f4f-b5c5-88f58ac9d8e6",
                    "location": {
                      "start": {
                        "offset": 200,
                        "line": 8,
                        "column": 17
                      },
                      "end": {
                        "offset": 209,
                        "line": 8,
                        "column": 26
                      }
                    },
                    "content": "getStatus"
                  }
                ],
                "args": []
              },
              "raw": {
                "identifier": "getStatus",
                "args": []
              },
              "meta": {
                "argumentCount": 0,
                "isDataValue": true
              }
            },
            "nested": {
              "type": "object",
              "properties": {
                "backup_date": {
                  "type": "Directive",
                  "nodeId": "77fc0f41-821c-40cb-a808-c6462aef0ba2",
                  "location": {
                    "start": {
                      "offset": 240,
                      "line": 10,
                      "column": 18
                    },
                    "end": {
                      "offset": 253,
                      "line": 10,
                      "column": 31
                    }
                  },
                  "kind": "run",
                  "subtype": "runExec",
                  "source": "exec",
                  "values": {
                    "identifier": [
                      {
                        "type": "Text",
                        "nodeId": "26652e1a-00ff-4de2-b063-2615acc19778",
                        "location": {
                          "start": {
                            "offset": 246,
                            "line": 10,
                            "column": 24
                          },
                          "end": {
                            "offset": 253,
                            "line": 10,
                            "column": 31
                          }
                        },
                        "content": "getDate"
                      }
                    ],
                    "args": []
                  },
                  "raw": {
                    "identifier": "getDate",
                    "args": []
                  },
                  "meta": {
                    "argumentCount": 0,
                    "isDataValue": true
                  }
                },
                "backup_user": {
                  "type": "Directive",
                  "nodeId": "0ac238a7-d190-4082-8ba4-272b8a2fca29",
                  "location": {
                    "start": {
                      "offset": 272,
                      "line": 11,
                      "column": 18
                    },
                    "end": {
                      "offset": 288,
                      "line": 12,
                      "column": 3
                    }
                  },
                  "kind": "run",
                  "subtype": "runExec",
                  "source": "exec",
                  "values": {
                    "identifier": [
                      {
                        "type": "Text",
                        "nodeId": "05913ac2-dc79-4482-ad58-5100e67fb09a",
                        "location": {
                          "start": {
                            "offset": 278,
                            "line": 11,
                            "column": 24
                          },
                          "end": {
                            "offset": 288,
                            "line": 12,
                            "column": 3
                          }
                        },
                        "content": "getUser"
                      }
                    ],
                    "args": []
                  },
                  "raw": {
                    "identifier": "getUser",
                    "args": []
                  },
                  "meta": {
                    "argumentCount": 0,
                    "isDataValue": true
                  }
                }
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "systemInfo",
        "value": "{\n  \"date\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"959e27a1-4610-4d99-b044-5cf272e83dc4\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 146,\n        \"line\": 6,\n        \"column\": 9\n      },\n      \"end\": {\n        \"offset\": 159,\n        \"line\": 6,\n        \"column\": 22\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"8486340f-c6dd-40ad-bbe8-34b2a998e703\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 152,\n              \"line\": 6,\n              \"column\": 15\n            },\n            \"end\": {\n              \"offset\": 159,\n              \"line\": 6,\n              \"column\": 22\n            }\n          },\n          \"content\": \"getDate\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getDate\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"user\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"47a6c78d-1b59-49f4-baae-9ce6f01c8d98\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 169,\n        \"line\": 7,\n        \"column\": 9\n      },\n      \"end\": {\n        \"offset\": 182,\n        \"line\": 7,\n        \"column\": 22\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"498b5f8c-8052-40ad-844b-65365b7dae79\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 175,\n              \"line\": 7,\n              \"column\": 15\n            },\n            \"end\": {\n              \"offset\": 182,\n              \"line\": 7,\n              \"column\": 22\n            }\n          },\n          \"content\": \"getUser\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getUser\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"status\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"20819291-66c0-420d-abd0-3463bbf11aaa\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 194,\n        \"line\": 8,\n        \"column\": 11\n      },\n      \"end\": {\n        \"offset\": 209,\n        \"line\": 8,\n        \"column\": 26\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runExec\",\n    \"source\": \"exec\",\n    \"values\": {\n      \"identifier\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"b3a3f1f2-ec29-4f4f-b5c5-88f58ac9d8e6\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 200,\n              \"line\": 8,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 209,\n              \"line\": 8,\n              \"column\": 26\n            }\n          },\n          \"content\": \"getStatus\"\n        }\n      ],\n      \"args\": []\n    },\n    \"raw\": {\n      \"identifier\": \"getStatus\",\n      \"args\": []\n    },\n    \"meta\": {\n      \"argumentCount\": 0,\n      \"isDataValue\": true\n    }\n  },\n  \"nested\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"backup_date\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"77fc0f41-821c-40cb-a808-c6462aef0ba2\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 240,\n            \"line\": 10,\n            \"column\": 18\n          },\n          \"end\": {\n            \"offset\": 253,\n            \"line\": 10,\n            \"column\": 31\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runExec\",\n        \"source\": \"exec\",\n        \"values\": {\n          \"identifier\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"26652e1a-00ff-4de2-b063-2615acc19778\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 246,\n                  \"line\": 10,\n                  \"column\": 24\n                },\n                \"end\": {\n                  \"offset\": 253,\n                  \"line\": 10,\n                  \"column\": 31\n                }\n              },\n              \"content\": \"getDate\"\n            }\n          ],\n          \"args\": []\n        },\n        \"raw\": {\n          \"identifier\": \"getDate\",\n          \"args\": []\n        },\n        \"meta\": {\n          \"argumentCount\": 0,\n          \"isDataValue\": true\n        }\n      },\n      \"backup_user\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"0ac238a7-d190-4082-8ba4-272b8a2fca29\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 272,\n            \"line\": 11,\n            \"column\": 18\n          },\n          \"end\": {\n            \"offset\": 288,\n            \"line\": 12,\n            \"column\": 3\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runExec\",\n        \"source\": \"exec\",\n        \"values\": {\n          \"identifier\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"05913ac2-dc79-4482-ad58-5100e67fb09a\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 278,\n                  \"line\": 11,\n                  \"column\": 24\n                },\n                \"end\": {\n                  \"offset\": 288,\n                  \"line\": 12,\n                  \"column\": 3\n                }\n              },\n              \"content\": \"getUser\"\n            }\n          ],\n          \"args\": []\n        },\n        \"raw\": {\n          \"identifier\": \"getUser\",\n          \"args\": []\n        },\n        \"meta\": {\n          \"argumentCount\": 0,\n          \"isDataValue\": true\n        }\n      }\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 4
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "0a0c7ad9-dcf3-477e-849c-69c8fa7bad70",
      "location": {
        "start": {
          "offset": 291,
          "line": 13,
          "column": 2
        },
        "end": {
          "offset": 293,
          "line": 15,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "75f79a41-ecbd-44e4-8085-5798dacfa84b",
      "location": {
        "start": {
          "offset": 293,
          "line": 15,
          "column": 1
        },
        "end": {
          "offset": 497,
          "line": 22,
          "column": 42
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "Text",
            "nodeId": "a362814a-9932-4d41-83ce-3f1fa88b84f7",
            "location": {
              "start": {
                "offset": 300,
                "line": 15,
                "column": 8
              },
              "end": {
                "offset": 326,
                "line": 16,
                "column": 7
              }
            },
            "content": "System Information:\nDate: "
          },
          {
            "type": "VariableReference",
            "nodeId": "8066cb0b-ac09-4b73-9b19-2f1b083dffa0",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "date"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "74ac507c-28e3-4d93-aef0-d32c8cf1e5d2",
            "location": {
              "start": {
                "offset": 345,
                "line": 16,
                "column": 26
              },
              "end": {
                "offset": 352,
                "line": 17,
                "column": 7
              }
            },
            "content": "\nUser: "
          },
          {
            "type": "VariableReference",
            "nodeId": "794e5abf-06ad-405b-a9b6-b472b8d8be6f",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "user"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "fbdee77d-1a35-421e-9492-2e9b0d0b6d74",
            "location": {
              "start": {
                "offset": 371,
                "line": 17,
                "column": 26
              },
              "end": {
                "offset": 380,
                "line": 18,
                "column": 9
              }
            },
            "content": "\nStatus: "
          },
          {
            "type": "VariableReference",
            "nodeId": "1fc971b2-3e25-409b-a9d4-834f53c4f4a1",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "status"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "c05060d6-612d-4dc9-897c-392931046c58",
            "location": {
              "start": {
                "offset": 401,
                "line": 18,
                "column": 30
              },
              "end": {
                "offset": 422,
                "line": 21,
                "column": 7
              }
            },
            "content": "\n\nBackup Info:\nDate: "
          },
          {
            "type": "VariableReference",
            "nodeId": "a92ab9e5-b61c-411a-bb76-0df528a19988",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "backup_date"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "e840deef-9913-49cd-9911-217b220f8c5c",
            "location": {
              "start": {
                "offset": 455,
                "line": 21,
                "column": 40
              },
              "end": {
                "offset": 462,
                "line": 22,
                "column": 7
              }
            },
            "content": "\nUser: "
          },
          {
            "type": "VariableReference",
            "nodeId": "71d07e9d-45e2-4c26-8131-d9c1fe144baa",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "systemInfo",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "backup_user"
              }
            ]
          }
        ]
      },
      "raw": {
        "content": "System Information:\nDate: {{systemInfo}}\nUser: {{systemInfo}}\nStatus: {{systemInfo}}\n\nBackup Info:\nDate: {{systemInfo}}\nUser: {{systemInfo}}"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ],
  "parseError": null
}