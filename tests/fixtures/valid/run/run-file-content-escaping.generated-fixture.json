{
  "name": "run-file-content-escaping",
  "description": "Test fixture for valid/run-file-content-escaping",
  "category": "valid",
  "subcategory": "run-file-content-escaping",
  "input": "# Test File Content in Commands\n\nThis tests passing file content to external commands.\n\n@text test_file = [test-file.md]\n\n>> File content should be properly escaped when passed to commands\n@run [echo \"@test_file\"]",
  "expected": "# Test File Content in Commands\n\nThis tests passing file content to external commands.\n\n>> File content should be properly escaped when passed to commands\n# Test File\n\nThis file contains @mlld syntax that should not be interpreted.\n\n@text example = \"This should not execute\"\n@run [echo \"This should not run\"]\n\nIt also has $SHELL_VARS and `backticks` and 'quotes'.",
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Text",
      "nodeId": "node-1",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 88,
          "line": 5,
          "column": 1
        }
      },
      "content": "# Test File Content in Commands\n\nThis tests passing file content to external commands.\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "node-2",
      "location": {
        "start": {
          "offset": 88,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 120,
          "line": 5,
          "column": 33
        }
      },
      "kind": "text",
      "subtype": "textPath",
      "source": "path",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "node-3",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "test_file"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "node-4",
            "location": {
              "start": {
                "offset": 107,
                "line": 5,
                "column": 20
              },
              "end": {
                "offset": 119,
                "line": 5,
                "column": 32
              }
            },
            "content": "test-file.md"
          }
        ]
      },
      "raw": {
        "identifier": "test_file",
        "path": "test-file.md"
      },
      "meta": {
        "sourceType": "path",
        "hasVariables": false
      }
    },
    {
      "type": "Text",
      "nodeId": "node-5",
      "location": {
        "start": {
          "offset": 120,
          "line": 5,
          "column": 33
        },
        "end": {
          "offset": 122,
          "line": 7,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Comment",
      "nodeId": "node-6",
      "location": {
        "start": {
          "offset": 122,
          "line": 7,
          "column": 1
        },
        "end": {
          "offset": 189,
          "line": 8,
          "column": 1
        }
      },
      "content": "File content should be properly escaped when passed to commands",
      "marker": ">>"
    },
    {
      "type": "Directive",
      "nodeId": "node-7",
      "location": {
        "start": {
          "offset": 189,
          "line": 8,
          "column": 1
        },
        "end": {
          "offset": 213,
          "line": 8,
          "column": 25
        }
      },
      "kind": "run",
      "subtype": "runCommand",
      "source": "command",
      "values": {
        "command": [
          {
            "type": "Text",
            "nodeId": "node-8",
            "location": {
              "start": {
                "offset": 195,
                "line": 8,
                "column": 7
              },
              "end": {
                "offset": 201,
                "line": 8,
                "column": 13
              }
            },
            "content": "echo \""
          },
          {
            "type": "VariableReference",
            "nodeId": "node-9",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "test_file"
          },
          {
            "type": "Text",
            "nodeId": "node-10",
            "location": {
              "start": {
                "offset": 211,
                "line": 8,
                "column": 23
              },
              "end": {
                "offset": 212,
                "line": 8,
                "column": 24
              }
            },
            "content": "\""
          }
        ],
        "commandBases": [
          {
            "nodeId": "node-11",
            "location": {
              "start": {
                "offset": 194,
                "line": 8,
                "column": 6
              },
              "end": {
                "offset": 213,
                "line": 8,
                "column": 25
              }
            },
            "command": "echo"
          }
        ]
      },
      "raw": {
        "command": "echo \"@test_file\"",
        "commandBases": [
          "echo"
        ]
      },
      "meta": {
        "hasVariables": true,
        "commandCount": 1,
        "hasScriptRunner": false,
        "isMultiLine": false
      }
    }
  ],
  "parseError": null
}