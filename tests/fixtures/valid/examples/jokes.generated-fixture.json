{
  "name": "jokes",
  "description": "Test fixture for valid/examples",
  "category": "valid",
  "subcategory": "examples",
  "input": "@text joke_1 = @run [oneshot \"Tell me a joke\"]\n\n@text joke_2 = @run [oneshot \"Tell me a joke\"]\n\n@text joke_3 = @run [oneshot \"Tell me a joke\"]\n\n@text joke_4 = @run [oneshot \"Tell me a joke\"]\n\n@text evaluation = [[\n    Which joke is the funniest?\n    {{joke_1}}\n    {{joke_2}}\n    {{joke_3}}\n    {{joke_4}}\n]]\n\n@run [oneshot \"@evaluation\"]",
  "expected": null,
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": "\n\nINFO: \nNote: If using prompts with exclamation points (!), use single quotes to avoid shell issues:\nINFO:   oneshot 'Hello, world!' -m claude-3-7-sonnet-latest\n\nI can only see one joke being presented here:\n\n\"Why don't scientists trust atoms? Because they make up everything!\"\n\nThis is a classic science pun that plays on the dual meaning of \"make up\" - atoms literally constitute everything in the physical world, while the phrase \"making things up\" also means fabricating or lying about something. It's a clever wordplay that connects scientific knowledge with the concept of trustworthiness.\n\nSince this is the only joke provided in your message (repeated four times with checkmarks indicating it was a response from Claude), I cannot compare multiple jokes to determine which is funniest. If you'd like me to evaluate multiple jokes against each other, please share several different jokes, and I'd be happy to discuss their humor elements and which might be considered funnier.\nâœ“ Response from claude\n",
  "ast": [
    {
      "type": "Directive",
      "nodeId": "3e5f3662-61bf-4cb5-b2d3-cf1c7468402f",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 46,
          "line": 1,
          "column": 47
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "3c845ed4-07f8-4c0c-bd91-c3d72b3d06de",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "joke_1"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "7ad9a8b9-01c9-419b-a2e8-ce7bef6f0ecd",
            "location": {
              "start": {
                "offset": 21,
                "line": 1,
                "column": 22
              },
              "end": {
                "offset": 45,
                "line": 1,
                "column": 46
              }
            },
            "content": "oneshot \"Tell me a joke\""
          }
        ]
      },
      "raw": {
        "identifier": "joke_1",
        "content": "@run oneshot \"Tell me a joke\""
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": false,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "470fd96f-b02d-48f5-86d1-b3bf1d040987",
      "location": {
        "start": {
          "offset": 46,
          "line": 1,
          "column": 47
        },
        "end": {
          "offset": 48,
          "line": 3,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "95b991e6-deea-4a68-baf4-2f5767cf62a9",
      "location": {
        "start": {
          "offset": 48,
          "line": 3,
          "column": 1
        },
        "end": {
          "offset": 94,
          "line": 3,
          "column": 47
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "1cc0a775-cc06-430e-b69f-a7f084391160",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "joke_2"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "8c8caf82-49a4-4ae4-a477-8bb1c356f474",
            "location": {
              "start": {
                "offset": 69,
                "line": 3,
                "column": 22
              },
              "end": {
                "offset": 93,
                "line": 3,
                "column": 46
              }
            },
            "content": "oneshot \"Tell me a joke\""
          }
        ]
      },
      "raw": {
        "identifier": "joke_2",
        "content": "@run oneshot \"Tell me a joke\""
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": false,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "3336b8c5-0cc1-43c0-a02c-5123596497d5",
      "location": {
        "start": {
          "offset": 94,
          "line": 3,
          "column": 47
        },
        "end": {
          "offset": 96,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "a3e50bf3-b55c-4916-94f1-a0d9512a2ba1",
      "location": {
        "start": {
          "offset": 96,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 142,
          "line": 5,
          "column": 47
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "e8432952-107d-4388-9342-54b6fd2ae19a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "joke_3"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "986ceed5-68d5-456f-a539-1e4f3c596bee",
            "location": {
              "start": {
                "offset": 117,
                "line": 5,
                "column": 22
              },
              "end": {
                "offset": 141,
                "line": 5,
                "column": 46
              }
            },
            "content": "oneshot \"Tell me a joke\""
          }
        ]
      },
      "raw": {
        "identifier": "joke_3",
        "content": "@run oneshot \"Tell me a joke\""
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": false,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "8992f39f-c401-459a-b2ec-82c8bbbbd4dc",
      "location": {
        "start": {
          "offset": 142,
          "line": 5,
          "column": 47
        },
        "end": {
          "offset": 144,
          "line": 7,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "b3b0831e-6458-4720-aa00-56b958347bdd",
      "location": {
        "start": {
          "offset": 144,
          "line": 7,
          "column": 1
        },
        "end": {
          "offset": 190,
          "line": 7,
          "column": 47
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "92146ce6-2761-4052-a262-ce05ee9d9192",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "joke_4"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "ac4cb5f1-1afb-442d-82d9-8e9209ec3501",
            "location": {
              "start": {
                "offset": 165,
                "line": 7,
                "column": 22
              },
              "end": {
                "offset": 189,
                "line": 7,
                "column": 46
              }
            },
            "content": "oneshot \"Tell me a joke\""
          }
        ]
      },
      "raw": {
        "identifier": "joke_4",
        "content": "@run oneshot \"Tell me a joke\""
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": false,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "ab87a779-c9ad-4d73-bec2-21a1343d63e9",
      "location": {
        "start": {
          "offset": 190,
          "line": 7,
          "column": 47
        },
        "end": {
          "offset": 192,
          "line": 9,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "cb6dd568-1e93-4431-b7a9-09fe56b8e00f",
      "location": {
        "start": {
          "offset": 192,
          "line": 9,
          "column": 1
        },
        "end": {
          "offset": 308,
          "line": 15,
          "column": 3
        }
      },
      "kind": "text",
      "subtype": "textTemplate",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "8e60d7e7-40c8-4bf5-a261-ffd597ee0e69",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "evaluation"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "292ebbd1-de89-4e92-a9d6-105e8249db40",
            "location": {
              "start": {
                "offset": 213,
                "line": 9,
                "column": 22
              },
              "end": {
                "offset": 250,
                "line": 11,
                "column": 5
              }
            },
            "content": "\n    Which joke is the funniest?\n    "
          },
          {
            "type": "VariableReference",
            "nodeId": "c6562be9-0dfa-4160-bf02-dc5e1cd4069a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "joke_1"
          },
          {
            "type": "Text",
            "nodeId": "5016435f-5a24-48a4-abf7-277f6bc2a83a",
            "location": {
              "start": {
                "offset": 260,
                "line": 11,
                "column": 15
              },
              "end": {
                "offset": 265,
                "line": 12,
                "column": 5
              }
            },
            "content": "\n    "
          },
          {
            "type": "VariableReference",
            "nodeId": "f48ccfeb-489e-4586-b226-1d7628decbf6",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "joke_2"
          },
          {
            "type": "Text",
            "nodeId": "4f7c01be-4977-40fc-9e8f-695f2c1a3894",
            "location": {
              "start": {
                "offset": 275,
                "line": 12,
                "column": 15
              },
              "end": {
                "offset": 280,
                "line": 13,
                "column": 5
              }
            },
            "content": "\n    "
          },
          {
            "type": "VariableReference",
            "nodeId": "0b944c1f-f473-4955-9916-4c90c567d3ce",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "joke_3"
          },
          {
            "type": "Text",
            "nodeId": "6851e418-1e1d-4d47-b466-9bd27c07de5d",
            "location": {
              "start": {
                "offset": 290,
                "line": 13,
                "column": 15
              },
              "end": {
                "offset": 295,
                "line": 14,
                "column": 5
              }
            },
            "content": "\n    "
          },
          {
            "type": "VariableReference",
            "nodeId": "035fd780-66cd-4933-be3e-1c56c093ccd1",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "joke_4"
          },
          {
            "type": "Text",
            "nodeId": "23d99d95-e9e4-4a39-aed7-71e9514fde1c",
            "location": {
              "start": {
                "offset": 305,
                "line": 14,
                "column": 15
              },
              "end": {
                "offset": 306,
                "line": 15,
                "column": 1
              }
            },
            "content": "\n"
          }
        ]
      },
      "raw": {
        "identifier": "evaluation",
        "content": "\n    Which joke is the funniest?\n    {{joke_1}}\n    {{joke_2}}\n    {{joke_3}}\n    {{joke_4}}\n"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true
      }
    },
    {
      "type": "Text",
      "nodeId": "eddcc49e-3fa9-4ee0-9cb7-2ae6837ac67d",
      "location": {
        "start": {
          "offset": 308,
          "line": 15,
          "column": 3
        },
        "end": {
          "offset": 310,
          "line": 17,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "e64c2c99-5dec-413e-8224-f986302273d9",
      "location": {
        "start": {
          "offset": 310,
          "line": 17,
          "column": 1
        },
        "end": {
          "offset": 338,
          "line": 17,
          "column": 29
        }
      },
      "kind": "run",
      "subtype": "runCommand",
      "source": "command",
      "values": {
        "command": [
          {
            "type": "Text",
            "nodeId": "1f923afe-4bd3-4916-9e54-c885d0719f95",
            "location": {
              "start": {
                "offset": 316,
                "line": 17,
                "column": 7
              },
              "end": {
                "offset": 325,
                "line": 17,
                "column": 16
              }
            },
            "content": "oneshot \""
          },
          {
            "type": "VariableReference",
            "nodeId": "4bb4ee6b-4415-4b2a-a740-437f8787d6ac",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "evaluation"
          },
          {
            "type": "Text",
            "nodeId": "6464b49b-0bb4-4438-99bf-1dc8ab9cba3a",
            "location": {
              "start": {
                "offset": 336,
                "line": 17,
                "column": 27
              },
              "end": {
                "offset": 337,
                "line": 17,
                "column": 28
              }
            },
            "content": "\""
          }
        ],
        "commandBases": [
          {
            "nodeId": "bfe1551f-21ce-4ddb-a5e4-cd4199916eb9",
            "location": {
              "start": {
                "offset": 315,
                "line": 17,
                "column": 6
              },
              "end": {
                "offset": 338,
                "line": 17,
                "column": 29
              }
            },
            "command": "oneshot"
          }
        ]
      },
      "raw": {
        "command": "oneshot \"@evaluation\"",
        "commandBases": [
          "oneshot"
        ]
      },
      "meta": {
        "hasVariables": true,
        "commandCount": 1,
        "hasScriptRunner": false,
        "isMultiLine": false
      }
    }
  ],
  "parseError": null
}