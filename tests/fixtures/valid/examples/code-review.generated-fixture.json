{
  "name": "code-review",
  "description": "Test fixture for valid/examples",
  "category": "valid",
  "subcategory": "examples",
  "input": "@import {roles, tasks} from \"files/prompts.mld\"\n\n@text arch = @add [files/README.md # Architecture]\n@text standards = @add [files/README.md # Code Standards]\n@text diff = @run [git diff | cat]\n\n@text prompt = [[\n   Read our docs: {{arch}} {{standards}}\n   Review the latest changes: {{diff}}\n   Here's your task: {{tasks.codereview}}\n]]\n\n@run [oneshot @prompt --system @roles.architect]",
  "expected": null,
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "fca10ff1-ebf3-4cc2-833a-b734dddfefcc",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 47,
          "line": 1,
          "column": 48
        }
      },
      "kind": "import",
      "subtype": "importSelected",
      "source": "path",
      "values": {
        "imports": [
          {
            "type": "VariableReference",
            "nodeId": "06829fee-f942-4f27-9241-c1aa4030e8b7",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "import",
            "identifier": "roles"
          },
          {
            "type": "VariableReference",
            "nodeId": "4c0d2ab6-6f85-41cb-967e-d2c99ef26843",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "import",
            "identifier": "tasks"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "fafcf957-d463-4f4f-8eac-ee3ded8285cf",
            "location": {
              "start": {
                "offset": 28,
                "line": 1,
                "column": 29
              },
              "end": {
                "offset": 47,
                "line": 1,
                "column": 48
              }
            },
            "content": "files/prompts.mld"
          }
        ]
      },
      "raw": {
        "imports": "roles, tasks",
        "path": "files/prompts.mld"
      },
      "meta": {
        "path": {
          "hasVariables": false,
          "isAbsolute": false,
          "hasExtension": true,
          "extension": "mld",
          "pathSubtype": "filePath"
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "b8f10da0-37fc-4390-9e4c-3a16391f9c65",
      "location": {
        "start": {
          "offset": 47,
          "line": 1,
          "column": 48
        },
        "end": {
          "offset": 49,
          "line": 3,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "f3a24afc-b500-4b8d-a5ff-40372b2c8ba9",
      "location": {
        "start": {
          "offset": 49,
          "line": 3,
          "column": 1
        },
        "end": {
          "offset": 99,
          "line": 3,
          "column": 51
        }
      },
      "kind": "text",
      "subtype": "textPathSection",
      "source": "directive",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "2c1d394c-4dbc-4523-8eec-c755627059d3",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "arch"
          }
        ],
        "section": [
          {
            "type": "Text",
            "nodeId": "eb07e47e-8c9d-42fb-bb7c-c66038a02401",
            "location": {
              "start": {
                "offset": 49,
                "line": 3,
                "column": 1
              },
              "end": {
                "offset": 99,
                "line": 3,
                "column": 51
              }
            },
            "content": "Architecture"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "09671d9d-0905-47e1-94cc-c498b09798e3",
            "location": {
              "start": {
                "offset": 49,
                "line": 3,
                "column": 1
              },
              "end": {
                "offset": 99,
                "line": 3,
                "column": 51
              }
            },
            "content": "files/README.md"
          }
        ]
      },
      "raw": {
        "identifier": "arch",
        "section": "Architecture",
        "path": "files/README.md"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "add",
        "hasRename": false,
        "hasVariables": false
      }
    },
    {
      "type": "Newline",
      "nodeId": "6c4e2a76-ef58-4937-9da9-ef3399ffd86a",
      "location": {
        "start": {
          "offset": 99,
          "line": 3,
          "column": 51
        },
        "end": {
          "offset": 100,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "fae13084-956c-4bcc-acf0-bf4981c2175d",
      "location": {
        "start": {
          "offset": 100,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 157,
          "line": 4,
          "column": 58
        }
      },
      "kind": "text",
      "subtype": "textPathSection",
      "source": "directive",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "f6d7bbb0-1a16-400e-84fc-2b9c99192087",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "standards"
          }
        ],
        "section": [
          {
            "type": "Text",
            "nodeId": "b7b5e95a-e06a-4502-be2b-fc055b1b4dde",
            "location": {
              "start": {
                "offset": 100,
                "line": 4,
                "column": 1
              },
              "end": {
                "offset": 157,
                "line": 4,
                "column": 58
              }
            },
            "content": "Code Standards"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "9bf846d8-f30e-418a-84ca-02c4db4c4f02",
            "location": {
              "start": {
                "offset": 100,
                "line": 4,
                "column": 1
              },
              "end": {
                "offset": 157,
                "line": 4,
                "column": 58
              }
            },
            "content": "files/README.md"
          }
        ]
      },
      "raw": {
        "identifier": "standards",
        "section": "Code Standards",
        "path": "files/README.md"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "add",
        "hasRename": false,
        "hasVariables": false
      }
    },
    {
      "type": "Newline",
      "nodeId": "b318b1ed-fa2c-4e80-bf67-fdf237f95783",
      "location": {
        "start": {
          "offset": 157,
          "line": 4,
          "column": 58
        },
        "end": {
          "offset": 158,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "12797f20-0752-45ff-9c62-b7744b37d925",
      "location": {
        "start": {
          "offset": 158,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 192,
          "line": 5,
          "column": 35
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "c54276cc-8c9e-40c7-8cc0-1cd0e67eb636",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "diff"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "035fa5ca-8958-4921-836c-3eb99a3c5c47",
            "location": {
              "start": {
                "offset": 177,
                "line": 5,
                "column": 20
              },
              "end": {
                "offset": 191,
                "line": 5,
                "column": 34
              }
            },
            "content": "git diff | cat"
          }
        ]
      },
      "raw": {
        "identifier": "diff",
        "content": "@run git diff | cat"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": false,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "1459989d-3b17-4cf5-8e4f-574d64bad2c3",
      "location": {
        "start": {
          "offset": 192,
          "line": 5,
          "column": 35
        },
        "end": {
          "offset": 194,
          "line": 7,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "a707b49e-dd0d-435b-98fc-52c7afad9ebe",
      "location": {
        "start": {
          "offset": 194,
          "line": 7,
          "column": 1
        },
        "end": {
          "offset": 336,
          "line": 11,
          "column": 3
        }
      },
      "kind": "text",
      "subtype": "textTemplate",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "556ee9b9-61bb-4f7c-ba35-b745f7b08dc9",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "prompt"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "b017482e-d432-484a-ad36-267eead4de7c",
            "location": {
              "start": {
                "offset": 211,
                "line": 7,
                "column": 18
              },
              "end": {
                "offset": 230,
                "line": 8,
                "column": 19
              }
            },
            "content": "\n   Read our docs: "
          },
          {
            "type": "VariableReference",
            "nodeId": "e90ab944-9401-4dc2-b88f-01b35b23ffed",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "arch"
          },
          {
            "type": "Text",
            "nodeId": "4ac4dcc9-7bc5-405d-976f-08048445bf59",
            "location": {
              "start": {
                "offset": 238,
                "line": 8,
                "column": 27
              },
              "end": {
                "offset": 239,
                "line": 8,
                "column": 28
              }
            },
            "content": " "
          },
          {
            "type": "VariableReference",
            "nodeId": "58d5d84b-0789-4b23-a5a6-72d961d042e0",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "standards"
          },
          {
            "type": "Text",
            "nodeId": "87b5d07e-9abc-442d-9444-7985d87f6d05",
            "location": {
              "start": {
                "offset": 252,
                "line": 8,
                "column": 41
              },
              "end": {
                "offset": 283,
                "line": 9,
                "column": 31
              }
            },
            "content": "\n   Review the latest changes: "
          },
          {
            "type": "VariableReference",
            "nodeId": "f1c9c86c-f679-47a7-8b5a-be65183be7d0",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "diff"
          },
          {
            "type": "Text",
            "nodeId": "625ce8a7-41b0-428b-b54f-47674774506f",
            "location": {
              "start": {
                "offset": 291,
                "line": 9,
                "column": 39
              },
              "end": {
                "offset": 313,
                "line": 10,
                "column": 22
              }
            },
            "content": "\n   Here's your task: "
          },
          {
            "type": "VariableReference",
            "nodeId": "1d100888-cec5-4fad-9f27-3e03d7b04321",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "tasks",
            "fields": [
              {
                "type": "field",
                "name": "codereview"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "48b2eed6-bbd5-4bda-89a6-35b1a5e81fe2",
            "location": {
              "start": {
                "offset": 333,
                "line": 10,
                "column": 42
              },
              "end": {
                "offset": 334,
                "line": 11,
                "column": 1
              }
            },
            "content": "\n"
          }
        ]
      },
      "raw": {
        "identifier": "prompt",
        "content": "\n   Read our docs: {{arch}} {{standards}}\n   Review the latest changes: {{diff}}\n   Here's your task: {{tasks}}\n"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true
      }
    },
    {
      "type": "Text",
      "nodeId": "62bce327-747a-4920-8187-e68c8c799233",
      "location": {
        "start": {
          "offset": 336,
          "line": 11,
          "column": 3
        },
        "end": {
          "offset": 338,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "888f893d-83ac-4e5f-a770-41b7dfdfc7f6",
      "location": {
        "start": {
          "offset": 338,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 386,
          "line": 13,
          "column": 49
        }
      },
      "kind": "run",
      "subtype": "runCommand",
      "source": "command",
      "values": {
        "command": [
          {
            "type": "Text",
            "nodeId": "07c39e4b-da5a-4890-b66a-811f5f5889f3",
            "location": {
              "start": {
                "offset": 344,
                "line": 13,
                "column": 7
              },
              "end": {
                "offset": 352,
                "line": 13,
                "column": 15
              }
            },
            "content": "oneshot "
          },
          {
            "type": "VariableReference",
            "nodeId": "b0482648-5d96-4b30-9e48-1c9d0b48ae98",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "prompt"
          },
          {
            "type": "Text",
            "nodeId": "0f26393d-218b-4335-a7e8-4a1c285f3e36",
            "location": {
              "start": {
                "offset": 359,
                "line": 13,
                "column": 22
              },
              "end": {
                "offset": 369,
                "line": 13,
                "column": 32
              }
            },
            "content": " --system "
          },
          {
            "type": "VariableReference",
            "nodeId": "efc07345-d983-41c3-bb06-818dedda6a84",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "roles",
            "fields": [
              {
                "type": "field",
                "name": "architect"
              }
            ]
          }
        ],
        "commandBases": [
          {
            "nodeId": "71ad7f1e-e8e9-4f7d-b02d-25874a4b8c95",
            "location": {
              "start": {
                "offset": 343,
                "line": 13,
                "column": 6
              },
              "end": {
                "offset": 386,
                "line": 13,
                "column": 49
              }
            },
            "command": "oneshot"
          }
        ]
      },
      "raw": {
        "command": "oneshot @prompt --system @roles",
        "commandBases": [
          "oneshot"
        ]
      },
      "meta": {
        "hasVariables": true,
        "commandCount": 1,
        "hasScriptRunner": false,
        "isMultiLine": false
      }
    }
  ],
  "parseError": null
}