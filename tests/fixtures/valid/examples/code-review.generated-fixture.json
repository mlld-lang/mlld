{
  "name": "code-review",
  "description": "Test fixture for valid/examples",
  "category": "valid",
  "subcategory": "examples",
  "input": "@import {roles, tasks} from \"files/prompts.mld\"\n\n@text arch = @add [files/README.md # Architecture]\n@text standards = @add [files/README.md # Code Standards]\n@text diff = @run [git diff | cat]\n\n@text prompt = [[\n   Read our docs: {{arch}} {{standards}}\n   Review the latest changes: {{diff}}\n   Here's your task: {{tasks.codereview}}\n]]\n\n@run [oneshot @prompt --system @roles.architect]",
  "expected": null,
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "8249dd80-d76c-40d5-a70f-f72cfa536ccb",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 47,
          "line": 1,
          "column": 48
        }
      },
      "kind": "import",
      "subtype": "importSelected",
      "source": "path",
      "values": {
        "imports": [
          {
            "type": "VariableReference",
            "nodeId": "3782939f-d91a-443a-a81d-e3cb41e1782a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "import",
            "identifier": "roles"
          },
          {
            "type": "VariableReference",
            "nodeId": "200221bf-ff0a-467e-aac7-dd6c6664f754",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "import",
            "identifier": "tasks"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "93d99264-d799-4e1d-9dbd-5313132ff914",
            "location": {
              "start": {
                "offset": 28,
                "line": 1,
                "column": 29
              },
              "end": {
                "offset": 47,
                "line": 1,
                "column": 48
              }
            },
            "content": "files/prompts.mld"
          }
        ]
      },
      "raw": {
        "imports": "roles, tasks",
        "path": "files/prompts.mld"
      },
      "meta": {
        "path": {
          "hasVariables": false,
          "isAbsolute": false,
          "hasExtension": true,
          "extension": "mld",
          "pathSubtype": "filePath"
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "128d488d-9d69-4679-a430-4288d83aab30",
      "location": {
        "start": {
          "offset": 47,
          "line": 1,
          "column": 48
        },
        "end": {
          "offset": 49,
          "line": 3,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "ed233750-c723-4462-8d51-f853c9d2761a",
      "location": {
        "start": {
          "offset": 49,
          "line": 3,
          "column": 1
        },
        "end": {
          "offset": 99,
          "line": 3,
          "column": 51
        }
      },
      "kind": "text",
      "subtype": "textPathSection",
      "source": "directive",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "7e862ca2-462f-42ab-8aef-0196a64c9a98",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "arch"
          }
        ],
        "section": [
          {
            "type": "Text",
            "nodeId": "c68111a0-f3ab-4888-978c-23a9481d61fe",
            "location": {
              "start": {
                "offset": 49,
                "line": 3,
                "column": 1
              },
              "end": {
                "offset": 99,
                "line": 3,
                "column": 51
              }
            },
            "content": "Architecture"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "56e3549d-fcb8-49b6-be7f-815cb81a092c",
            "location": {
              "start": {
                "offset": 49,
                "line": 3,
                "column": 1
              },
              "end": {
                "offset": 99,
                "line": 3,
                "column": 51
              }
            },
            "content": "files/README.md"
          }
        ]
      },
      "raw": {
        "identifier": "arch",
        "section": "Architecture",
        "path": "files/README.md"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "add",
        "hasRename": false,
        "hasVariables": false
      }
    },
    {
      "type": "Newline",
      "nodeId": "05236bb3-573c-4079-95b3-cfdd476943b7",
      "location": {
        "start": {
          "offset": 99,
          "line": 3,
          "column": 51
        },
        "end": {
          "offset": 100,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "c0d747d5-a213-4b39-b34b-34af6a65d0f3",
      "location": {
        "start": {
          "offset": 100,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 157,
          "line": 4,
          "column": 58
        }
      },
      "kind": "text",
      "subtype": "textPathSection",
      "source": "directive",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "5c6db062-2122-470a-95b2-c5b5decda277",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "standards"
          }
        ],
        "section": [
          {
            "type": "Text",
            "nodeId": "35bd78c9-8b0f-431b-8701-1a10e342d845",
            "location": {
              "start": {
                "offset": 100,
                "line": 4,
                "column": 1
              },
              "end": {
                "offset": 157,
                "line": 4,
                "column": 58
              }
            },
            "content": "Code Standards"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "64d323ed-599b-4673-ae1e-78bfde0d0f9e",
            "location": {
              "start": {
                "offset": 100,
                "line": 4,
                "column": 1
              },
              "end": {
                "offset": 157,
                "line": 4,
                "column": 58
              }
            },
            "content": "files/README.md"
          }
        ]
      },
      "raw": {
        "identifier": "standards",
        "section": "Code Standards",
        "path": "files/README.md"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "add",
        "hasRename": false,
        "hasVariables": false
      }
    },
    {
      "type": "Newline",
      "nodeId": "67cc1d98-1f32-48c0-9f3f-561fd620e8c4",
      "location": {
        "start": {
          "offset": 157,
          "line": 4,
          "column": 58
        },
        "end": {
          "offset": 158,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "e2ef5b96-bda2-4dae-80e8-5c71cebe3064",
      "location": {
        "start": {
          "offset": 158,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 192,
          "line": 5,
          "column": 35
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "022ae62f-d993-49ec-8c76-de168fd1915a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "diff"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "722af35a-eaea-4acb-98b7-8704ab93be17",
            "location": {
              "start": {
                "offset": 177,
                "line": 5,
                "column": 20
              },
              "end": {
                "offset": 191,
                "line": 5,
                "column": 34
              }
            },
            "content": "git diff | cat"
          }
        ]
      },
      "raw": {
        "identifier": "diff",
        "content": "@run git diff | cat"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": false,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "5cbb74f0-1ec9-4bce-bc7c-7f29c42972c9",
      "location": {
        "start": {
          "offset": 192,
          "line": 5,
          "column": 35
        },
        "end": {
          "offset": 194,
          "line": 7,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "b9986dba-3184-4380-a5e1-8675a24fd4ab",
      "location": {
        "start": {
          "offset": 194,
          "line": 7,
          "column": 1
        },
        "end": {
          "offset": 336,
          "line": 11,
          "column": 3
        }
      },
      "kind": "text",
      "subtype": "textTemplate",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "3ed797b6-6acb-4e86-964d-2afa2f3f0a02",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "prompt"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "5c9dc92d-f0db-4ec9-85af-33443f2ef84a",
            "location": {
              "start": {
                "offset": 211,
                "line": 7,
                "column": 18
              },
              "end": {
                "offset": 230,
                "line": 8,
                "column": 19
              }
            },
            "content": "\n   Read our docs: "
          },
          {
            "type": "VariableReference",
            "nodeId": "3ec15831-0e43-4886-8dec-8de6383c8f6e",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "arch"
          },
          {
            "type": "Text",
            "nodeId": "82b72e04-c1a7-4b97-b3bb-beaefec5617d",
            "location": {
              "start": {
                "offset": 238,
                "line": 8,
                "column": 27
              },
              "end": {
                "offset": 239,
                "line": 8,
                "column": 28
              }
            },
            "content": " "
          },
          {
            "type": "VariableReference",
            "nodeId": "b466e539-e0a3-4734-9f4e-55fbdcdb6771",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "standards"
          },
          {
            "type": "Text",
            "nodeId": "0b54d13a-cf13-4b3c-b51c-d878aa1b9b4b",
            "location": {
              "start": {
                "offset": 252,
                "line": 8,
                "column": 41
              },
              "end": {
                "offset": 283,
                "line": 9,
                "column": 31
              }
            },
            "content": "\n   Review the latest changes: "
          },
          {
            "type": "VariableReference",
            "nodeId": "b4908cde-d4da-4573-88c0-80a643aa47e3",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "diff"
          },
          {
            "type": "Text",
            "nodeId": "0bc4a28a-a9e8-4ec4-9134-ffff2f04b51d",
            "location": {
              "start": {
                "offset": 291,
                "line": 9,
                "column": 39
              },
              "end": {
                "offset": 313,
                "line": 10,
                "column": 22
              }
            },
            "content": "\n   Here's your task: "
          },
          {
            "type": "VariableReference",
            "nodeId": "ba6dc68e-59ab-46e3-96d4-429b20dde3d2",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "tasks",
            "fields": [
              {
                "type": "field",
                "name": "codereview"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "9a2567dc-150d-4b2f-8501-13e56b46661d",
            "location": {
              "start": {
                "offset": 333,
                "line": 10,
                "column": 42
              },
              "end": {
                "offset": 334,
                "line": 11,
                "column": 1
              }
            },
            "content": "\n"
          }
        ]
      },
      "raw": {
        "identifier": "prompt",
        "content": "\n   Read our docs: {{arch}} {{standards}}\n   Review the latest changes: {{diff}}\n   Here's your task: {{tasks}}\n"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true
      }
    },
    {
      "type": "Text",
      "nodeId": "e9194b28-5353-4783-b53e-ef1701ba17c5",
      "location": {
        "start": {
          "offset": 336,
          "line": 11,
          "column": 3
        },
        "end": {
          "offset": 338,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "8f5cd933-3fc8-4fbd-a693-4206fa04befe",
      "location": {
        "start": {
          "offset": 338,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 386,
          "line": 13,
          "column": 49
        }
      },
      "kind": "run",
      "subtype": "runCommand",
      "source": "command",
      "values": {
        "command": [
          {
            "type": "Text",
            "nodeId": "a11646c0-9bab-44d6-a940-b817e31ee7c0",
            "location": {
              "start": {
                "offset": 344,
                "line": 13,
                "column": 7
              },
              "end": {
                "offset": 352,
                "line": 13,
                "column": 15
              }
            },
            "content": "oneshot "
          },
          {
            "type": "VariableReference",
            "nodeId": "c0a9d410-937c-404f-a263-87026d0f4b5f",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "prompt"
          },
          {
            "type": "Text",
            "nodeId": "1070fa5e-283e-4c7b-98c3-a2d98e667773",
            "location": {
              "start": {
                "offset": 359,
                "line": 13,
                "column": 22
              },
              "end": {
                "offset": 369,
                "line": 13,
                "column": 32
              }
            },
            "content": " --system "
          },
          {
            "type": "VariableReference",
            "nodeId": "63063dd7-30d0-4222-adb0-1117f4980985",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "roles",
            "fields": [
              {
                "type": "field",
                "name": "architect"
              }
            ]
          }
        ],
        "commandBases": [
          {
            "nodeId": "225d6a2a-5ebe-4f0c-ae31-83ca6a38f1c8",
            "location": {
              "start": {
                "offset": 343,
                "line": 13,
                "column": 6
              },
              "end": {
                "offset": 386,
                "line": 13,
                "column": 49
              }
            },
            "command": "oneshot"
          }
        ]
      },
      "raw": {
        "command": "oneshot @prompt --system @roles",
        "commandBases": [
          "oneshot"
        ]
      },
      "meta": {
        "hasVariables": true,
        "commandCount": 1,
        "hasScriptRunner": false,
        "isMultiLine": false
      }
    }
  ],
  "parseError": null
}