{
  "name": "code-review",
  "description": "Test fixture for valid/examples",
  "category": "valid",
  "subcategory": "examples",
  "input": "@import {roles, tasks} from \"files/prompts.mld\"\n\n@text arch = @add [files/README.md # Architecture]\n@text standards = @add [files/README.md # Code Standards]\n@text diff = @run [git diff | cat]\n\n@text prompt = [[\n   Read our docs: {{arch}} {{standards}}\n   Review the latest changes: {{diff}}\n   Here's your task: {{tasks.codereview}}\n]]\n\n@run [oneshot @prompt --system @roles.architect]",
  "expected": null,
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Directive",
      "nodeId": "e0aaf0dd-d84c-483d-b5a1-5f6d7901afcf",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 47,
          "line": 1,
          "column": 48
        }
      },
      "kind": "import",
      "subtype": "importSelected",
      "source": "path",
      "values": {
        "imports": [
          {
            "type": "VariableReference",
            "nodeId": "3c173d1d-e098-47ee-ad15-978891c257de",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "import",
            "identifier": "roles"
          },
          {
            "type": "VariableReference",
            "nodeId": "09c5442c-8c7d-4c53-87a7-763e42d99872",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "import",
            "identifier": "tasks"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "2f98dccb-193d-4ebb-945d-3edcc777c997",
            "location": {
              "start": {
                "offset": 28,
                "line": 1,
                "column": 29
              },
              "end": {
                "offset": 47,
                "line": 1,
                "column": 48
              }
            },
            "content": "files/prompts.mld"
          }
        ]
      },
      "raw": {
        "imports": "roles, tasks",
        "path": "files/prompts.mld"
      },
      "meta": {
        "path": {
          "hasVariables": false,
          "isAbsolute": false,
          "hasExtension": true,
          "extension": "mld",
          "pathSubtype": "filePath"
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "19b112a7-0173-4ddf-9705-3d2c9a136382",
      "location": {
        "start": {
          "offset": 47,
          "line": 1,
          "column": 48
        },
        "end": {
          "offset": 49,
          "line": 3,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "0517c01b-b2a9-4012-911e-e72d3aa3cd93",
      "location": {
        "start": {
          "offset": 49,
          "line": 3,
          "column": 1
        },
        "end": {
          "offset": 99,
          "line": 3,
          "column": 51
        }
      },
      "kind": "text",
      "subtype": "textPathSection",
      "source": "directive",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "7513eea4-9ab9-441a-abc8-c3d343e98cfb",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "arch"
          }
        ],
        "section": [
          {
            "type": "Text",
            "nodeId": "1a4b8ade-b813-4842-9bd1-4852f6a4f96c",
            "location": {
              "start": {
                "offset": 49,
                "line": 3,
                "column": 1
              },
              "end": {
                "offset": 99,
                "line": 3,
                "column": 51
              }
            },
            "content": "Architecture"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "746c5a76-6bda-448f-a960-c82f8fd9e7c0",
            "location": {
              "start": {
                "offset": 49,
                "line": 3,
                "column": 1
              },
              "end": {
                "offset": 99,
                "line": 3,
                "column": 51
              }
            },
            "content": "files/README.md"
          }
        ]
      },
      "raw": {
        "identifier": "arch",
        "section": "Architecture",
        "path": "files/README.md"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "add",
        "hasRename": false,
        "hasVariables": false
      }
    },
    {
      "type": "Newline",
      "nodeId": "2b368ac8-ae8f-423b-96e5-3292d9e40f7d",
      "location": {
        "start": {
          "offset": 99,
          "line": 3,
          "column": 51
        },
        "end": {
          "offset": 100,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "dbd2b6cb-4f1d-413d-8473-aef458ec3b48",
      "location": {
        "start": {
          "offset": 100,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 157,
          "line": 4,
          "column": 58
        }
      },
      "kind": "text",
      "subtype": "textPathSection",
      "source": "directive",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "0420bf48-d157-44db-8ad4-68233ec982aa",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "standards"
          }
        ],
        "section": [
          {
            "type": "Text",
            "nodeId": "9c7238b4-99d3-4e46-9bb8-733789b3cf5b",
            "location": {
              "start": {
                "offset": 100,
                "line": 4,
                "column": 1
              },
              "end": {
                "offset": 157,
                "line": 4,
                "column": 58
              }
            },
            "content": "Code Standards"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "721793dd-e046-4934-b734-050fbda93bea",
            "location": {
              "start": {
                "offset": 100,
                "line": 4,
                "column": 1
              },
              "end": {
                "offset": 157,
                "line": 4,
                "column": 58
              }
            },
            "content": "files/README.md"
          }
        ]
      },
      "raw": {
        "identifier": "standards",
        "section": "Code Standards",
        "path": "files/README.md"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "add",
        "hasRename": false,
        "hasVariables": false
      }
    },
    {
      "type": "Newline",
      "nodeId": "9b6a5ee8-546a-4496-9588-709a1a3dd440",
      "location": {
        "start": {
          "offset": 157,
          "line": 4,
          "column": 58
        },
        "end": {
          "offset": 158,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "7f16d9a3-e6a9-4532-acef-e55d9f2fb857",
      "location": {
        "start": {
          "offset": 158,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 192,
          "line": 5,
          "column": 35
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "61c18d70-2f08-4825-85c8-9993024705a6",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "diff"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "20fc2dee-bad1-4a63-8f9a-414c22c69a08",
            "location": {
              "start": {
                "offset": 177,
                "line": 5,
                "column": 20
              },
              "end": {
                "offset": 191,
                "line": 5,
                "column": 34
              }
            },
            "content": "git diff | cat"
          }
        ]
      },
      "raw": {
        "identifier": "diff",
        "content": "@run git diff | cat"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": false,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "23d33254-255e-40be-80df-21f30ca7ed93",
      "location": {
        "start": {
          "offset": 192,
          "line": 5,
          "column": 35
        },
        "end": {
          "offset": 194,
          "line": 7,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "d603adae-e5c3-4845-b0cb-4a5b56848d7c",
      "location": {
        "start": {
          "offset": 194,
          "line": 7,
          "column": 1
        },
        "end": {
          "offset": 336,
          "line": 11,
          "column": 3
        }
      },
      "kind": "text",
      "subtype": "textTemplate",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "ca71672f-6017-4e78-beef-77065192a23c",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "prompt"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "b889ccb4-8bf8-4b48-88a3-d72c20e026f6",
            "location": {
              "start": {
                "offset": 211,
                "line": 7,
                "column": 18
              },
              "end": {
                "offset": 230,
                "line": 8,
                "column": 19
              }
            },
            "content": "\n   Read our docs: "
          },
          {
            "type": "VariableReference",
            "nodeId": "cb29f2a0-0142-444f-b280-a293922c509b",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "arch"
          },
          {
            "type": "Text",
            "nodeId": "5e6c9033-0084-4489-8afe-176d5fc56a76",
            "location": {
              "start": {
                "offset": 238,
                "line": 8,
                "column": 27
              },
              "end": {
                "offset": 239,
                "line": 8,
                "column": 28
              }
            },
            "content": " "
          },
          {
            "type": "VariableReference",
            "nodeId": "6caa5c4e-02e9-491d-9f7a-13df61503078",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "standards"
          },
          {
            "type": "Text",
            "nodeId": "6217c2e1-bc46-4611-bfa8-c7743716a604",
            "location": {
              "start": {
                "offset": 252,
                "line": 8,
                "column": 41
              },
              "end": {
                "offset": 283,
                "line": 9,
                "column": 31
              }
            },
            "content": "\n   Review the latest changes: "
          },
          {
            "type": "VariableReference",
            "nodeId": "75e6ca79-c3e1-4143-8cc4-5410caf71844",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "diff"
          },
          {
            "type": "Text",
            "nodeId": "f6fa0819-1731-4abe-a86c-262ec5ba0252",
            "location": {
              "start": {
                "offset": 291,
                "line": 9,
                "column": 39
              },
              "end": {
                "offset": 313,
                "line": 10,
                "column": 22
              }
            },
            "content": "\n   Here's your task: "
          },
          {
            "type": "VariableReference",
            "nodeId": "75fc92bd-b52c-43f8-a01d-65413b487a25",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "tasks",
            "fields": [
              {
                "type": "field",
                "name": "codereview"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "5af4ac54-611f-40c3-aec8-bf9e0de3456b",
            "location": {
              "start": {
                "offset": 333,
                "line": 10,
                "column": 42
              },
              "end": {
                "offset": 334,
                "line": 11,
                "column": 1
              }
            },
            "content": "\n"
          }
        ]
      },
      "raw": {
        "identifier": "prompt",
        "content": "\n   Read our docs: {{arch}} {{standards}}\n   Review the latest changes: {{diff}}\n   Here's your task: {{tasks}}\n"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true
      }
    },
    {
      "type": "Text",
      "nodeId": "b44435ff-908b-4e10-8e99-157796d62d47",
      "location": {
        "start": {
          "offset": 336,
          "line": 11,
          "column": 3
        },
        "end": {
          "offset": 338,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "316dd04f-c5ed-4ca3-8a4c-ceb58d170b0b",
      "location": {
        "start": {
          "offset": 338,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 386,
          "line": 13,
          "column": 49
        }
      },
      "kind": "run",
      "subtype": "runCommand",
      "source": "command",
      "values": {
        "command": [
          {
            "type": "Text",
            "nodeId": "8b6ad69f-c85e-4262-8ef4-9e1d01cc5957",
            "location": {
              "start": {
                "offset": 344,
                "line": 13,
                "column": 7
              },
              "end": {
                "offset": 352,
                "line": 13,
                "column": 15
              }
            },
            "content": "oneshot "
          },
          {
            "type": "VariableReference",
            "nodeId": "c69d8e43-5e97-4363-94aa-6e579aab4e58",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "prompt"
          },
          {
            "type": "Text",
            "nodeId": "78e3b506-375a-4d70-a7f7-f4c7ee0cdfff",
            "location": {
              "start": {
                "offset": 359,
                "line": 13,
                "column": 22
              },
              "end": {
                "offset": 369,
                "line": 13,
                "column": 32
              }
            },
            "content": " --system "
          },
          {
            "type": "VariableReference",
            "nodeId": "c33e9911-b544-4f58-b5ea-da073c82092c",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "roles",
            "fields": [
              {
                "type": "field",
                "name": "architect"
              }
            ]
          }
        ],
        "commandBases": [
          {
            "nodeId": "8942251a-80c7-4035-884b-71f65656698e",
            "location": {
              "start": {
                "offset": 343,
                "line": 13,
                "column": 6
              },
              "end": {
                "offset": 386,
                "line": 13,
                "column": 49
              }
            },
            "command": "oneshot"
          }
        ]
      },
      "raw": {
        "command": "oneshot @prompt --system @roles",
        "commandBases": [
          "oneshot"
        ]
      },
      "meta": {
        "hasVariables": true,
        "commandCount": 1,
        "hasScriptRunner": false,
        "isMultiLine": false
      }
    }
  ],
  "parseError": null
}