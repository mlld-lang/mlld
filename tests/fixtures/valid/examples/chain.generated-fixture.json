{
  "name": "chain",
  "description": "Test fixture for valid/examples",
  "category": "valid",
  "subcategory": "examples",
  "input": "# Chaining LLM Requests Example\n@import { role } from \"files/imports.mld\"\n\n@text tests = @run [npm test]\n@text res = @run [oneshot --context @tests --task \"What's one thing that's broken here?\"]\n@run [oneshot \"Make a plan to fix this:\\n\\n# Issue:\\n@res\" --system @role.architect]",
  "expected": null,
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Text",
      "nodeId": "28c50349-1846-47c2-aecc-005fc2f5c989",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 32,
          "line": 2,
          "column": 1
        }
      },
      "content": "# Chaining LLM Requests Example\n"
    },
    {
      "type": "Directive",
      "nodeId": "90ddc632-e555-4953-bcba-55f5465adc38",
      "location": {
        "start": {
          "offset": 32,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 73,
          "line": 2,
          "column": 42
        }
      },
      "kind": "import",
      "subtype": "importSelected",
      "source": "path",
      "values": {
        "imports": [
          {
            "type": "VariableReference",
            "nodeId": "037c8070-f27f-4efb-865a-b75e26bb84a9",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "import",
            "identifier": "role"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "c77d6933-b86e-4a22-9c0a-48010a9ac029",
            "location": {
              "start": {
                "offset": 54,
                "line": 2,
                "column": 23
              },
              "end": {
                "offset": 73,
                "line": 2,
                "column": 42
              }
            },
            "content": "files/imports.mld"
          }
        ]
      },
      "raw": {
        "imports": "role",
        "path": "files/imports.mld"
      },
      "meta": {
        "path": {
          "hasVariables": false,
          "isAbsolute": false,
          "hasExtension": true,
          "extension": "mld",
          "pathSubtype": "filePath"
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "8b6ff4be-4c57-4c8f-ba0a-efa515e36c78",
      "location": {
        "start": {
          "offset": 73,
          "line": 2,
          "column": 42
        },
        "end": {
          "offset": 75,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "69eae060-42d4-423d-8c09-35da2e64ec95",
      "location": {
        "start": {
          "offset": 75,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 104,
          "line": 4,
          "column": 30
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "0f81b7ad-03ed-4a8b-a540-4ec1694cc593",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "tests"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "206e859d-674d-4eaa-940d-dfa1e4849086",
            "location": {
              "start": {
                "offset": 95,
                "line": 4,
                "column": 21
              },
              "end": {
                "offset": 103,
                "line": 4,
                "column": 29
              }
            },
            "content": "npm test"
          }
        ]
      },
      "raw": {
        "identifier": "tests",
        "content": "@run npm test"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": false,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "e0e4c577-7475-4e41-9100-83749f9d311a",
      "location": {
        "start": {
          "offset": 104,
          "line": 4,
          "column": 30
        },
        "end": {
          "offset": 105,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "a81f2ba0-5793-42e7-aa0b-a2811e0455d0",
      "location": {
        "start": {
          "offset": 105,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 194,
          "line": 5,
          "column": 90
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "a18c2459-cc0e-4822-8152-38e7d653772b",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "res"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "03483dbf-a92a-4f77-a825-38d9fbd81e61",
            "location": {
              "start": {
                "offset": 123,
                "line": 5,
                "column": 19
              },
              "end": {
                "offset": 141,
                "line": 5,
                "column": 37
              }
            },
            "content": "oneshot --context "
          },
          {
            "type": "VariableReference",
            "nodeId": "c6341e6a-c321-4232-943a-1b721a81b2d2",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "tests"
          },
          {
            "type": "Text",
            "nodeId": "8e75eadc-660e-4b15-9667-c409c0f24a93",
            "location": {
              "start": {
                "offset": 147,
                "line": 5,
                "column": 43
              },
              "end": {
                "offset": 193,
                "line": 5,
                "column": 89
              }
            },
            "content": " --task \"What's one thing that's broken here?\""
          }
        ]
      },
      "raw": {
        "identifier": "res",
        "content": "@run oneshot --context @tests --task \"What's one thing that's broken here?\""
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": true,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "8a284572-cc73-4f63-a0d7-3079e6839ad4",
      "location": {
        "start": {
          "offset": 194,
          "line": 5,
          "column": 90
        },
        "end": {
          "offset": 195,
          "line": 6,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "bd5e9057-f7d9-4f1e-a997-e33288f107f2",
      "location": {
        "start": {
          "offset": 195,
          "line": 6,
          "column": 1
        },
        "end": {
          "offset": 279,
          "line": 6,
          "column": 85
        }
      },
      "kind": "run",
      "subtype": "runCommand",
      "source": "command",
      "values": {
        "command": [
          {
            "type": "Text",
            "nodeId": "f312a319-2abc-4925-ab59-c2cdbd8594af",
            "location": {
              "start": {
                "offset": 201,
                "line": 6,
                "column": 7
              },
              "end": {
                "offset": 248,
                "line": 6,
                "column": 54
              }
            },
            "content": "oneshot \"Make a plan to fix this:\\n\\n# Issue:\\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "4c8d2193-c1c1-47d2-a6ca-bc4bcf5b64da",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "res"
          },
          {
            "type": "Text",
            "nodeId": "2c1b61b9-3070-40e2-b55c-d9ae186e25d3",
            "location": {
              "start": {
                "offset": 252,
                "line": 6,
                "column": 58
              },
              "end": {
                "offset": 263,
                "line": 6,
                "column": 69
              }
            },
            "content": "\" --system "
          },
          {
            "type": "VariableReference",
            "nodeId": "efde72c9-394c-4b53-9628-a06f96a47206",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "role",
            "fields": [
              {
                "type": "field",
                "name": "architect"
              }
            ]
          }
        ],
        "commandBases": [
          {
            "nodeId": "0c031332-d5ea-48bb-bb43-1008aad67d00",
            "location": {
              "start": {
                "offset": 200,
                "line": 6,
                "column": 6
              },
              "end": {
                "offset": 279,
                "line": 6,
                "column": 85
              }
            },
            "command": "oneshot"
          }
        ]
      },
      "raw": {
        "command": "oneshot \"Make a plan to fix this:\\n\\n# Issue:\\n@res\" --system @role",
        "commandBases": [
          "oneshot"
        ]
      },
      "meta": {
        "hasVariables": true,
        "commandCount": 1,
        "hasScriptRunner": false,
        "isMultiLine": false
      }
    }
  ],
  "parseError": null
}