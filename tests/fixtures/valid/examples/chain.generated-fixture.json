{
  "name": "chain",
  "description": "Test fixture for valid/examples",
  "category": "valid",
  "subcategory": "examples",
  "input": "# Chaining LLM Requests Example\n@import { role } from \"files/imports.mld\"\n\n@text tests = @run [npm test]\n@text res = @run [oneshot --context @tests --task \"What's one thing that's broken here?\"]\n@run [oneshot \"Make a plan to fix this:\\n\\n# Issue:\\n@res\" --system @role.architect]",
  "expected": null,
  "expectedError": null,
  "expectedWarning": null,
  "actualOutput": null,
  "ast": [
    {
      "type": "Text",
      "nodeId": "cae117c3-d4ad-4b5f-b310-285f7290ea26",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 32,
          "line": 2,
          "column": 1
        }
      },
      "content": "# Chaining LLM Requests Example\n"
    },
    {
      "type": "Directive",
      "nodeId": "7c086fa8-79de-464d-9bc5-e71583999ce0",
      "location": {
        "start": {
          "offset": 32,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 73,
          "line": 2,
          "column": 42
        }
      },
      "kind": "import",
      "subtype": "importSelected",
      "source": "path",
      "values": {
        "imports": [
          {
            "type": "VariableReference",
            "nodeId": "771425d0-42b0-4400-bf0a-2182ba5e0c1f",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "import",
            "identifier": "role"
          }
        ],
        "path": [
          {
            "type": "Text",
            "nodeId": "bb9fd7d4-8a25-4848-a822-60aff4c93a60",
            "location": {
              "start": {
                "offset": 54,
                "line": 2,
                "column": 23
              },
              "end": {
                "offset": 73,
                "line": 2,
                "column": 42
              }
            },
            "content": "files/imports.mld"
          }
        ]
      },
      "raw": {
        "imports": "role",
        "path": "files/imports.mld"
      },
      "meta": {
        "path": {
          "hasVariables": false,
          "isAbsolute": false,
          "hasExtension": true,
          "extension": "mld",
          "pathSubtype": "filePath"
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "8622bd59-4926-47a9-ac8a-edcfb414a9bd",
      "location": {
        "start": {
          "offset": 73,
          "line": 2,
          "column": 42
        },
        "end": {
          "offset": 75,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "7b9a0ad1-268e-44f1-90b7-6962d38b3b61",
      "location": {
        "start": {
          "offset": 75,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 104,
          "line": 4,
          "column": 30
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "3b30a749-c664-411f-af43-2b555a9eb78a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "tests"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "98597736-2d30-4c62-bf33-b6b63ca94a36",
            "location": {
              "start": {
                "offset": 95,
                "line": 4,
                "column": 21
              },
              "end": {
                "offset": 103,
                "line": 4,
                "column": 29
              }
            },
            "content": "npm test"
          }
        ]
      },
      "raw": {
        "identifier": "tests",
        "content": "@run npm test"
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": false,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "2ef25a46-e8d7-4405-8088-f0a6f38d1765",
      "location": {
        "start": {
          "offset": 104,
          "line": 4,
          "column": 30
        },
        "end": {
          "offset": 105,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "7d8b006b-8ed6-489c-b9f8-98ffde4c3ef8",
      "location": {
        "start": {
          "offset": 105,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 194,
          "line": 5,
          "column": 90
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "run",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "08258dd9-37c6-4ce8-9f54-a01dd9a7733a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "res"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "9ebca222-65c5-47fb-be2f-d7e4f88826fe",
            "location": {
              "start": {
                "offset": 123,
                "line": 5,
                "column": 19
              },
              "end": {
                "offset": 141,
                "line": 5,
                "column": 37
              }
            },
            "content": "oneshot --context "
          },
          {
            "type": "VariableReference",
            "nodeId": "74e8d8d8-ba72-4608-92f2-9fdd167b8705",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "tests"
          },
          {
            "type": "Text",
            "nodeId": "0d89aed3-117a-44f5-ac19-dadcb522f360",
            "location": {
              "start": {
                "offset": 147,
                "line": 5,
                "column": 43
              },
              "end": {
                "offset": 193,
                "line": 5,
                "column": 89
              }
            },
            "content": " --task \"What's one thing that's broken here?\""
          }
        ]
      },
      "raw": {
        "identifier": "res",
        "content": "@run oneshot --context @tests --task \"What's one thing that's broken here?\""
      },
      "meta": {
        "sourceType": "directive",
        "directive": "run",
        "hasVariables": true,
        "run": {
          "isCommand": true
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "3ac8b538-6f05-463b-b6f6-3eefe00b711b",
      "location": {
        "start": {
          "offset": 194,
          "line": 5,
          "column": 90
        },
        "end": {
          "offset": 195,
          "line": 6,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "6999c08a-52b7-42ef-8171-21530c8c4662",
      "location": {
        "start": {
          "offset": 195,
          "line": 6,
          "column": 1
        },
        "end": {
          "offset": 279,
          "line": 6,
          "column": 85
        }
      },
      "kind": "run",
      "subtype": "runCommand",
      "source": "command",
      "values": {
        "command": [
          {
            "type": "Text",
            "nodeId": "e44d29a3-5364-41de-9dce-c7f1318dd1e9",
            "location": {
              "start": {
                "offset": 201,
                "line": 6,
                "column": 7
              },
              "end": {
                "offset": 248,
                "line": 6,
                "column": 54
              }
            },
            "content": "oneshot \"Make a plan to fix this:\\n\\n# Issue:\\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "647a9076-0b82-4b0b-9ac0-8958eb9f8229",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "res"
          },
          {
            "type": "Text",
            "nodeId": "0ef39b1a-e5b6-4891-a802-01915803368c",
            "location": {
              "start": {
                "offset": 252,
                "line": 6,
                "column": 58
              },
              "end": {
                "offset": 263,
                "line": 6,
                "column": 69
              }
            },
            "content": "\" --system "
          },
          {
            "type": "VariableReference",
            "nodeId": "01f8202c-59e8-4dbb-afc0-9991df383da3",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varIdentifier",
            "identifier": "role",
            "fields": [
              {
                "type": "field",
                "name": "architect"
              }
            ]
          }
        ],
        "commandBases": [
          {
            "nodeId": "4a5ba61a-ddd1-4ca3-97d2-bcb69fd6a8b8",
            "location": {
              "start": {
                "offset": 200,
                "line": 6,
                "column": 6
              },
              "end": {
                "offset": 279,
                "line": 6,
                "column": 85
              }
            },
            "command": "oneshot"
          }
        ]
      },
      "raw": {
        "command": "oneshot \"Make a plan to fix this:\\n\\n# Issue:\\n@res\" --system @role",
        "commandBases": [
          "oneshot"
        ]
      },
      "meta": {
        "hasVariables": true,
        "commandCount": 1,
        "hasScriptRunner": false,
        "isMultiLine": false
      }
    }
  ],
  "parseError": null
}