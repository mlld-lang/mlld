{
  "name": "data-field-access",
  "description": "Test fixture for data/field-access",
  "category": "data",
  "subcategory": "field-access",
  "input": "@data users = [\n  {name: \"Alice\", role: {title: \"Admin\", level: 5}},\n  {name: \"Bob\", role: {title: \"User\", level: 1}}\n]\n@data permissions = {\n  adminName: @users[0].name,\n  adminLevel: @users[0].role.level,\n  userCount: 2\n}\n@add [[{{permissions.adminName}} has level {{permissions.adminLevel}} access]]",
  "expected": "Alice has level 5 access",
  "ast": [
    {
      "type": "Directive",
      "nodeId": "f7571298-88cc-449f-a304-e0d415a06a14",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 119,
          "line": 4,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "array",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "a6ef2831-4632-4b61-ab3a-d3cadb511602",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "users"
          }
        ],
        "value": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "name": [
                  {
                    "type": "Text",
                    "nodeId": "ede34d59-2f2e-4747-a2a5-1e225b941088",
                    "location": {
                      "start": {
                        "offset": 25,
                        "line": 2,
                        "column": 10
                      },
                      "end": {
                        "offset": 32,
                        "line": 2,
                        "column": 17
                      }
                    },
                    "content": "Alice"
                  }
                ],
                "role": {
                  "type": "object",
                  "properties": {
                    "title": [
                      {
                        "type": "Text",
                        "nodeId": "cea36f44-84e5-41d6-8c67-e0ccef48efa6",
                        "location": {
                          "start": {
                            "offset": 48,
                            "line": 2,
                            "column": 33
                          },
                          "end": {
                            "offset": 55,
                            "line": 2,
                            "column": 40
                          }
                        },
                        "content": "Admin"
                      }
                    ],
                    "level": 5
                  }
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "name": [
                  {
                    "type": "Text",
                    "nodeId": "11ac11e5-a620-44bd-80a5-bba3da279dc3",
                    "location": {
                      "start": {
                        "offset": 78,
                        "line": 3,
                        "column": 10
                      },
                      "end": {
                        "offset": 83,
                        "line": 3,
                        "column": 15
                      }
                    },
                    "content": "Bob"
                  }
                ],
                "role": {
                  "type": "object",
                  "properties": {
                    "title": [
                      {
                        "type": "Text",
                        "nodeId": "930e10ed-0ada-41c4-821e-08fb98d8ec1d",
                        "location": {
                          "start": {
                            "offset": 99,
                            "line": 3,
                            "column": 31
                          },
                          "end": {
                            "offset": 105,
                            "line": 3,
                            "column": 37
                          }
                        },
                        "content": "User"
                      }
                    ],
                    "level": 1
                  }
                }
              }
            }
          ]
        }
      },
      "raw": {
        "identifier": "users",
        "value": "[\n  {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"ede34d59-2f2e-4747-a2a5-1e225b941088\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 25,\n              \"line\": 2,\n              \"column\": 10\n            },\n            \"end\": {\n              \"offset\": 32,\n              \"line\": 2,\n              \"column\": 17\n            }\n          },\n          \"content\": \"Alice\"\n        }\n      ],\n      \"role\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"title\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"cea36f44-84e5-41d6-8c67-e0ccef48efa6\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 48,\n                  \"line\": 2,\n                  \"column\": 33\n                },\n                \"end\": {\n                  \"offset\": 55,\n                  \"line\": 2,\n                  \"column\": 40\n                }\n              },\n              \"content\": \"Admin\"\n            }\n          ],\n          \"level\": 5\n        }\n      }\n    }\n  },\n  {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"11ac11e5-a620-44bd-80a5-bba3da279dc3\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 78,\n              \"line\": 3,\n              \"column\": 10\n            },\n            \"end\": {\n              \"offset\": 83,\n              \"line\": 3,\n              \"column\": 15\n            }\n          },\n          \"content\": \"Bob\"\n        }\n      ],\n      \"role\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"title\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"930e10ed-0ada-41c4-821e-08fb98d8ec1d\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 99,\n                  \"line\": 3,\n                  \"column\": 31\n                },\n                \"end\": {\n                  \"offset\": 105,\n                  \"line\": 3,\n                  \"column\": 37\n                }\n              },\n              \"content\": \"User\"\n            }\n          ],\n          \"level\": 1\n        }\n      }\n    }\n  }\n]"
      },
      "meta": {
        "arrayData": {
          "itemCount": 2
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "283150c7-7a52-4643-8fee-34425f80a12e",
      "location": {
        "start": {
          "offset": 119,
          "line": 4,
          "column": 2
        },
        "end": {
          "offset": 120,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "24fb3a0b-b6e6-4313-b6a2-b71c2af63702",
      "location": {
        "start": {
          "offset": 120,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 223,
          "line": 9,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "346ad863-017b-4903-a0fc-3a6361e8e176",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "permissions"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "adminName": {
              "type": "VariableReference",
              "nodeId": "4b185fda-2dae-4b11-b60f-22e4ef3791f4",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "valueType": "varIdentifier",
              "isVariableReference": true,
              "identifier": "users",
              "fields": [
                {
                  "type": "arrayIndex",
                  "index": 0
                },
                {
                  "type": "field",
                  "name": "name"
                }
              ]
            },
            "adminLevel": {
              "type": "VariableReference",
              "nodeId": "39fed4fa-60ee-45af-862d-75c21d876236",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "valueType": "varIdentifier",
              "isVariableReference": true,
              "identifier": "users",
              "fields": [
                {
                  "type": "arrayIndex",
                  "index": 0
                },
                {
                  "type": "field",
                  "name": "role"
                },
                {
                  "type": "field",
                  "name": "level"
                }
              ]
            },
            "userCount": 2
          }
        }
      },
      "raw": {
        "identifier": "permissions",
        "value": "{\n  \"adminName\": {\n    \"type\": \"VariableReference\",\n    \"nodeId\": \"4b185fda-2dae-4b11-b60f-22e4ef3791f4\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"valueType\": \"varIdentifier\",\n    \"isVariableReference\": true,\n    \"identifier\": \"users\",\n    \"fields\": [\n      {\n        \"type\": \"arrayIndex\",\n        \"index\": 0\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"name\"\n      }\n    ]\n  },\n  \"adminLevel\": {\n    \"type\": \"VariableReference\",\n    \"nodeId\": \"39fed4fa-60ee-45af-862d-75c21d876236\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"valueType\": \"varIdentifier\",\n    \"isVariableReference\": true,\n    \"identifier\": \"users\",\n    \"fields\": [\n      {\n        \"type\": \"arrayIndex\",\n        \"index\": 0\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"role\"\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"level\"\n      }\n    ]\n  },\n  \"userCount\": 2\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 3
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "f35b7bc3-ef90-4d80-afea-52437b32ce0f",
      "location": {
        "start": {
          "offset": 223,
          "line": 9,
          "column": 2
        },
        "end": {
          "offset": 224,
          "line": 10,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "19caf102-adda-4a07-8608-15d5a9671865",
      "location": {
        "start": {
          "offset": 224,
          "line": 10,
          "column": 1
        },
        "end": {
          "offset": 302,
          "line": 10,
          "column": 79
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "461f2c4f-300a-4772-9bf3-61a459200c59",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "permissions",
            "fields": [
              {
                "type": "field",
                "name": "adminName"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "87cbbaaa-e6c9-4e2f-8891-9533e09bee16",
            "location": {
              "start": {
                "offset": 256,
                "line": 10,
                "column": 33
              },
              "end": {
                "offset": 267,
                "line": 10,
                "column": 44
              }
            },
            "content": " has level "
          },
          {
            "type": "VariableReference",
            "nodeId": "dfc0a06e-f35b-4ad5-8993-5e132e7e7318",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "permissions",
            "fields": [
              {
                "type": "field",
                "name": "adminLevel"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "f443cef7-9842-40d0-9b8e-d3d36e599831",
            "location": {
              "start": {
                "offset": 293,
                "line": 10,
                "column": 70
              },
              "end": {
                "offset": 300,
                "line": 10,
                "column": 77
              }
            },
            "content": " access"
          }
        ]
      },
      "raw": {
        "content": "{{permissions}} has level {{permissions}} access"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ]
}