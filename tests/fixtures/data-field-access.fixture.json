{
  "name": "data-field-access",
  "description": "Test fixture for data/field-access",
  "category": "data",
  "subcategory": "field-access",
  "input": "@data users = [\n  {name: \"Alice\", role: {title: \"Admin\", level: 5}},\n  {name: \"Bob\", role: {title: \"User\", level: 1}}\n]\n@data permissions = {\n  adminName: @users[0].name,\n  adminLevel: @users[0].role.level,\n  userCount: 2\n}\n@add [[{{permissions.adminName}} has level {{permissions.adminLevel}} access]]",
  "expected": "Alice has level 5 access",
  "ast": [
    {
      "type": "Directive",
      "nodeId": "11012c75-71bc-404f-ae46-30934fa65e28",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 119,
          "line": 4,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "array",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "2da0a01c-d655-4847-9f91-2255812292ee",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "users"
          }
        ],
        "value": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "name": [
                  {
                    "type": "Text",
                    "nodeId": "96f46c38-29f3-48e4-b59d-e88c0c1bda87",
                    "location": {
                      "start": {
                        "offset": 25,
                        "line": 2,
                        "column": 10
                      },
                      "end": {
                        "offset": 32,
                        "line": 2,
                        "column": 17
                      }
                    },
                    "content": "Alice"
                  }
                ],
                "role": {
                  "type": "object",
                  "properties": {
                    "title": [
                      {
                        "type": "Text",
                        "nodeId": "b7a19ce4-2435-40f9-b09d-075642155db8",
                        "location": {
                          "start": {
                            "offset": 48,
                            "line": 2,
                            "column": 33
                          },
                          "end": {
                            "offset": 55,
                            "line": 2,
                            "column": 40
                          }
                        },
                        "content": "Admin"
                      }
                    ],
                    "level": 5
                  }
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "name": [
                  {
                    "type": "Text",
                    "nodeId": "59fc4eab-3a95-44b6-8ec7-892a8736cd91",
                    "location": {
                      "start": {
                        "offset": 78,
                        "line": 3,
                        "column": 10
                      },
                      "end": {
                        "offset": 83,
                        "line": 3,
                        "column": 15
                      }
                    },
                    "content": "Bob"
                  }
                ],
                "role": {
                  "type": "object",
                  "properties": {
                    "title": [
                      {
                        "type": "Text",
                        "nodeId": "4c5555da-2f5a-4f37-997c-2c170ee16455",
                        "location": {
                          "start": {
                            "offset": 99,
                            "line": 3,
                            "column": 31
                          },
                          "end": {
                            "offset": 105,
                            "line": 3,
                            "column": 37
                          }
                        },
                        "content": "User"
                      }
                    ],
                    "level": 1
                  }
                }
              }
            }
          ]
        }
      },
      "raw": {
        "identifier": "users",
        "value": "[\n  {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"96f46c38-29f3-48e4-b59d-e88c0c1bda87\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 25,\n              \"line\": 2,\n              \"column\": 10\n            },\n            \"end\": {\n              \"offset\": 32,\n              \"line\": 2,\n              \"column\": 17\n            }\n          },\n          \"content\": \"Alice\"\n        }\n      ],\n      \"role\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"title\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"b7a19ce4-2435-40f9-b09d-075642155db8\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 48,\n                  \"line\": 2,\n                  \"column\": 33\n                },\n                \"end\": {\n                  \"offset\": 55,\n                  \"line\": 2,\n                  \"column\": 40\n                }\n              },\n              \"content\": \"Admin\"\n            }\n          ],\n          \"level\": 5\n        }\n      }\n    }\n  },\n  {\n    \"type\": \"object\",\n    \"properties\": {\n      \"name\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"59fc4eab-3a95-44b6-8ec7-892a8736cd91\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 78,\n              \"line\": 3,\n              \"column\": 10\n            },\n            \"end\": {\n              \"offset\": 83,\n              \"line\": 3,\n              \"column\": 15\n            }\n          },\n          \"content\": \"Bob\"\n        }\n      ],\n      \"role\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"title\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"4c5555da-2f5a-4f37-997c-2c170ee16455\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 99,\n                  \"line\": 3,\n                  \"column\": 31\n                },\n                \"end\": {\n                  \"offset\": 105,\n                  \"line\": 3,\n                  \"column\": 37\n                }\n              },\n              \"content\": \"User\"\n            }\n          ],\n          \"level\": 1\n        }\n      }\n    }\n  }\n]"
      },
      "meta": {
        "arrayData": {
          "itemCount": 2
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "19f0613d-52fa-45c1-ad77-171225697d6f",
      "location": {
        "start": {
          "offset": 119,
          "line": 4,
          "column": 2
        },
        "end": {
          "offset": 120,
          "line": 5,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "3f8d773d-360b-4325-8279-1572f5bedc8b",
      "location": {
        "start": {
          "offset": 120,
          "line": 5,
          "column": 1
        },
        "end": {
          "offset": 223,
          "line": 9,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "4ad513cc-051a-4d5b-9d29-e6a9d7c08cee",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "permissions"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "adminName": {
              "type": "VariableReference",
              "nodeId": "0b0aaa99-92db-4ec4-9360-26437f748ae0",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "valueType": "varIdentifier",
              "isVariableReference": true,
              "identifier": "users",
              "fields": [
                {
                  "type": "arrayIndex",
                  "index": 0
                },
                {
                  "type": "field",
                  "name": "name"
                }
              ]
            },
            "adminLevel": {
              "type": "VariableReference",
              "nodeId": "e9647a64-58ec-416e-ace3-ca65ed467611",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "valueType": "varIdentifier",
              "isVariableReference": true,
              "identifier": "users",
              "fields": [
                {
                  "type": "arrayIndex",
                  "index": 0
                },
                {
                  "type": "field",
                  "name": "role"
                },
                {
                  "type": "field",
                  "name": "level"
                }
              ]
            },
            "userCount": 2
          }
        }
      },
      "raw": {
        "identifier": "permissions",
        "value": "{\n  \"adminName\": {\n    \"type\": \"VariableReference\",\n    \"nodeId\": \"0b0aaa99-92db-4ec4-9360-26437f748ae0\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"valueType\": \"varIdentifier\",\n    \"isVariableReference\": true,\n    \"identifier\": \"users\",\n    \"fields\": [\n      {\n        \"type\": \"arrayIndex\",\n        \"index\": 0\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"name\"\n      }\n    ]\n  },\n  \"adminLevel\": {\n    \"type\": \"VariableReference\",\n    \"nodeId\": \"e9647a64-58ec-416e-ace3-ca65ed467611\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"valueType\": \"varIdentifier\",\n    \"isVariableReference\": true,\n    \"identifier\": \"users\",\n    \"fields\": [\n      {\n        \"type\": \"arrayIndex\",\n        \"index\": 0\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"role\"\n      },\n      {\n        \"type\": \"field\",\n        \"name\": \"level\"\n      }\n    ]\n  },\n  \"userCount\": 2\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 3
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "d97116c4-9b5e-4b1a-b5d9-e75eed6f0009",
      "location": {
        "start": {
          "offset": 223,
          "line": 9,
          "column": 2
        },
        "end": {
          "offset": 224,
          "line": 10,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "4fa9ffb5-3c44-4d3b-971d-0ee8ba0bbaab",
      "location": {
        "start": {
          "offset": 224,
          "line": 10,
          "column": 1
        },
        "end": {
          "offset": 302,
          "line": 10,
          "column": 79
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "29fe70da-113e-4c35-9645-f5a1a4fb1522",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "permissions",
            "fields": [
              {
                "type": "field",
                "name": "adminName"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "a35164fd-5f20-40d5-bb8a-468eeecf02ad",
            "location": {
              "start": {
                "offset": 256,
                "line": 10,
                "column": 33
              },
              "end": {
                "offset": 267,
                "line": 10,
                "column": 44
              }
            },
            "content": " has level "
          },
          {
            "type": "VariableReference",
            "nodeId": "744e301d-8d2c-43fa-8f71-47c4439adacb",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "permissions",
            "fields": [
              {
                "type": "field",
                "name": "adminLevel"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "07ebf72b-51d7-410a-aef9-c5e63413ae7b",
            "location": {
              "start": {
                "offset": 293,
                "line": 10,
                "column": 70
              },
              "end": {
                "offset": 300,
                "line": 10,
                "column": 77
              }
            },
            "content": " access"
          }
        ]
      },
      "raw": {
        "content": "{{permissions}} has level {{permissions}} access"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ]
}