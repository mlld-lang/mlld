{
  "name": "data-mixed-types",
  "description": "Test fixture for data/mixed-types",
  "category": "data",
  "subcategory": "mixed-types",
  "input": "@text projectVar = \"MyProject\"\n@data buildInfo = {\n  name: @projectVar,\n  version: \"1.0.0\",\n  build: 42,\n  stable: true,\n  status: @run [echo \"BUILD_SUCCESS\"],\n  metadata: {\n    tags: [\"release\", \"production\"],\n    timestamp: @run [echo \"2024-01-15\"]\n  }\n}\n@add [[\nBuild {{buildInfo.name}} v{{buildInfo.version}} (#{{buildInfo.build}})\nStatus: {{buildInfo.status}}\nStable: {{buildInfo.stable}}\nDate: {{buildInfo.metadata.timestamp}}\n]]",
  "expected": "Build MyProject v1.0.0 (#42)\nStatus: BUILD_SUCCESS\nStable: true\nDate: 2024-01-15",
  "ast": [
    {
      "type": "Directive",
      "nodeId": "b4b67763-f10c-4baf-8bc2-9bdbab935faf",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 30,
          "line": 1,
          "column": 31
        }
      },
      "kind": "text",
      "subtype": "textAssignment",
      "source": "literal",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "81fbef14-3c78-4bb9-90da-6e563b7018b2",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "projectVar"
          }
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "e3477492-e7f1-4165-a184-eea61c261d16",
            "location": {
              "start": {
                "offset": 19,
                "line": 1,
                "column": 20
              },
              "end": {
                "offset": 30,
                "line": 1,
                "column": 31
              }
            },
            "content": "MyProject"
          }
        ]
      },
      "raw": {
        "identifier": "projectVar",
        "content": "MyProject"
      },
      "meta": {
        "sourceType": "literal",
        "hasVariables": false,
        "isTemplateContent": false
      }
    },
    {
      "type": "Newline",
      "nodeId": "9fce8134-3cbb-4666-a5ab-49e26ea8f6ae",
      "location": {
        "start": {
          "offset": 30,
          "line": 1,
          "column": 31
        },
        "end": {
          "offset": 31,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "741cf254-f599-4a05-a980-d8e7b9dbcc37",
      "location": {
        "start": {
          "offset": 31,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 256,
          "line": 12,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "dc7a6578-3fb9-49be-a822-5f40a6c66f98",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "buildInfo"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "name": {
              "type": "VariableReference",
              "nodeId": "79362e96-1bf4-44ba-bcfd-7cff94e7407e",
              "location": {
                "start": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                },
                "end": {
                  "offset": 0,
                  "line": 1,
                  "column": 1
                }
              },
              "valueType": "varIdentifier",
              "isVariableReference": true,
              "identifier": "projectVar"
            },
            "version": [
              {
                "type": "Text",
                "nodeId": "3ad1e245-2a80-443d-bcfb-59319504c6be",
                "location": {
                  "start": {
                    "offset": 83,
                    "line": 4,
                    "column": 12
                  },
                  "end": {
                    "offset": 90,
                    "line": 4,
                    "column": 19
                  }
                },
                "content": "1.0.0"
              }
            ],
            "build": 42,
            "stable": true,
            "status": {
              "type": "Directive",
              "nodeId": "2eeaca20-bc55-435b-a24e-1eec2614775e",
              "location": {
                "start": {
                  "offset": 131,
                  "line": 7,
                  "column": 11
                },
                "end": {
                  "offset": 158,
                  "line": 7,
                  "column": 38
                }
              },
              "kind": "run",
              "subtype": "runCommand",
              "source": null,
              "values": {
                "command": [
                  {
                    "type": "Text",
                    "nodeId": "d5802a1a-eb07-47d8-b127-95c4c41af90a",
                    "location": {
                      "start": {
                        "offset": 137,
                        "line": 7,
                        "column": 17
                      },
                      "end": {
                        "offset": 157,
                        "line": 7,
                        "column": 37
                      }
                    },
                    "content": "echo \"BUILD_SUCCESS\""
                  }
                ],
                "commandBases": [
                  {
                    "nodeId": "e0fb1917-e453-47eb-b53b-40d5a20a375b",
                    "location": {
                      "start": {
                        "offset": 136,
                        "line": 7,
                        "column": 16
                      },
                      "end": {
                        "offset": 158,
                        "line": 7,
                        "column": 38
                      }
                    },
                    "command": "echo"
                  }
                ]
              },
              "raw": {
                "command": "echo \"BUILD_SUCCESS\"",
                "commandBases": [
                  "echo"
                ]
              },
              "meta": {
                "hasVariables": false,
                "commandCount": 1,
                "hasScriptRunner": false,
                "isDataValue": true,
                "isMultiLine": false
              }
            },
            "metadata": {
              "type": "object",
              "properties": {
                "tags": {
                  "type": "array",
                  "items": [
                    [
                      {
                        "type": "Text",
                        "nodeId": "61067771-8058-46d5-b450-c3652d816ab1",
                        "location": {
                          "start": {
                            "offset": 185,
                            "line": 9,
                            "column": 12
                          },
                          "end": {
                            "offset": 194,
                            "line": 9,
                            "column": 21
                          }
                        },
                        "content": "release"
                      }
                    ],
                    [
                      {
                        "type": "Text",
                        "nodeId": "71886054-6a5a-40ca-8907-b4f8b84a6e48",
                        "location": {
                          "start": {
                            "offset": 196,
                            "line": 9,
                            "column": 23
                          },
                          "end": {
                            "offset": 208,
                            "line": 9,
                            "column": 35
                          }
                        },
                        "content": "production"
                      }
                    ]
                  ]
                },
                "timestamp": {
                  "type": "Directive",
                  "nodeId": "77ab7783-60c4-472f-b1f6-b99ab2b49fba",
                  "location": {
                    "start": {
                      "offset": 226,
                      "line": 10,
                      "column": 16
                    },
                    "end": {
                      "offset": 250,
                      "line": 10,
                      "column": 40
                    }
                  },
                  "kind": "run",
                  "subtype": "runCommand",
                  "source": null,
                  "values": {
                    "command": [
                      {
                        "type": "Text",
                        "nodeId": "ea917d85-c874-4300-90ec-113e1207deb7",
                        "location": {
                          "start": {
                            "offset": 232,
                            "line": 10,
                            "column": 22
                          },
                          "end": {
                            "offset": 249,
                            "line": 10,
                            "column": 39
                          }
                        },
                        "content": "echo \"2024-01-15\""
                      }
                    ],
                    "commandBases": [
                      {
                        "nodeId": "70b85b8a-6657-49eb-bb73-23fa548e48f1",
                        "location": {
                          "start": {
                            "offset": 231,
                            "line": 10,
                            "column": 21
                          },
                          "end": {
                            "offset": 250,
                            "line": 10,
                            "column": 40
                          }
                        },
                        "command": "echo"
                      }
                    ]
                  },
                  "raw": {
                    "command": "echo \"2024-01-15\"",
                    "commandBases": [
                      "echo"
                    ]
                  },
                  "meta": {
                    "hasVariables": false,
                    "commandCount": 1,
                    "hasScriptRunner": false,
                    "isDataValue": true,
                    "isMultiLine": false
                  }
                }
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "buildInfo",
        "value": "{\n  \"name\": {\n    \"type\": \"VariableReference\",\n    \"nodeId\": \"79362e96-1bf4-44ba-bcfd-7cff94e7407e\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      },\n      \"end\": {\n        \"offset\": 0,\n        \"line\": 1,\n        \"column\": 1\n      }\n    },\n    \"valueType\": \"varIdentifier\",\n    \"isVariableReference\": true,\n    \"identifier\": \"projectVar\"\n  },\n  \"version\": [\n    {\n      \"type\": \"Text\",\n      \"nodeId\": \"3ad1e245-2a80-443d-bcfb-59319504c6be\",\n      \"location\": {\n        \"start\": {\n          \"offset\": 83,\n          \"line\": 4,\n          \"column\": 12\n        },\n        \"end\": {\n          \"offset\": 90,\n          \"line\": 4,\n          \"column\": 19\n        }\n      },\n      \"content\": \"1.0.0\"\n    }\n  ],\n  \"build\": 42,\n  \"stable\": true,\n  \"status\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"2eeaca20-bc55-435b-a24e-1eec2614775e\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 131,\n        \"line\": 7,\n        \"column\": 11\n      },\n      \"end\": {\n        \"offset\": 158,\n        \"line\": 7,\n        \"column\": 38\n      }\n    },\n    \"kind\": \"run\",\n    \"subtype\": \"runCommand\",\n    \"source\": null,\n    \"values\": {\n      \"command\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"d5802a1a-eb07-47d8-b127-95c4c41af90a\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 137,\n              \"line\": 7,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 157,\n              \"line\": 7,\n              \"column\": 37\n            }\n          },\n          \"content\": \"echo \\\"BUILD_SUCCESS\\\"\"\n        }\n      ],\n      \"commandBases\": [\n        {\n          \"nodeId\": \"e0fb1917-e453-47eb-b53b-40d5a20a375b\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 136,\n              \"line\": 7,\n              \"column\": 16\n            },\n            \"end\": {\n              \"offset\": 158,\n              \"line\": 7,\n              \"column\": 38\n            }\n          },\n          \"command\": \"echo\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"command\": \"echo \\\"BUILD_SUCCESS\\\"\",\n      \"commandBases\": [\n        \"echo\"\n      ]\n    },\n    \"meta\": {\n      \"hasVariables\": false,\n      \"commandCount\": 1,\n      \"hasScriptRunner\": false,\n      \"isDataValue\": true,\n      \"isMultiLine\": false\n    }\n  },\n  \"metadata\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"tags\": {\n        \"type\": \"array\",\n        \"items\": [\n          [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"61067771-8058-46d5-b450-c3652d816ab1\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 185,\n                  \"line\": 9,\n                  \"column\": 12\n                },\n                \"end\": {\n                  \"offset\": 194,\n                  \"line\": 9,\n                  \"column\": 21\n                }\n              },\n              \"content\": \"release\"\n            }\n          ],\n          [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"71886054-6a5a-40ca-8907-b4f8b84a6e48\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 196,\n                  \"line\": 9,\n                  \"column\": 23\n                },\n                \"end\": {\n                  \"offset\": 208,\n                  \"line\": 9,\n                  \"column\": 35\n                }\n              },\n              \"content\": \"production\"\n            }\n          ]\n        ]\n      },\n      \"timestamp\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"77ab7783-60c4-472f-b1f6-b99ab2b49fba\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 226,\n            \"line\": 10,\n            \"column\": 16\n          },\n          \"end\": {\n            \"offset\": 250,\n            \"line\": 10,\n            \"column\": 40\n          }\n        },\n        \"kind\": \"run\",\n        \"subtype\": \"runCommand\",\n        \"source\": null,\n        \"values\": {\n          \"command\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"ea917d85-c874-4300-90ec-113e1207deb7\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 232,\n                  \"line\": 10,\n                  \"column\": 22\n                },\n                \"end\": {\n                  \"offset\": 249,\n                  \"line\": 10,\n                  \"column\": 39\n                }\n              },\n              \"content\": \"echo \\\"2024-01-15\\\"\"\n            }\n          ],\n          \"commandBases\": [\n            {\n              \"nodeId\": \"70b85b8a-6657-49eb-bb73-23fa548e48f1\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 231,\n                  \"line\": 10,\n                  \"column\": 21\n                },\n                \"end\": {\n                  \"offset\": 250,\n                  \"line\": 10,\n                  \"column\": 40\n                }\n              },\n              \"command\": \"echo\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"command\": \"echo \\\"2024-01-15\\\"\",\n          \"commandBases\": [\n            \"echo\"\n          ]\n        },\n        \"meta\": {\n          \"hasVariables\": false,\n          \"commandCount\": 1,\n          \"hasScriptRunner\": false,\n          \"isDataValue\": true,\n          \"isMultiLine\": false\n        }\n      }\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 6
        }
      }
    },
    {
      "type": "Newline",
      "nodeId": "611e129f-9c7a-4472-a803-5161118c8033",
      "location": {
        "start": {
          "offset": 256,
          "line": 12,
          "column": 2
        },
        "end": {
          "offset": 257,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "000354ff-7f8a-42a4-b9e9-65f186a7829e",
      "location": {
        "start": {
          "offset": 257,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 435,
          "line": 18,
          "column": 3
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "Text",
            "nodeId": "dee01f07-d246-45b0-b0c9-138729e41a88",
            "location": {
              "start": {
                "offset": 264,
                "line": 13,
                "column": 8
              },
              "end": {
                "offset": 271,
                "line": 14,
                "column": 7
              }
            },
            "content": "\nBuild "
          },
          {
            "type": "VariableReference",
            "nodeId": "30a4a512-2137-4275-a4ab-4e79083d9fef",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "buildInfo",
            "fields": [
              {
                "type": "field",
                "name": "name"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "b5d4980f-8876-46eb-9d21-30715832a3ef",
            "location": {
              "start": {
                "offset": 289,
                "line": 14,
                "column": 25
              },
              "end": {
                "offset": 291,
                "line": 14,
                "column": 27
              }
            },
            "content": " v"
          },
          {
            "type": "VariableReference",
            "nodeId": "faf1297c-98ff-4c89-bf25-5524f78b99bc",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "buildInfo",
            "fields": [
              {
                "type": "field",
                "name": "version"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "b3a1017e-aa83-4ce5-a6bc-60882ba307b6",
            "location": {
              "start": {
                "offset": 312,
                "line": 14,
                "column": 48
              },
              "end": {
                "offset": 315,
                "line": 14,
                "column": 51
              }
            },
            "content": " (#"
          },
          {
            "type": "VariableReference",
            "nodeId": "adf19043-376b-451f-8156-79ff68c73ea3",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "buildInfo",
            "fields": [
              {
                "type": "field",
                "name": "build"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "0ffd47c1-4df5-4c62-bccb-1d850aff0a72",
            "location": {
              "start": {
                "offset": 334,
                "line": 14,
                "column": 70
              },
              "end": {
                "offset": 344,
                "line": 15,
                "column": 9
              }
            },
            "content": ")\nStatus: "
          },
          {
            "type": "VariableReference",
            "nodeId": "c859c105-c53c-4be9-9d83-d1deb14f6fb4",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "buildInfo",
            "fields": [
              {
                "type": "field",
                "name": "status"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "dfdf4234-f7d5-48eb-8986-c40d861c8fbe",
            "location": {
              "start": {
                "offset": 364,
                "line": 15,
                "column": 29
              },
              "end": {
                "offset": 373,
                "line": 16,
                "column": 9
              }
            },
            "content": "\nStable: "
          },
          {
            "type": "VariableReference",
            "nodeId": "72d6fd7c-5746-4b82-b676-07f95e6f8549",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "buildInfo",
            "fields": [
              {
                "type": "field",
                "name": "stable"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "c187e90a-5e0c-4fec-a4f2-bac1ad9eeccd",
            "location": {
              "start": {
                "offset": 393,
                "line": 16,
                "column": 29
              },
              "end": {
                "offset": 400,
                "line": 17,
                "column": 7
              }
            },
            "content": "\nDate: "
          },
          {
            "type": "VariableReference",
            "nodeId": "b48c1366-1cee-4a09-9173-0b68a0362dee",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "buildInfo",
            "fields": [
              {
                "type": "field",
                "name": "metadata"
              },
              {
                "type": "field",
                "name": "timestamp"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "371c952b-380e-4a07-bcbc-99a1e941574a",
            "location": {
              "start": {
                "offset": 432,
                "line": 17,
                "column": 39
              },
              "end": {
                "offset": 433,
                "line": 18,
                "column": 1
              }
            },
            "content": "\n"
          }
        ]
      },
      "raw": {
        "content": "\nBuild {{buildInfo}} v{{buildInfo}} (#{{buildInfo}})\nStatus: {{buildInfo}}\nStable: {{buildInfo}}\nDate: {{buildInfo}}\n"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ]
}