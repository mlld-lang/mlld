{
  "name": "data-template-invocation",
  "description": "Test fixture for data/template-invocation",
  "category": "data",
  "subcategory": "template-invocation",
  "input": "@text greeting(name) = @add [[Hello, {{name}}!]]\n@text farewell(name, time) = @add [[Goodbye {{name}}, see you {{time}}!]]\n\n@data messages = {\n  welcome: @add @greeting(\"Alice\"),\n  goodbye: @add @farewell(\"Bob\", \"tomorrow\"),\n  nested: {\n    morning: @add @greeting(\"Charlie\"),\n    evening: @add @farewell(\"David\", \"next week\")\n  }\n}\n\n@add [[{{messages.welcome}}\n{{messages.goodbye}}\n{{messages.nested.morning}}\n{{messages.nested.evening}}]]",
  "expected": "Hello, Alice!\nGoodbye Bob, see you tomorrow!\nHello, Charlie!\nGoodbye David, see you next week!",
  "ast": [
    {
      "type": "Directive",
      "nodeId": "90c60acf-38ef-44ac-9a45-c537acffc649",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 48,
          "line": 1,
          "column": 49
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "ad32c02a-1468-4aa2-9c9c-8574b47899c6",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "greeting"
          }
        ],
        "params": [
          "name"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "dbb8aeeb-c411-4c49-8b21-cacf4ee59559",
            "location": {
              "start": {
                "offset": 30,
                "line": 1,
                "column": 31
              },
              "end": {
                "offset": 37,
                "line": 1,
                "column": 38
              }
            },
            "content": "Hello, "
          },
          {
            "type": "VariableReference",
            "nodeId": "8554aca6-cbb0-4ef2-801e-1d822a968ad6",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "73118b1d-1ea3-40e7-98be-9843e2f47ed5",
            "location": {
              "start": {
                "offset": 45,
                "line": 1,
                "column": 46
              },
              "end": {
                "offset": 46,
                "line": 1,
                "column": 47
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "greeting",
        "params": [
          "name"
        ],
        "content": "Hello, {{name}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 1
      }
    },
    {
      "type": "Newline",
      "nodeId": "37e7d568-763b-43e0-8438-419986bf6d4d",
      "location": {
        "start": {
          "offset": 48,
          "line": 1,
          "column": 49
        },
        "end": {
          "offset": 49,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "3f3aab02-e2e1-4b62-be53-83f14f9eb574",
      "location": {
        "start": {
          "offset": 49,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 122,
          "line": 2,
          "column": 74
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "9c4f9fa4-ca41-4476-9fd9-4180cec780c1",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "farewell"
          }
        ],
        "params": [
          "name",
          "time"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "127f5b12-90dd-4231-a061-9e753fddb590",
            "location": {
              "start": {
                "offset": 85,
                "line": 2,
                "column": 37
              },
              "end": {
                "offset": 93,
                "line": 2,
                "column": 45
              }
            },
            "content": "Goodbye "
          },
          {
            "type": "VariableReference",
            "nodeId": "2d0cab2d-cb39-41d5-a56a-bd546237b35f",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "493f9e82-eede-49ac-8cb0-9b126869067a",
            "location": {
              "start": {
                "offset": 101,
                "line": 2,
                "column": 53
              },
              "end": {
                "offset": 111,
                "line": 2,
                "column": 63
              }
            },
            "content": ", see you "
          },
          {
            "type": "VariableReference",
            "nodeId": "30c526a2-5f3c-4677-9890-2ebf4245caea",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "time"
          },
          {
            "type": "Text",
            "nodeId": "698f3ac3-4942-40cb-9511-807db2b64345",
            "location": {
              "start": {
                "offset": 119,
                "line": 2,
                "column": 71
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 72
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "farewell",
        "params": [
          "name",
          "time"
        ],
        "content": "Goodbye {{name}}, see you {{time}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Text",
      "nodeId": "4f427fae-adf8-47e9-b4f1-575db77d2797",
      "location": {
        "start": {
          "offset": 122,
          "line": 2,
          "column": 74
        },
        "end": {
          "offset": 124,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "370a2f12-a64a-414e-bbc4-e6dc42ef3e0b",
      "location": {
        "start": {
          "offset": 124,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 332,
          "line": 11,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "883a5f1c-7624-4568-9993-d0d757c1573a",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "messages"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "welcome": {
              "type": "Directive",
              "nodeId": "a875e9a2-8f69-4ee5-8651-598763aa8dd9",
              "location": {
                "start": {
                  "offset": 154,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 177,
                  "line": 5,
                  "column": 35
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "3e2fb249-ccc8-46d3-960d-a976bf8adffb",
                    "location": {
                      "start": {
                        "offset": 159,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 177,
                        "line": 5,
                        "column": 35
                      }
                    },
                    "content": "greeting"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  }
                ]
              },
              "raw": {
                "templateName": "greeting",
                "arguments": [
                  "\"Alice\""
                ]
              },
              "meta": {
                "argumentCount": 1,
                "isDataValue": true
              }
            },
            "goodbye": {
              "type": "Directive",
              "nodeId": "033a89f9-77f5-4857-b671-c400614b1e00",
              "location": {
                "start": {
                  "offset": 190,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 223,
                  "line": 6,
                  "column": 45
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "a73acc08-fcbd-4def-8a6f-071aa2da60b5",
                    "location": {
                      "start": {
                        "offset": 195,
                        "line": 6,
                        "column": 17
                      },
                      "end": {
                        "offset": 223,
                        "line": 6,
                        "column": 45
                      }
                    },
                    "content": "farewell"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Bob"
                  },
                  {
                    "type": "string",
                    "value": "tomorrow"
                  }
                ]
              },
              "raw": {
                "templateName": "farewell",
                "arguments": [
                  "\"Bob\"",
                  "\"tomorrow\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "nested": {
              "type": "object",
              "properties": {
                "morning": {
                  "type": "Directive",
                  "nodeId": "9a2fa80a-6680-4291-8a46-84e676086f00",
                  "location": {
                    "start": {
                      "offset": 250,
                      "line": 8,
                      "column": 14
                    },
                    "end": {
                      "offset": 275,
                      "line": 8,
                      "column": 39
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "25914241-1d76-4f34-a25c-6a4062bafec9",
                        "location": {
                          "start": {
                            "offset": 255,
                            "line": 8,
                            "column": 19
                          },
                          "end": {
                            "offset": 275,
                            "line": 8,
                            "column": 39
                          }
                        },
                        "content": "greeting"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Charlie"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "greeting",
                    "arguments": [
                      "\"Charlie\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 1,
                    "isDataValue": true
                  }
                },
                "evening": {
                  "type": "Directive",
                  "nodeId": "caa7a70f-704f-4cf9-9b57-ada346b11f89",
                  "location": {
                    "start": {
                      "offset": 290,
                      "line": 9,
                      "column": 14
                    },
                    "end": {
                      "offset": 326,
                      "line": 9,
                      "column": 50
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "18c304b3-cb66-4811-97c2-d01791eca03f",
                        "location": {
                          "start": {
                            "offset": 295,
                            "line": 9,
                            "column": 19
                          },
                          "end": {
                            "offset": 326,
                            "line": 9,
                            "column": 50
                          }
                        },
                        "content": "farewell"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "David"
                      },
                      {
                        "type": "string",
                        "value": "next week"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "farewell",
                    "arguments": [
                      "\"David\"",
                      "\"next week\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                }
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "messages",
        "value": "{\n  \"welcome\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"a875e9a2-8f69-4ee5-8651-598763aa8dd9\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 154,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 177,\n        \"line\": 5,\n        \"column\": 35\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"3e2fb249-ccc8-46d3-960d-a976bf8adffb\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 159,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 177,\n              \"line\": 5,\n              \"column\": 35\n            }\n          },\n          \"content\": \"greeting\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"greeting\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 1,\n      \"isDataValue\": true\n    }\n  },\n  \"goodbye\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"033a89f9-77f5-4857-b671-c400614b1e00\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 190,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 223,\n        \"line\": 6,\n        \"column\": 45\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"a73acc08-fcbd-4def-8a6f-071aa2da60b5\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 195,\n              \"line\": 6,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 223,\n              \"line\": 6,\n              \"column\": 45\n            }\n          },\n          \"content\": \"farewell\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Bob\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"tomorrow\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"farewell\",\n      \"arguments\": [\n        \"\\\"Bob\\\"\",\n        \"\\\"tomorrow\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"nested\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"morning\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"9a2fa80a-6680-4291-8a46-84e676086f00\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 250,\n            \"line\": 8,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 275,\n            \"line\": 8,\n            \"column\": 39\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"25914241-1d76-4f34-a25c-6a4062bafec9\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 255,\n                  \"line\": 8,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 275,\n                  \"line\": 8,\n                  \"column\": 39\n                }\n              },\n              \"content\": \"greeting\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Charlie\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"greeting\",\n          \"arguments\": [\n            \"\\\"Charlie\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 1,\n          \"isDataValue\": true\n        }\n      },\n      \"evening\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"caa7a70f-704f-4cf9-9b57-ada346b11f89\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 290,\n            \"line\": 9,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 326,\n            \"line\": 9,\n            \"column\": 50\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"18c304b3-cb66-4811-97c2-d01791eca03f\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 295,\n                  \"line\": 9,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 326,\n                  \"line\": 9,\n                  \"column\": 50\n                }\n              },\n              \"content\": \"farewell\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"David\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"next week\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"farewell\",\n          \"arguments\": [\n            \"\\\"David\\\"\",\n            \"\\\"next week\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      }\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 3
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "cf55bbad-e35c-4ad7-b27c-0e013599ba0a",
      "location": {
        "start": {
          "offset": 332,
          "line": 11,
          "column": 2
        },
        "end": {
          "offset": 334,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "3a76d635-69c2-47be-a471-a39631a6e013",
      "location": {
        "start": {
          "offset": 334,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 440,
          "line": 16,
          "column": 30
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "e98722da-3f69-4a99-9f31-a21995d52bcb",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "welcome"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "a349de11-ac65-49a3-97d0-d8d1ba062a0d",
            "location": {
              "start": {
                "offset": 361,
                "line": 13,
                "column": 28
              },
              "end": {
                "offset": 362,
                "line": 14,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "b0e03bbc-1bb0-452a-a744-0fd36b91bb54",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "goodbye"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "cbb07db1-a158-4dc0-9032-1812c756c4a0",
            "location": {
              "start": {
                "offset": 382,
                "line": 14,
                "column": 21
              },
              "end": {
                "offset": 383,
                "line": 15,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "3eef8b9d-b7fa-4b3e-ab92-da5d41c1d7c7",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "morning"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "990ab309-c172-4543-9001-8820690a2be5",
            "location": {
              "start": {
                "offset": 410,
                "line": 15,
                "column": 28
              },
              "end": {
                "offset": 411,
                "line": 16,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "d7c96ae6-7e85-478d-a5c0-129a668b8d60",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "evening"
              }
            ]
          }
        ]
      },
      "raw": {
        "content": "{{messages}}\n{{messages}}\n{{messages}}\n{{messages}}"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ]
}