{
  "name": "data-template-invocation",
  "description": "Test fixture for data/template-invocation",
  "category": "data",
  "subcategory": "template-invocation",
  "input": "@text greeting(name) = @add [[Hello, {{name}}!]]\n@text farewell(name, time) = @add [[Goodbye {{name}}, see you {{time}}!]]\n\n@data messages = {\n  welcome: @add @greeting(\"Alice\"),\n  goodbye: @add @farewell(\"Bob\", \"tomorrow\"),\n  nested: {\n    morning: @add @greeting(\"Charlie\"),\n    evening: @add @farewell(\"David\", \"next week\")\n  }\n}\n\n@add [[{{messages.welcome}}\n{{messages.goodbye}}\n{{messages.nested.morning}}\n{{messages.nested.evening}}]]",
  "expected": "Hello, Alice!\nGoodbye Bob, see you tomorrow!\nHello, Charlie!\nGoodbye David, see you next week!",
  "ast": [
    {
      "type": "Directive",
      "nodeId": "f1855101-9460-41c2-93ef-0d417f3eb90c",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 48,
          "line": 1,
          "column": 49
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "149bc661-2f75-4849-8879-6577a8b14cbf",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "greeting"
          }
        ],
        "params": [
          "name"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "78d363fe-e163-493d-af78-7a0cd1a2eda7",
            "location": {
              "start": {
                "offset": 30,
                "line": 1,
                "column": 31
              },
              "end": {
                "offset": 37,
                "line": 1,
                "column": 38
              }
            },
            "content": "Hello, "
          },
          {
            "type": "VariableReference",
            "nodeId": "1ada9095-089a-413f-a6ec-2de08d9813b0",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "65dee94f-b166-44aa-84c7-94d3b559720b",
            "location": {
              "start": {
                "offset": 45,
                "line": 1,
                "column": 46
              },
              "end": {
                "offset": 46,
                "line": 1,
                "column": 47
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "greeting",
        "params": [
          "name"
        ],
        "content": "Hello, {{name}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 1
      }
    },
    {
      "type": "Newline",
      "nodeId": "dd8dfca7-28b8-463b-befc-f723251ce0c3",
      "location": {
        "start": {
          "offset": 48,
          "line": 1,
          "column": 49
        },
        "end": {
          "offset": 49,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "54a2835a-80b2-4aa4-ae83-173f01cadfa1",
      "location": {
        "start": {
          "offset": 49,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 122,
          "line": 2,
          "column": 74
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "a22e3587-64f3-4204-a11e-dc2fceceb7ba",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "farewell"
          }
        ],
        "params": [
          "name",
          "time"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "e61766a5-9f5d-4fc1-9f21-60f435a03972",
            "location": {
              "start": {
                "offset": 85,
                "line": 2,
                "column": 37
              },
              "end": {
                "offset": 93,
                "line": 2,
                "column": 45
              }
            },
            "content": "Goodbye "
          },
          {
            "type": "VariableReference",
            "nodeId": "2b036898-fc87-417d-b57b-321caed1300d",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "bcd50d01-9a01-4a37-bca0-408d75f80ffc",
            "location": {
              "start": {
                "offset": 101,
                "line": 2,
                "column": 53
              },
              "end": {
                "offset": 111,
                "line": 2,
                "column": 63
              }
            },
            "content": ", see you "
          },
          {
            "type": "VariableReference",
            "nodeId": "bab11883-b9c4-4ebf-8c39-a3c4ab7e3565",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "time"
          },
          {
            "type": "Text",
            "nodeId": "9dd122dc-6314-4ac5-9f86-891609ee215f",
            "location": {
              "start": {
                "offset": 119,
                "line": 2,
                "column": 71
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 72
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "farewell",
        "params": [
          "name",
          "time"
        ],
        "content": "Goodbye {{name}}, see you {{time}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Text",
      "nodeId": "37c2cb30-c815-45c4-9e6f-f6688dc18782",
      "location": {
        "start": {
          "offset": 122,
          "line": 2,
          "column": 74
        },
        "end": {
          "offset": 124,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "0161eb45-f5eb-4497-9b69-126ff7ef6b86",
      "location": {
        "start": {
          "offset": 124,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 332,
          "line": 11,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "66041476-fb5a-4736-b9ae-8b212b8352e1",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "isVariableReference": true,
            "identifier": "messages"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "welcome": {
              "type": "Directive",
              "nodeId": "3b911923-7d1d-4852-bb64-b46ad7195ae1",
              "location": {
                "start": {
                  "offset": 154,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 177,
                  "line": 5,
                  "column": 35
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "f3f87ed0-6a6a-4567-940f-a246c0f637b0",
                    "location": {
                      "start": {
                        "offset": 159,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 177,
                        "line": 5,
                        "column": 35
                      }
                    },
                    "content": "greeting"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  }
                ]
              },
              "raw": {
                "templateName": "greeting",
                "arguments": [
                  "\"Alice\""
                ]
              },
              "meta": {
                "argumentCount": 1,
                "isDataValue": true
              }
            },
            "goodbye": {
              "type": "Directive",
              "nodeId": "02209f61-e32b-4685-8b68-94b419242c44",
              "location": {
                "start": {
                  "offset": 190,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 223,
                  "line": 6,
                  "column": 45
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "32c10403-738b-4810-b463-fcc2b209c7c4",
                    "location": {
                      "start": {
                        "offset": 195,
                        "line": 6,
                        "column": 17
                      },
                      "end": {
                        "offset": 223,
                        "line": 6,
                        "column": 45
                      }
                    },
                    "content": "farewell"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Bob"
                  },
                  {
                    "type": "string",
                    "value": "tomorrow"
                  }
                ]
              },
              "raw": {
                "templateName": "farewell",
                "arguments": [
                  "\"Bob\"",
                  "\"tomorrow\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "nested": {
              "type": "object",
              "properties": {
                "morning": {
                  "type": "Directive",
                  "nodeId": "9f218287-dc97-4e71-81b5-91dd3db6432a",
                  "location": {
                    "start": {
                      "offset": 250,
                      "line": 8,
                      "column": 14
                    },
                    "end": {
                      "offset": 275,
                      "line": 8,
                      "column": 39
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "59967b6e-eef3-432d-99ae-7ae48082378e",
                        "location": {
                          "start": {
                            "offset": 255,
                            "line": 8,
                            "column": 19
                          },
                          "end": {
                            "offset": 275,
                            "line": 8,
                            "column": 39
                          }
                        },
                        "content": "greeting"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Charlie"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "greeting",
                    "arguments": [
                      "\"Charlie\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 1,
                    "isDataValue": true
                  }
                },
                "evening": {
                  "type": "Directive",
                  "nodeId": "1b42ba41-78b0-42b8-9618-c6ace12df623",
                  "location": {
                    "start": {
                      "offset": 290,
                      "line": 9,
                      "column": 14
                    },
                    "end": {
                      "offset": 326,
                      "line": 9,
                      "column": 50
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "2959982c-82ca-436a-923e-f12879c17f59",
                        "location": {
                          "start": {
                            "offset": 295,
                            "line": 9,
                            "column": 19
                          },
                          "end": {
                            "offset": 326,
                            "line": 9,
                            "column": 50
                          }
                        },
                        "content": "farewell"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "David"
                      },
                      {
                        "type": "string",
                        "value": "next week"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "farewell",
                    "arguments": [
                      "\"David\"",
                      "\"next week\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                }
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "messages",
        "value": "{\n  \"welcome\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"3b911923-7d1d-4852-bb64-b46ad7195ae1\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 154,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 177,\n        \"line\": 5,\n        \"column\": 35\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"f3f87ed0-6a6a-4567-940f-a246c0f637b0\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 159,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 177,\n              \"line\": 5,\n              \"column\": 35\n            }\n          },\n          \"content\": \"greeting\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"greeting\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 1,\n      \"isDataValue\": true\n    }\n  },\n  \"goodbye\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"02209f61-e32b-4685-8b68-94b419242c44\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 190,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 223,\n        \"line\": 6,\n        \"column\": 45\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"32c10403-738b-4810-b463-fcc2b209c7c4\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 195,\n              \"line\": 6,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 223,\n              \"line\": 6,\n              \"column\": 45\n            }\n          },\n          \"content\": \"farewell\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Bob\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"tomorrow\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"farewell\",\n      \"arguments\": [\n        \"\\\"Bob\\\"\",\n        \"\\\"tomorrow\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"nested\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"morning\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"9f218287-dc97-4e71-81b5-91dd3db6432a\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 250,\n            \"line\": 8,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 275,\n            \"line\": 8,\n            \"column\": 39\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"59967b6e-eef3-432d-99ae-7ae48082378e\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 255,\n                  \"line\": 8,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 275,\n                  \"line\": 8,\n                  \"column\": 39\n                }\n              },\n              \"content\": \"greeting\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Charlie\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"greeting\",\n          \"arguments\": [\n            \"\\\"Charlie\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 1,\n          \"isDataValue\": true\n        }\n      },\n      \"evening\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"1b42ba41-78b0-42b8-9618-c6ace12df623\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 290,\n            \"line\": 9,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 326,\n            \"line\": 9,\n            \"column\": 50\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"2959982c-82ca-436a-923e-f12879c17f59\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 295,\n                  \"line\": 9,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 326,\n                  \"line\": 9,\n                  \"column\": 50\n                }\n              },\n              \"content\": \"farewell\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"David\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"next week\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"farewell\",\n          \"arguments\": [\n            \"\\\"David\\\"\",\n            \"\\\"next week\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      }\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 3
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "e02bc4a1-7304-43a1-883b-aca01b367e02",
      "location": {
        "start": {
          "offset": 332,
          "line": 11,
          "column": 2
        },
        "end": {
          "offset": 334,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "44f051c7-ef06-4630-9f64-a45b52cd2307",
      "location": {
        "start": {
          "offset": 334,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 440,
          "line": 16,
          "column": 30
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "22e75a54-813e-4381-ab7f-9b540959c051",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "welcome"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "d7dbc375-f58c-4f33-ae5d-1d428b125bea",
            "location": {
              "start": {
                "offset": 361,
                "line": 13,
                "column": 28
              },
              "end": {
                "offset": 362,
                "line": 14,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "3de5601f-a512-4be8-b7b8-907b6b33a194",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "goodbye"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "7e946199-5420-4903-8504-e42502f3b2d5",
            "location": {
              "start": {
                "offset": 382,
                "line": 14,
                "column": 21
              },
              "end": {
                "offset": 383,
                "line": 15,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "98b24502-9505-4b41-a2f4-168f0504cf54",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "morning"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "34de1f93-d560-4dba-98b1-fec98be48b0d",
            "location": {
              "start": {
                "offset": 410,
                "line": 15,
                "column": 28
              },
              "end": {
                "offset": 411,
                "line": 16,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "f190655a-b90c-40b7-a2c8-b4eee6983b32",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "isVariableReference": true,
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "evening"
              }
            ]
          }
        ]
      },
      "raw": {
        "content": "{{messages}}\n{{messages}}\n{{messages}}\n{{messages}}"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ]
}