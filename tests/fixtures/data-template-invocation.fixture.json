{
  "name": "data-template-invocation",
  "description": "Test fixture for data/template-invocation",
  "category": "data",
  "subcategory": "template-invocation",
  "input": "@text greeting(name) = @add [[Hello, {{name}}!]]\n@text farewell(name, time) = @add [[Goodbye {{name}}, see you {{time}}!]]\n\n@data messages = {\n  welcome: @add @greeting(\"Alice\"),\n  goodbye: @add @farewell(\"Bob\", \"tomorrow\"),\n  nested: {\n    morning: @add @greeting(\"Charlie\"),\n    evening: @add @farewell(\"David\", \"next week\")\n  }\n}\n\n@add [[{{messages.welcome}}\n{{messages.goodbye}}\n{{messages.nested.morning}}\n{{messages.nested.evening}}]]",
  "expected": "Hello, Alice!\nGoodbye Bob, see you tomorrow!\nHello, Charlie!\nGoodbye David, see you next week!",
  "ast": [
    {
      "type": "Directive",
      "nodeId": "880ef5d2-70a6-41a2-8d65-620754dc7874",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 48,
          "line": 1,
          "column": 49
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "7d65cb0c-b346-46b5-acac-193cdcc5cd6e",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "greeting"
          }
        ],
        "params": [
          "name"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "dbe78b36-b53c-411b-b1e4-498c697b742f",
            "location": {
              "start": {
                "offset": 30,
                "line": 1,
                "column": 31
              },
              "end": {
                "offset": 37,
                "line": 1,
                "column": 38
              }
            },
            "content": "Hello, "
          },
          {
            "type": "VariableReference",
            "nodeId": "6d476658-d8e9-4682-a114-bd507492c698",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "c61521d0-586e-4d72-90ea-5c127fd7955f",
            "location": {
              "start": {
                "offset": 45,
                "line": 1,
                "column": 46
              },
              "end": {
                "offset": 46,
                "line": 1,
                "column": 47
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "greeting",
        "params": [
          "name"
        ],
        "content": "Hello, {{name}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 1
      }
    },
    {
      "type": "Newline",
      "nodeId": "d6e5eeaf-db7f-434f-a196-324660142c20",
      "location": {
        "start": {
          "offset": 48,
          "line": 1,
          "column": 49
        },
        "end": {
          "offset": 49,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "74c11e87-473f-4b7c-bdc0-c34e56e7a13e",
      "location": {
        "start": {
          "offset": 49,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 122,
          "line": 2,
          "column": 74
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "a09bf98a-eb66-4cb5-b2be-e87e8893949c",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "farewell"
          }
        ],
        "params": [
          "name",
          "time"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "9afd1f61-4ff0-48ec-8039-4d4f0e6c505f",
            "location": {
              "start": {
                "offset": 85,
                "line": 2,
                "column": 37
              },
              "end": {
                "offset": 93,
                "line": 2,
                "column": 45
              }
            },
            "content": "Goodbye "
          },
          {
            "type": "VariableReference",
            "nodeId": "29430a67-c981-4930-9fc6-6cbcc2abedfd",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "594963f8-4004-400b-9243-e91c89b60687",
            "location": {
              "start": {
                "offset": 101,
                "line": 2,
                "column": 53
              },
              "end": {
                "offset": 111,
                "line": 2,
                "column": 63
              }
            },
            "content": ", see you "
          },
          {
            "type": "VariableReference",
            "nodeId": "d81793ab-d315-4ec2-8129-137279059dab",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "time"
          },
          {
            "type": "Text",
            "nodeId": "89ba6c17-1868-4703-b80b-530e8107f205",
            "location": {
              "start": {
                "offset": 119,
                "line": 2,
                "column": 71
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 72
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "farewell",
        "params": [
          "name",
          "time"
        ],
        "content": "Goodbye {{name}}, see you {{time}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Text",
      "nodeId": "b694c476-f354-4409-b512-833fb3edbb89",
      "location": {
        "start": {
          "offset": 122,
          "line": 2,
          "column": 74
        },
        "end": {
          "offset": 124,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "782ef229-cbd7-468b-a18d-56514175bceb",
      "location": {
        "start": {
          "offset": 124,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 332,
          "line": 11,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "21178e24-1f0d-4e30-b5ec-91645fc33d90",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "messages"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "welcome": {
              "type": "Directive",
              "nodeId": "33f4c901-a986-43ee-a3ed-c28bad1c952d",
              "location": {
                "start": {
                  "offset": 154,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 177,
                  "line": 5,
                  "column": 35
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "2c6de939-7e40-4b75-a854-5c7dac5a5e87",
                    "location": {
                      "start": {
                        "offset": 159,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 177,
                        "line": 5,
                        "column": 35
                      }
                    },
                    "content": "greeting"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  }
                ]
              },
              "raw": {
                "templateName": "greeting",
                "arguments": [
                  "\"Alice\""
                ]
              },
              "meta": {
                "argumentCount": 1,
                "isDataValue": true
              }
            },
            "goodbye": {
              "type": "Directive",
              "nodeId": "ccc64840-3695-4f6b-96c6-164124978464",
              "location": {
                "start": {
                  "offset": 190,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 223,
                  "line": 6,
                  "column": 45
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "7b4f636d-80ee-4dc1-98aa-0ef2e265ef8e",
                    "location": {
                      "start": {
                        "offset": 195,
                        "line": 6,
                        "column": 17
                      },
                      "end": {
                        "offset": 223,
                        "line": 6,
                        "column": 45
                      }
                    },
                    "content": "farewell"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Bob"
                  },
                  {
                    "type": "string",
                    "value": "tomorrow"
                  }
                ]
              },
              "raw": {
                "templateName": "farewell",
                "arguments": [
                  "\"Bob\"",
                  "\"tomorrow\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "nested": {
              "type": "object",
              "properties": {
                "morning": {
                  "type": "Directive",
                  "nodeId": "fa0f35b0-8eb2-46a7-a84a-53cc9bfae651",
                  "location": {
                    "start": {
                      "offset": 250,
                      "line": 8,
                      "column": 14
                    },
                    "end": {
                      "offset": 275,
                      "line": 8,
                      "column": 39
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "4896f68f-3d87-47cc-b9f5-d42518a9c345",
                        "location": {
                          "start": {
                            "offset": 255,
                            "line": 8,
                            "column": 19
                          },
                          "end": {
                            "offset": 275,
                            "line": 8,
                            "column": 39
                          }
                        },
                        "content": "greeting"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Charlie"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "greeting",
                    "arguments": [
                      "\"Charlie\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 1,
                    "isDataValue": true
                  }
                },
                "evening": {
                  "type": "Directive",
                  "nodeId": "04cb7142-eca0-4cfc-a092-11ea1bb16b37",
                  "location": {
                    "start": {
                      "offset": 290,
                      "line": 9,
                      "column": 14
                    },
                    "end": {
                      "offset": 326,
                      "line": 9,
                      "column": 50
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "56c27cf9-5aec-4f85-8ca2-41c1654c1422",
                        "location": {
                          "start": {
                            "offset": 295,
                            "line": 9,
                            "column": 19
                          },
                          "end": {
                            "offset": 326,
                            "line": 9,
                            "column": 50
                          }
                        },
                        "content": "farewell"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "David"
                      },
                      {
                        "type": "string",
                        "value": "next week"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "farewell",
                    "arguments": [
                      "\"David\"",
                      "\"next week\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                }
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "messages",
        "value": "{\n  \"welcome\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"33f4c901-a986-43ee-a3ed-c28bad1c952d\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 154,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 177,\n        \"line\": 5,\n        \"column\": 35\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"2c6de939-7e40-4b75-a854-5c7dac5a5e87\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 159,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 177,\n              \"line\": 5,\n              \"column\": 35\n            }\n          },\n          \"content\": \"greeting\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"greeting\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 1,\n      \"isDataValue\": true\n    }\n  },\n  \"goodbye\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"ccc64840-3695-4f6b-96c6-164124978464\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 190,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 223,\n        \"line\": 6,\n        \"column\": 45\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"7b4f636d-80ee-4dc1-98aa-0ef2e265ef8e\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 195,\n              \"line\": 6,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 223,\n              \"line\": 6,\n              \"column\": 45\n            }\n          },\n          \"content\": \"farewell\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Bob\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"tomorrow\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"farewell\",\n      \"arguments\": [\n        \"\\\"Bob\\\"\",\n        \"\\\"tomorrow\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"nested\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"morning\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"fa0f35b0-8eb2-46a7-a84a-53cc9bfae651\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 250,\n            \"line\": 8,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 275,\n            \"line\": 8,\n            \"column\": 39\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"4896f68f-3d87-47cc-b9f5-d42518a9c345\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 255,\n                  \"line\": 8,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 275,\n                  \"line\": 8,\n                  \"column\": 39\n                }\n              },\n              \"content\": \"greeting\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Charlie\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"greeting\",\n          \"arguments\": [\n            \"\\\"Charlie\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 1,\n          \"isDataValue\": true\n        }\n      },\n      \"evening\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"04cb7142-eca0-4cfc-a092-11ea1bb16b37\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 290,\n            \"line\": 9,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 326,\n            \"line\": 9,\n            \"column\": 50\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"56c27cf9-5aec-4f85-8ca2-41c1654c1422\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 295,\n                  \"line\": 9,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 326,\n                  \"line\": 9,\n                  \"column\": 50\n                }\n              },\n              \"content\": \"farewell\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"David\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"next week\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"farewell\",\n          \"arguments\": [\n            \"\\\"David\\\"\",\n            \"\\\"next week\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      }\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 3
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "2aa8c22d-b221-4944-b7c5-ba08bb976bcb",
      "location": {
        "start": {
          "offset": 332,
          "line": 11,
          "column": 2
        },
        "end": {
          "offset": 334,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "83396840-9382-48fe-8a78-4f5bf9f1d4b7",
      "location": {
        "start": {
          "offset": 334,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 440,
          "line": 16,
          "column": 30
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "d5ead61b-1d10-409b-8cf6-88ab2cf629d6",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "welcome"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "3a18ae87-a91a-4496-b3dc-fe1d4f393e22",
            "location": {
              "start": {
                "offset": 361,
                "line": 13,
                "column": 28
              },
              "end": {
                "offset": 362,
                "line": 14,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "fa526b89-c25f-4089-8871-7242d903a9fe",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "goodbye"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "f8f362b8-af61-4bfe-840d-d37b72695417",
            "location": {
              "start": {
                "offset": 382,
                "line": 14,
                "column": 21
              },
              "end": {
                "offset": 383,
                "line": 15,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "578bbeb6-3965-457b-8734-51476c5f89c4",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "morning"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "2f3b6857-dca7-4d62-85c1-e3d0cc8b3b6d",
            "location": {
              "start": {
                "offset": 410,
                "line": 15,
                "column": 28
              },
              "end": {
                "offset": 411,
                "line": 16,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "17d026f3-f579-44f8-9673-4da03173c0ee",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "evening"
              }
            ]
          }
        ]
      },
      "raw": {
        "content": "{{messages}}\n{{messages}}\n{{messages}}\n{{messages}}"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ]
}