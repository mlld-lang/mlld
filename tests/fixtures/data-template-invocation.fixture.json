{
  "name": "data-template-invocation",
  "description": "Test fixture for data/template-invocation",
  "category": "data",
  "subcategory": "template-invocation",
  "input": "@text greeting(name) = @add [[Hello, {{name}}!]]\n@text farewell(name, time) = @add [[Goodbye {{name}}, see you {{time}}!]]\n\n@data messages = {\n  welcome: @add @greeting(\"Alice\"),\n  goodbye: @add @farewell(\"Bob\", \"tomorrow\"),\n  nested: {\n    morning: @add @greeting(\"Charlie\"),\n    evening: @add @farewell(\"David\", \"next week\")\n  }\n}\n\n@add [[{{messages.welcome}}\n{{messages.goodbye}}\n{{messages.nested.morning}}\n{{messages.nested.evening}}]]",
  "expected": "Hello, Alice!\nGoodbye Bob, see you tomorrow!\nHello, Charlie!\nGoodbye David, see you next week!",
  "ast": [
    {
      "type": "Directive",
      "nodeId": "830acb59-4e84-4aff-96d1-2b6f52321e93",
      "location": {
        "start": {
          "offset": 0,
          "line": 1,
          "column": 1
        },
        "end": {
          "offset": 48,
          "line": 1,
          "column": 49
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "718b0ac9-cbc5-4afb-ae03-0c519a9f0a57",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "greeting"
          }
        ],
        "params": [
          "name"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "c22b0928-3dfa-4349-b7bb-09e9289b68b2",
            "location": {
              "start": {
                "offset": 30,
                "line": 1,
                "column": 31
              },
              "end": {
                "offset": 37,
                "line": 1,
                "column": 38
              }
            },
            "content": "Hello, "
          },
          {
            "type": "VariableReference",
            "nodeId": "08688aa8-46e4-47c5-b3ce-c4ca6d333dc7",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "82f919d0-5e1a-4517-9ef3-95f4cc164d81",
            "location": {
              "start": {
                "offset": 45,
                "line": 1,
                "column": 46
              },
              "end": {
                "offset": 46,
                "line": 1,
                "column": 47
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "greeting",
        "params": [
          "name"
        ],
        "content": "Hello, {{name}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 1
      }
    },
    {
      "type": "Newline",
      "nodeId": "c4c9e63d-0bb5-4aa1-9768-90fafc17048b",
      "location": {
        "start": {
          "offset": 48,
          "line": 1,
          "column": 49
        },
        "end": {
          "offset": 49,
          "line": 2,
          "column": 1
        }
      },
      "content": "\n"
    },
    {
      "type": "Directive",
      "nodeId": "0242fd80-30fe-49c9-af71-59fada14cc71",
      "location": {
        "start": {
          "offset": 49,
          "line": 2,
          "column": 1
        },
        "end": {
          "offset": 122,
          "line": 2,
          "column": 74
        }
      },
      "kind": "text",
      "subtype": "textTemplateDefinition",
      "source": "template",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "4856038b-323c-4248-bba6-4b48bc7efd2c",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "farewell"
          }
        ],
        "params": [
          "name",
          "time"
        ],
        "content": [
          {
            "type": "Text",
            "nodeId": "294873cb-9e4b-428c-9366-d76a6eb3a4d8",
            "location": {
              "start": {
                "offset": 85,
                "line": 2,
                "column": 37
              },
              "end": {
                "offset": 93,
                "line": 2,
                "column": 45
              }
            },
            "content": "Goodbye "
          },
          {
            "type": "VariableReference",
            "nodeId": "d3490b5b-4f48-40fa-a3f5-d91b14971255",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "name"
          },
          {
            "type": "Text",
            "nodeId": "b2c0fa84-a2d7-419a-b9be-cafb6229bf95",
            "location": {
              "start": {
                "offset": 101,
                "line": 2,
                "column": 53
              },
              "end": {
                "offset": 111,
                "line": 2,
                "column": 63
              }
            },
            "content": ", see you "
          },
          {
            "type": "VariableReference",
            "nodeId": "8d0fc4a8-bd29-4f5b-b4e1-85525313ba64",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "time"
          },
          {
            "type": "Text",
            "nodeId": "808544a2-9ea2-4c16-a2c3-2a88df62026a",
            "location": {
              "start": {
                "offset": 119,
                "line": 2,
                "column": 71
              },
              "end": {
                "offset": 120,
                "line": 2,
                "column": 72
              }
            },
            "content": "!"
          }
        ]
      },
      "raw": {
        "identifier": "farewell",
        "params": [
          "name",
          "time"
        ],
        "content": "Goodbye {{name}}, see you {{time}}!"
      },
      "meta": {
        "sourceType": "template",
        "hasVariables": true,
        "isTemplateContent": true,
        "isParameterized": true,
        "parameterCount": 2
      }
    },
    {
      "type": "Text",
      "nodeId": "e2fcf0b3-7299-4c1b-b90a-a6486cdab4c9",
      "location": {
        "start": {
          "offset": 122,
          "line": 2,
          "column": 74
        },
        "end": {
          "offset": 124,
          "line": 4,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "417a467f-c709-411c-b42c-98ec356b6622",
      "location": {
        "start": {
          "offset": 124,
          "line": 4,
          "column": 1
        },
        "end": {
          "offset": 332,
          "line": 11,
          "column": 2
        }
      },
      "kind": "data",
      "subtype": "dataAssignment",
      "source": "object",
      "values": {
        "identifier": [
          {
            "type": "VariableReference",
            "nodeId": "ed4a5af7-f859-4a35-953e-3067413be533",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "identifier",
            "identifier": "messages"
          }
        ],
        "value": {
          "type": "object",
          "properties": {
            "welcome": {
              "type": "Directive",
              "nodeId": "59a63f9c-c0ae-44ed-a40f-05913801c536",
              "location": {
                "start": {
                  "offset": 154,
                  "line": 5,
                  "column": 12
                },
                "end": {
                  "offset": 177,
                  "line": 5,
                  "column": 35
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "d3a75c64-5685-483f-9337-1f1cb01b5775",
                    "location": {
                      "start": {
                        "offset": 159,
                        "line": 5,
                        "column": 17
                      },
                      "end": {
                        "offset": 177,
                        "line": 5,
                        "column": 35
                      }
                    },
                    "content": "greeting"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Alice"
                  }
                ]
              },
              "raw": {
                "templateName": "greeting",
                "arguments": [
                  "\"Alice\""
                ]
              },
              "meta": {
                "argumentCount": 1,
                "isDataValue": true
              }
            },
            "goodbye": {
              "type": "Directive",
              "nodeId": "9ebe2bfd-a977-4bbd-b23e-57149b4a2268",
              "location": {
                "start": {
                  "offset": 190,
                  "line": 6,
                  "column": 12
                },
                "end": {
                  "offset": 223,
                  "line": 6,
                  "column": 45
                }
              },
              "kind": "add",
              "subtype": "addTemplateInvocation",
              "source": "templateInvocation",
              "values": {
                "templateName": [
                  {
                    "type": "Text",
                    "nodeId": "5c91104d-f444-4701-b9ef-8b23098b6355",
                    "location": {
                      "start": {
                        "offset": 195,
                        "line": 6,
                        "column": 17
                      },
                      "end": {
                        "offset": 223,
                        "line": 6,
                        "column": 45
                      }
                    },
                    "content": "farewell"
                  }
                ],
                "arguments": [
                  {
                    "type": "string",
                    "value": "Bob"
                  },
                  {
                    "type": "string",
                    "value": "tomorrow"
                  }
                ]
              },
              "raw": {
                "templateName": "farewell",
                "arguments": [
                  "\"Bob\"",
                  "\"tomorrow\""
                ]
              },
              "meta": {
                "argumentCount": 2,
                "isDataValue": true
              }
            },
            "nested": {
              "type": "object",
              "properties": {
                "morning": {
                  "type": "Directive",
                  "nodeId": "a064331b-9011-447e-815d-bc0f60ae6d73",
                  "location": {
                    "start": {
                      "offset": 250,
                      "line": 8,
                      "column": 14
                    },
                    "end": {
                      "offset": 275,
                      "line": 8,
                      "column": 39
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "e9365770-3c31-462c-b38e-9f60b6cf0580",
                        "location": {
                          "start": {
                            "offset": 255,
                            "line": 8,
                            "column": 19
                          },
                          "end": {
                            "offset": 275,
                            "line": 8,
                            "column": 39
                          }
                        },
                        "content": "greeting"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "Charlie"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "greeting",
                    "arguments": [
                      "\"Charlie\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 1,
                    "isDataValue": true
                  }
                },
                "evening": {
                  "type": "Directive",
                  "nodeId": "8aa88db6-7baa-45c7-876f-4bdd2ce62a75",
                  "location": {
                    "start": {
                      "offset": 290,
                      "line": 9,
                      "column": 14
                    },
                    "end": {
                      "offset": 326,
                      "line": 9,
                      "column": 50
                    }
                  },
                  "kind": "add",
                  "subtype": "addTemplateInvocation",
                  "source": "templateInvocation",
                  "values": {
                    "templateName": [
                      {
                        "type": "Text",
                        "nodeId": "bf6d00c5-a76e-4960-95cd-ced9f209bb8d",
                        "location": {
                          "start": {
                            "offset": 295,
                            "line": 9,
                            "column": 19
                          },
                          "end": {
                            "offset": 326,
                            "line": 9,
                            "column": 50
                          }
                        },
                        "content": "farewell"
                      }
                    ],
                    "arguments": [
                      {
                        "type": "string",
                        "value": "David"
                      },
                      {
                        "type": "string",
                        "value": "next week"
                      }
                    ]
                  },
                  "raw": {
                    "templateName": "farewell",
                    "arguments": [
                      "\"David\"",
                      "\"next week\""
                    ]
                  },
                  "meta": {
                    "argumentCount": 2,
                    "isDataValue": true
                  }
                }
              }
            }
          }
        }
      },
      "raw": {
        "identifier": "messages",
        "value": "{\n  \"welcome\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"59a63f9c-c0ae-44ed-a40f-05913801c536\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 154,\n        \"line\": 5,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 177,\n        \"line\": 5,\n        \"column\": 35\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"d3a75c64-5685-483f-9337-1f1cb01b5775\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 159,\n              \"line\": 5,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 177,\n              \"line\": 5,\n              \"column\": 35\n            }\n          },\n          \"content\": \"greeting\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Alice\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"greeting\",\n      \"arguments\": [\n        \"\\\"Alice\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 1,\n      \"isDataValue\": true\n    }\n  },\n  \"goodbye\": {\n    \"type\": \"Directive\",\n    \"nodeId\": \"9ebe2bfd-a977-4bbd-b23e-57149b4a2268\",\n    \"location\": {\n      \"start\": {\n        \"offset\": 190,\n        \"line\": 6,\n        \"column\": 12\n      },\n      \"end\": {\n        \"offset\": 223,\n        \"line\": 6,\n        \"column\": 45\n      }\n    },\n    \"kind\": \"add\",\n    \"subtype\": \"addTemplateInvocation\",\n    \"source\": \"templateInvocation\",\n    \"values\": {\n      \"templateName\": [\n        {\n          \"type\": \"Text\",\n          \"nodeId\": \"5c91104d-f444-4701-b9ef-8b23098b6355\",\n          \"location\": {\n            \"start\": {\n              \"offset\": 195,\n              \"line\": 6,\n              \"column\": 17\n            },\n            \"end\": {\n              \"offset\": 223,\n              \"line\": 6,\n              \"column\": 45\n            }\n          },\n          \"content\": \"farewell\"\n        }\n      ],\n      \"arguments\": [\n        {\n          \"type\": \"string\",\n          \"value\": \"Bob\"\n        },\n        {\n          \"type\": \"string\",\n          \"value\": \"tomorrow\"\n        }\n      ]\n    },\n    \"raw\": {\n      \"templateName\": \"farewell\",\n      \"arguments\": [\n        \"\\\"Bob\\\"\",\n        \"\\\"tomorrow\\\"\"\n      ]\n    },\n    \"meta\": {\n      \"argumentCount\": 2,\n      \"isDataValue\": true\n    }\n  },\n  \"nested\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"morning\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"a064331b-9011-447e-815d-bc0f60ae6d73\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 250,\n            \"line\": 8,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 275,\n            \"line\": 8,\n            \"column\": 39\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"e9365770-3c31-462c-b38e-9f60b6cf0580\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 255,\n                  \"line\": 8,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 275,\n                  \"line\": 8,\n                  \"column\": 39\n                }\n              },\n              \"content\": \"greeting\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"Charlie\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"greeting\",\n          \"arguments\": [\n            \"\\\"Charlie\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 1,\n          \"isDataValue\": true\n        }\n      },\n      \"evening\": {\n        \"type\": \"Directive\",\n        \"nodeId\": \"8aa88db6-7baa-45c7-876f-4bdd2ce62a75\",\n        \"location\": {\n          \"start\": {\n            \"offset\": 290,\n            \"line\": 9,\n            \"column\": 14\n          },\n          \"end\": {\n            \"offset\": 326,\n            \"line\": 9,\n            \"column\": 50\n          }\n        },\n        \"kind\": \"add\",\n        \"subtype\": \"addTemplateInvocation\",\n        \"source\": \"templateInvocation\",\n        \"values\": {\n          \"templateName\": [\n            {\n              \"type\": \"Text\",\n              \"nodeId\": \"bf6d00c5-a76e-4960-95cd-ced9f209bb8d\",\n              \"location\": {\n                \"start\": {\n                  \"offset\": 295,\n                  \"line\": 9,\n                  \"column\": 19\n                },\n                \"end\": {\n                  \"offset\": 326,\n                  \"line\": 9,\n                  \"column\": 50\n                }\n              },\n              \"content\": \"farewell\"\n            }\n          ],\n          \"arguments\": [\n            {\n              \"type\": \"string\",\n              \"value\": \"David\"\n            },\n            {\n              \"type\": \"string\",\n              \"value\": \"next week\"\n            }\n          ]\n        },\n        \"raw\": {\n          \"templateName\": \"farewell\",\n          \"arguments\": [\n            \"\\\"David\\\"\",\n            \"\\\"next week\\\"\"\n          ]\n        },\n        \"meta\": {\n          \"argumentCount\": 2,\n          \"isDataValue\": true\n        }\n      }\n    }\n  }\n}"
      },
      "meta": {
        "objectData": {
          "propCount": 3
        }
      }
    },
    {
      "type": "Text",
      "nodeId": "54619fc2-3fad-4e8c-9b3c-dd9e386ecca4",
      "location": {
        "start": {
          "offset": 332,
          "line": 11,
          "column": 2
        },
        "end": {
          "offset": 334,
          "line": 13,
          "column": 1
        }
      },
      "content": "\n\n"
    },
    {
      "type": "Directive",
      "nodeId": "c1ff49c0-9c7c-4861-bcf2-1db27fb54293",
      "location": {
        "start": {
          "offset": 334,
          "line": 13,
          "column": 1
        },
        "end": {
          "offset": 440,
          "line": 16,
          "column": 30
        }
      },
      "kind": "add",
      "subtype": "addTemplate",
      "source": "template",
      "values": {
        "content": [
          {
            "type": "VariableReference",
            "nodeId": "6bf7924d-9b95-4d62-b1fb-3fc85b4aab47",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "welcome"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "3bad1e74-00a4-42f6-9e9a-513b96e3c35c",
            "location": {
              "start": {
                "offset": 361,
                "line": 13,
                "column": 28
              },
              "end": {
                "offset": 362,
                "line": 14,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "a9455ae5-acd3-4372-b103-29ff0ec925ae",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "goodbye"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "c43f9ed3-f13f-48b9-81bc-4125e12dcc01",
            "location": {
              "start": {
                "offset": 382,
                "line": 14,
                "column": 21
              },
              "end": {
                "offset": 383,
                "line": 15,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "6c94be0a-c664-4594-9d3f-52ebdbabe6b5",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "morning"
              }
            ]
          },
          {
            "type": "Text",
            "nodeId": "b0d7a71e-c9da-43b5-831f-e356366d382e",
            "location": {
              "start": {
                "offset": 410,
                "line": 15,
                "column": 28
              },
              "end": {
                "offset": 411,
                "line": 16,
                "column": 1
              }
            },
            "content": "\n"
          },
          {
            "type": "VariableReference",
            "nodeId": "e8f5710f-a5e7-4acc-95fb-4470880d99a1",
            "location": {
              "start": {
                "offset": 0,
                "line": 1,
                "column": 1
              },
              "end": {
                "offset": 0,
                "line": 1,
                "column": 1
              }
            },
            "valueType": "varInterpolation",
            "identifier": "messages",
            "fields": [
              {
                "type": "field",
                "name": "nested"
              },
              {
                "type": "field",
                "name": "evening"
              }
            ]
          }
        ]
      },
      "raw": {
        "content": "{{messages}}\n{{messages}}\n{{messages}}\n{{messages}}"
      },
      "meta": {
        "isTemplateContent": true,
        "hasVariables": true,
        "wrapperType": "doubleBracket"
      }
    }
  ]
}