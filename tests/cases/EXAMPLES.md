# Mlld Examples

This file contains all test case examples organized by category.
Generated by `tests/utils/ast-fixtures.js`

## Table of Contents

- [Exceptions](#exceptions)
  - [Text parameterized run command](#exceptions-text-parameterized-run-command)
- [Valid](#valid)
  - [Examples](#valid-examples)
  - [Exec parameterized command](#valid-exec-parameterized-command)
- [Warnings](#warnings)
  - [Bare variable reference](#warnings-bare-variable-reference)
  - [Directive in text line](#warnings-directive-in-text-line)
  - [Template syntax in text](#warnings-template-syntax-in-text)

## Exceptions

### Exceptions Text parameterized run command

**Input:**
```mlld
# Parameterized Text with Run Command (Invalid)

This example shows an invalid syntax where someone tries to create a parameterized text variable with a `@run` command.

@text codecat(dir) = @run [find @dir -type f -exec sh -c 'echo "<$(realpath --relative-to=@dir {})>"; cat {}; echo "@dir {})>"' \;]

This should fail because:
1. Parameterized text templates should use `@exec` not `@text`
2. The complex shell escaping may not be properly handled
3. There's malformed syntax at the end
```

## Valid

### Valid Examples

**Input:**
```mlld
>> This is a comment and should be ignored
>> I can write a couple lines of them if I want and no one will ever know.

@import { * } from "files/imports.mld"

@data role = {
    "architect": "You are a senior architect skilled in assessing TypeScript codebases.",
    "ux": "You are a senior ux designer skilled in assessing user experience.",
    "security": "You are a senior security engineer skilled in assessing TypeScript codebases."
}

@data task = {
    "code_review": "Carefully review the code and test results and advise on the quality of the code and areas of improvement.",
    "ux_review": "Carefully review the user experience and advise on the quality of the user experience and areas of improvement.",
    "security_review": "Carefully review the security of the code and advise on the quality of the security and areas of improvement."
}

## Your role
@add @role.architect

## Documentation
### Architecture
@add @path "./docs/dev/ARCHITECTURE.md" # TESTING INFRASTRUCTURE
### Mlld error handling
@add @path "./docs/dev/ERRORS.md"

## Test Results
@run npm test core/syntax

## Your task
@add @task.code_review

>> this doesn't work but should
>> @run @text codecat("./examples")
```

### Valid Exec parameterized command

**Input:**
```mlld
# Parameterized Exec Command (Valid)

This example shows the correct way to create a parameterized command using `@exec`.

@exec greet(name, times) = @run [echo "Hello @name!" && echo "Welcome @name!" && echo "Greetings @name!"]

@run @greet("Alice", "3")
```

**Expected Output:**
```markdown
# Parameterized Exec Command (Valid)

This example shows the correct way to create a parameterized command using `@exec`.

Hello Alice!
Welcome Alice!
Greetings Alice!
```

## Warnings

### Warnings Bare variable reference

**Input:**
```mlld
@text myvar = "Hello world"

This line contains a bare variable reference: @myvar
```

### Warnings Directive in text line

**Input:**
```mlld
@text myvar = "Hello world"

Some text @add @myvar in the middle of a line.
```

### Warnings Template syntax in text

**Input:**
```mlld
@text myvar = "Hello world"

This line uses template syntax: {{myvar}}
```
