/exe @readData() = js { return "ok"; }
/exe @deleteData() = js { return "deleted"; }

/var tools @agentTools = {
  safeRead: { mlld: @readData },
  dangerousDelete: {
    mlld: @deleteData,
    labels: ["destructive"],
    description: "Deletes records"
  }
}

/guard @blockDestructive before op:exe = when [
  @mx.op.labels.includes("destructive") => deny "Blocked"
  * => allow
]

/env @agent with { tools: @agentTools } [
  /run cmd { claude -p @task }
]