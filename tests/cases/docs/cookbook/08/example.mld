var @THRESHOLD = 0.7

exe @score(input) = [
  let @length = @input.length()
  let @hasQuestion = @input.text.includes("?")

  let @scoreBase = when [
    @length > 100 => 0.5
    @length > 50 => 0.3
    * => 0.1
  ]

  => when [
    @hasQuestion => @scoreBase + 0.3
    * => @scoreBase
  ]
]

exe @route(input) = [
  let @s = @score(@input)
  => when [
    @s >= @THRESHOLD => { handler: "detailed", score: @s }
    @s >= 0.3 => { handler: "quick", score: @s }
    * => { handler: "ignore", score: @s }
  ]
]

var @decision = @route("What's the weather like today?")
show `Handler: @decision.handler (score: @decision.score)`