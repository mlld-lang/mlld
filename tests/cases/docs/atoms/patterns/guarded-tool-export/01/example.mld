exe @searchIssues(org: string, repo: string, query: string) = cmd {
  gh issue list -R @org/@repo --search "@query" --json number,title
} with { description: "Search GitHub issues" }

guard @noSecrets before op:exe = when [
  @input.any.mx.labels.includes("secret") => deny "Secret data cannot flow to tools"
  * => allow
]

var tools @agentTools = {
  searchIssues: {
    mlld: @searchIssues,
    bind: { org: "mlld-lang", repo: "mlld" },
    expose: ["query"],
    description: "Search mlld issues by keyword"
  }
}

export { @searchIssues, @agentTools }